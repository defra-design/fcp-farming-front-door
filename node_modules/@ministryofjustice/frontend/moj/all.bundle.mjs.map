{"version":3,"file":"all.bundle.mjs","sources":["../../node_modules/govuk-frontend/dist/govuk/common/index.mjs","../../node_modules/govuk-frontend/dist/govuk/errors/index.mjs","../../node_modules/govuk-frontend/dist/govuk/component.mjs","../../node_modules/govuk-frontend/dist/govuk/common/configuration.mjs","../../node_modules/govuk-frontend/dist/govuk/init.mjs","../../src/moj/common/moj-frontend-version.mjs","../../src/moj/components/add-another/add-another.mjs","../../src/moj/common/index.mjs","../../src/moj/helpers.mjs","../../src/moj/components/alert/alert.mjs","../../src/moj/components/button-menu/button-menu.mjs","../../src/moj/components/date-picker/date-picker.mjs","../../src/moj/components/filter-toggle-button/filter-toggle-button.mjs","../../src/moj/components/form-validator/form-validator.mjs","../../src/moj/components/multi-file-upload/multi-file-upload.mjs","../../src/moj/components/multi-select/multi-select.mjs","../../src/moj/components/password-reveal/password-reveal.mjs","../../src/moj/components/rich-text-editor/rich-text-editor.mjs","../../src/moj/components/search-toggle/search-toggle.mjs","../../src/moj/components/sortable-table/sortable-table.mjs","../../src/moj/all.mjs"],"sourcesContent":["function getFragmentFromUrl(url) {\n  if (!url.includes('#')) {\n    return undefined;\n  }\n  return url.split('#').pop();\n}\nfunction getBreakpoint(name) {\n  const property = `--govuk-frontend-breakpoint-${name}`;\n  const value = window.getComputedStyle(document.documentElement).getPropertyValue(property);\n  return {\n    property,\n    value: value || undefined\n  };\n}\nfunction setFocus($element, options = {}) {\n  var _options$onBeforeFocu;\n  const isFocusable = $element.getAttribute('tabindex');\n  if (!isFocusable) {\n    $element.setAttribute('tabindex', '-1');\n  }\n  function onFocus() {\n    $element.addEventListener('blur', onBlur, {\n      once: true\n    });\n  }\n  function onBlur() {\n    var _options$onBlur;\n    (_options$onBlur = options.onBlur) == null || _options$onBlur.call($element);\n    if (!isFocusable) {\n      $element.removeAttribute('tabindex');\n    }\n  }\n  $element.addEventListener('focus', onFocus, {\n    once: true\n  });\n  (_options$onBeforeFocu = options.onBeforeFocus) == null || _options$onBeforeFocu.call($element);\n  $element.focus();\n}\nfunction isInitialised($root, moduleName) {\n  return $root instanceof HTMLElement && $root.hasAttribute(`data-${moduleName}-init`);\n}\n\n/**\n * Checks if GOV.UK Frontend is supported on this page\n *\n * Some browsers will load and run our JavaScript but GOV.UK Frontend\n * won't be supported.\n *\n * @param {HTMLElement | null} [$scope] - (internal) `<body>` HTML element checked for browser support\n * @returns {boolean} Whether GOV.UK Frontend is supported on this page\n */\nfunction isSupported($scope = document.body) {\n  if (!$scope) {\n    return false;\n  }\n  return $scope.classList.contains('govuk-frontend-supported');\n}\nfunction isArray(option) {\n  return Array.isArray(option);\n}\nfunction isObject(option) {\n  return !!option && typeof option === 'object' && !isArray(option);\n}\nfunction formatErrorMessage(Component, message) {\n  return `${Component.moduleName}: ${message}`;\n}\n/**\n * @typedef ComponentWithModuleName\n * @property {string} moduleName - Name of the component\n */\n/**\n * @import { ObjectNested } from './configuration.mjs'\n */\n\nexport { formatErrorMessage, getBreakpoint, getFragmentFromUrl, isInitialised, isObject, isSupported, setFocus };\n//# sourceMappingURL=index.mjs.map\n","import { formatErrorMessage } from '../common/index.mjs';\n\nclass GOVUKFrontendError extends Error {\n  constructor(...args) {\n    super(...args);\n    this.name = 'GOVUKFrontendError';\n  }\n}\nclass SupportError extends GOVUKFrontendError {\n  /**\n   * Checks if GOV.UK Frontend is supported on this page\n   *\n   * @param {HTMLElement | null} [$scope] - HTML element `<body>` checked for browser support\n   */\n  constructor($scope = document.body) {\n    const supportMessage = 'noModule' in HTMLScriptElement.prototype ? 'GOV.UK Frontend initialised without `<body class=\"govuk-frontend-supported\">` from template `<script>` snippet' : 'GOV.UK Frontend is not supported in this browser';\n    super($scope ? supportMessage : 'GOV.UK Frontend initialised without `<script type=\"module\">`');\n    this.name = 'SupportError';\n  }\n}\nclass ConfigError extends GOVUKFrontendError {\n  constructor(...args) {\n    super(...args);\n    this.name = 'ConfigError';\n  }\n}\nclass ElementError extends GOVUKFrontendError {\n  constructor(messageOrOptions) {\n    let message = typeof messageOrOptions === 'string' ? messageOrOptions : '';\n    if (typeof messageOrOptions === 'object') {\n      const {\n        component,\n        identifier,\n        element,\n        expectedType\n      } = messageOrOptions;\n      message = identifier;\n      message += element ? ` is not of type ${expectedType != null ? expectedType : 'HTMLElement'}` : ' not found';\n      message = formatErrorMessage(component, message);\n    }\n    super(message);\n    this.name = 'ElementError';\n  }\n}\nclass InitError extends GOVUKFrontendError {\n  constructor(componentOrMessage) {\n    const message = typeof componentOrMessage === 'string' ? componentOrMessage : formatErrorMessage(componentOrMessage, `Root element (\\`$root\\`) already initialised`);\n    super(message);\n    this.name = 'InitError';\n  }\n}\n/**\n * @import { ComponentWithModuleName } from '../common/index.mjs'\n */\n\nexport { ConfigError, ElementError, GOVUKFrontendError, InitError, SupportError };\n//# sourceMappingURL=index.mjs.map\n","import { isInitialised, isSupported } from './common/index.mjs';\nimport { InitError, ElementError, SupportError } from './errors/index.mjs';\n\nclass Component {\n  /**\n   * Returns the root element of the component\n   *\n   * @protected\n   * @returns {RootElementType} - the root element of component\n   */\n  get $root() {\n    return this._$root;\n  }\n  constructor($root) {\n    this._$root = void 0;\n    const childConstructor = this.constructor;\n    if (typeof childConstructor.moduleName !== 'string') {\n      throw new InitError(`\\`moduleName\\` not defined in component`);\n    }\n    if (!($root instanceof childConstructor.elementType)) {\n      throw new ElementError({\n        element: $root,\n        component: childConstructor,\n        identifier: 'Root element (`$root`)',\n        expectedType: childConstructor.elementType.name\n      });\n    } else {\n      this._$root = $root;\n    }\n    childConstructor.checkSupport();\n    this.checkInitialised();\n    const moduleName = childConstructor.moduleName;\n    this.$root.setAttribute(`data-${moduleName}-init`, '');\n  }\n  checkInitialised() {\n    const constructor = this.constructor;\n    const moduleName = constructor.moduleName;\n    if (moduleName && isInitialised(this.$root, moduleName)) {\n      throw new InitError(constructor);\n    }\n  }\n  static checkSupport() {\n    if (!isSupported()) {\n      throw new SupportError();\n    }\n  }\n}\n\n/**\n * @typedef ChildClass\n * @property {string} moduleName - The module name that'll be looked for in the DOM when initialising the component\n */\n\n/**\n * @typedef {typeof Component & ChildClass} ChildClassConstructor\n */\nComponent.elementType = HTMLElement;\n\nexport { Component };\n//# sourceMappingURL=component.mjs.map\n","import { Component } from '../component.mjs';\nimport { ConfigError } from '../errors/index.mjs';\nimport { isObject, formatErrorMessage } from './index.mjs';\n\nconst configOverride = Symbol.for('configOverride');\nclass ConfigurableComponent extends Component {\n  [configOverride](param) {\n    return {};\n  }\n\n  /**\n   * Returns the root element of the component\n   *\n   * @protected\n   * @returns {ConfigurationType} - the root element of component\n   */\n  get config() {\n    return this._config;\n  }\n  constructor($root, config) {\n    super($root);\n    this._config = void 0;\n    const childConstructor = this.constructor;\n    if (!isObject(childConstructor.defaults)) {\n      throw new ConfigError(formatErrorMessage(childConstructor, 'Config passed as parameter into constructor but no defaults defined'));\n    }\n    const datasetConfig = normaliseDataset(childConstructor, this._$root.dataset);\n    this._config = mergeConfigs(childConstructor.defaults, config != null ? config : {}, this[configOverride](datasetConfig), datasetConfig);\n  }\n}\nfunction normaliseString(value, property) {\n  const trimmedValue = value ? value.trim() : '';\n  let output;\n  let outputType = property == null ? void 0 : property.type;\n  if (!outputType) {\n    if (['true', 'false'].includes(trimmedValue)) {\n      outputType = 'boolean';\n    }\n    if (trimmedValue.length > 0 && isFinite(Number(trimmedValue))) {\n      outputType = 'number';\n    }\n  }\n  switch (outputType) {\n    case 'boolean':\n      output = trimmedValue === 'true';\n      break;\n    case 'number':\n      output = Number(trimmedValue);\n      break;\n    default:\n      output = value;\n  }\n  return output;\n}\nfunction normaliseDataset(Component, dataset) {\n  if (!isObject(Component.schema)) {\n    throw new ConfigError(formatErrorMessage(Component, 'Config passed as parameter into constructor but no schema defined'));\n  }\n  const out = {};\n  const entries = Object.entries(Component.schema.properties);\n  for (const entry of entries) {\n    const [namespace, property] = entry;\n    const field = namespace.toString();\n    if (field in dataset) {\n      out[field] = normaliseString(dataset[field], property);\n    }\n    if ((property == null ? void 0 : property.type) === 'object') {\n      out[field] = extractConfigByNamespace(Component.schema, dataset, namespace);\n    }\n  }\n  return out;\n}\nfunction mergeConfigs(...configObjects) {\n  const formattedConfigObject = {};\n  for (const configObject of configObjects) {\n    for (const key of Object.keys(configObject)) {\n      const option = formattedConfigObject[key];\n      const override = configObject[key];\n      if (isObject(option) && isObject(override)) {\n        formattedConfigObject[key] = mergeConfigs(option, override);\n      } else {\n        formattedConfigObject[key] = override;\n      }\n    }\n  }\n  return formattedConfigObject;\n}\nfunction validateConfig(schema, config) {\n  const validationErrors = [];\n  for (const [name, conditions] of Object.entries(schema)) {\n    const errors = [];\n    if (Array.isArray(conditions)) {\n      for (const {\n        required,\n        errorMessage\n      } of conditions) {\n        if (!required.every(key => !!config[key])) {\n          errors.push(errorMessage);\n        }\n      }\n      if (name === 'anyOf' && !(conditions.length - errors.length >= 1)) {\n        validationErrors.push(...errors);\n      }\n    }\n  }\n  return validationErrors;\n}\nfunction extractConfigByNamespace(schema, dataset, namespace) {\n  const property = schema.properties[namespace];\n  if ((property == null ? void 0 : property.type) !== 'object') {\n    return;\n  }\n  const newObject = {\n    [namespace]: {}\n  };\n  for (const [key, value] of Object.entries(dataset)) {\n    let current = newObject;\n    const keyParts = key.split('.');\n    for (const [index, name] of keyParts.entries()) {\n      if (isObject(current)) {\n        if (index < keyParts.length - 1) {\n          if (!isObject(current[name])) {\n            current[name] = {};\n          }\n          current = current[name];\n        } else if (key !== namespace) {\n          current[name] = normaliseString(value);\n        }\n      }\n    }\n  }\n  return newObject[namespace];\n}\n/**\n * Schema for component config\n *\n * @template {Partial<Record<keyof ConfigurationType, unknown>>} ConfigurationType\n * @typedef {object} Schema\n * @property {Record<keyof ConfigurationType, SchemaProperty | undefined>} properties - Schema properties\n * @property {SchemaCondition<ConfigurationType>[]} [anyOf] - List of schema conditions\n */\n/**\n * Schema property for component config\n *\n * @typedef {object} SchemaProperty\n * @property {'string' | 'boolean' | 'number' | 'object'} type - Property type\n */\n/**\n * Schema condition for component config\n *\n * @template {Partial<Record<keyof ConfigurationType, unknown>>} ConfigurationType\n * @typedef {object} SchemaCondition\n * @property {(keyof ConfigurationType)[]} required - List of required config fields\n * @property {string} errorMessage - Error message when required config fields not provided\n */\n/**\n * @template {Partial<Record<keyof ConfigurationType, unknown>>} [ConfigurationType=ObjectNested]\n * @typedef ChildClass\n * @property {string} moduleName - The module name that'll be looked for in the DOM when initialising the component\n * @property {Schema<ConfigurationType>} [schema] - The schema of the component configuration\n * @property {ConfigurationType} [defaults] - The default values of the configuration of the component\n */\n/**\n * @template {Partial<Record<keyof ConfigurationType, unknown>>} [ConfigurationType=ObjectNested]\n * @typedef {typeof Component & ChildClass<ConfigurationType>} ChildClassConstructor<ConfigurationType>\n */\n\nexport { ConfigurableComponent, configOverride, extractConfigByNamespace, mergeConfigs, normaliseDataset, normaliseString, validateConfig };\n//# sourceMappingURL=configuration.mjs.map\n","import { isSupported } from './common/index.mjs';\nimport { Accordion } from './components/accordion/accordion.mjs';\nimport { Button } from './components/button/button.mjs';\nimport { CharacterCount } from './components/character-count/character-count.mjs';\nimport { Checkboxes } from './components/checkboxes/checkboxes.mjs';\nimport { ErrorSummary } from './components/error-summary/error-summary.mjs';\nimport { ExitThisPage } from './components/exit-this-page/exit-this-page.mjs';\nimport { FileUpload } from './components/file-upload/file-upload.mjs';\nimport { Header } from './components/header/header.mjs';\nimport { NotificationBanner } from './components/notification-banner/notification-banner.mjs';\nimport { PasswordInput } from './components/password-input/password-input.mjs';\nimport { Radios } from './components/radios/radios.mjs';\nimport { ServiceNavigation } from './components/service-navigation/service-navigation.mjs';\nimport { SkipLink } from './components/skip-link/skip-link.mjs';\nimport { Tabs } from './components/tabs/tabs.mjs';\nimport { SupportError } from './errors/index.mjs';\n\n/**\n * Initialise all components\n *\n * Use the `data-module` attributes to find, instantiate and init all of the\n * components provided as part of GOV.UK Frontend.\n *\n * @param {Config & { scope?: Element, onError?: OnErrorCallback<CompatibleClass> }} [config] - Config for all components (with optional scope)\n */\nfunction initAll(config) {\n  var _config$scope;\n  config = typeof config !== 'undefined' ? config : {};\n  if (!isSupported()) {\n    if (config.onError) {\n      config.onError(new SupportError(), {\n        config\n      });\n    } else {\n      console.log(new SupportError());\n    }\n    return;\n  }\n  const components = [[Accordion, config.accordion], [Button, config.button], [CharacterCount, config.characterCount], [Checkboxes], [ErrorSummary, config.errorSummary], [ExitThisPage, config.exitThisPage], [FileUpload, config.fileUpload], [Header], [NotificationBanner, config.notificationBanner], [PasswordInput, config.passwordInput], [Radios], [ServiceNavigation], [SkipLink], [Tabs]];\n  const options = {\n    scope: (_config$scope = config.scope) != null ? _config$scope : document,\n    onError: config.onError\n  };\n  components.forEach(([Component, config]) => {\n    createAll(Component, config, options);\n  });\n}\n\n/**\n * Create all instances of a specific component on the page\n *\n * Uses the `data-module` attribute to find all elements matching the specified\n * component on the page, creating instances of the component object for each\n * of them.\n *\n * Any component errors will be caught and logged to the console.\n *\n * @template {CompatibleClass} ComponentClass\n * @param {ComponentClass} Component - class of the component to create\n * @param {ComponentConfig<ComponentClass>} [config] - Config supplied to component\n * @param {OnErrorCallback<ComponentClass> | Element | Document | CreateAllOptions<ComponentClass> } [createAllOptions] - options for createAll including scope of the document to search within and callback function if error throw by component on init\n * @returns {Array<InstanceType<ComponentClass>>} - array of instantiated components\n */\nfunction createAll(Component, config, createAllOptions) {\n  let $scope = document;\n  let onError;\n  if (typeof createAllOptions === 'object') {\n    var _createAllOptions$sco;\n    createAllOptions = createAllOptions;\n    $scope = (_createAllOptions$sco = createAllOptions.scope) != null ? _createAllOptions$sco : $scope;\n    onError = createAllOptions.onError;\n  }\n  if (typeof createAllOptions === 'function') {\n    onError = createAllOptions;\n  }\n  if (createAllOptions instanceof HTMLElement) {\n    $scope = createAllOptions;\n  }\n  const $elements = $scope.querySelectorAll(`[data-module=\"${Component.moduleName}\"]`);\n  if (!isSupported()) {\n    if (onError) {\n      onError(new SupportError(), {\n        component: Component,\n        config\n      });\n    } else {\n      console.log(new SupportError());\n    }\n    return [];\n  }\n  return Array.from($elements).map($element => {\n    try {\n      return typeof config !== 'undefined' ? new Component($element, config) : new Component($element);\n    } catch (error) {\n      if (onError) {\n        onError(error, {\n          element: $element,\n          component: Component,\n          config\n        });\n      } else {\n        console.log(error);\n      }\n      return null;\n    }\n  }).filter(Boolean);\n}\n/**\n * @typedef {{new (...args: any[]): any, moduleName: string}} CompatibleClass\n */\n/**\n * Config for all components via `initAll()`\n *\n * @typedef {object} Config\n * @property {AccordionConfig} [accordion] - Accordion config\n * @property {ButtonConfig} [button] - Button config\n * @property {CharacterCountConfig} [characterCount] - Character Count config\n * @property {ErrorSummaryConfig} [errorSummary] - Error Summary config\n * @property {ExitThisPageConfig} [exitThisPage] - Exit This Page config\n * @property {FileUploadConfig} [fileUpload] - File Upload config\n * @property {NotificationBannerConfig} [notificationBanner] - Notification Banner config\n * @property {PasswordInputConfig} [passwordInput] - Password input config\n */\n/**\n * Config for individual components\n *\n * @import { AccordionConfig } from './components/accordion/accordion.mjs'\n * @import { ButtonConfig } from './components/button/button.mjs'\n * @import { CharacterCountConfig } from './components/character-count/character-count.mjs'\n * @import { ErrorSummaryConfig } from './components/error-summary/error-summary.mjs'\n * @import { ExitThisPageConfig } from './components/exit-this-page/exit-this-page.mjs'\n * @import { NotificationBannerConfig } from './components/notification-banner/notification-banner.mjs'\n * @import { PasswordInputConfig } from './components/password-input/password-input.mjs'\n * @import { FileUploadConfig } from './components/file-upload/file-upload.mjs'\n */\n/**\n * Component config keys, e.g. `accordion` and `characterCount`\n *\n * @typedef {keyof Config} ConfigKey\n */\n/**\n * @template {CompatibleClass} ComponentClass\n * @typedef {ConstructorParameters<ComponentClass>[1]} ComponentConfig\n */\n/**\n * @template {CompatibleClass} ComponentClass\n * @typedef {object} ErrorContext\n * @property {Element} [element] - Element used for component module initialisation\n * @property {ComponentClass} [component] - Class of component\n * @property {ComponentConfig<ComponentClass>} config - Config supplied to component\n */\n/**\n * @template {CompatibleClass} ComponentClass\n * @callback OnErrorCallback\n * @param {unknown} error - Thrown error\n * @param {ErrorContext<ComponentClass>} context - Object containing the element, component class and configuration\n */\n/**\n * @template {CompatibleClass} ComponentClass\n * @typedef {object} CreateAllOptions\n * @property {Element | Document} [scope] - scope of the document to search within\n * @property {OnErrorCallback<ComponentClass>} [onError] - callback function if error throw by component on init\n */\n\nexport { createAll, initAll };\n//# sourceMappingURL=init.mjs.map\n","/*\n * This variable is automatically overwritten during builds and releases.\n * It doesn't need to be updated manually.\n */\n\n/**\n * MoJ Frontend release version\n *\n * {@link https://github.com/ministryofjustice/moj-frontend/releases}\n */\nexport const version = 'development'\n","import { Component } from 'govuk-frontend'\n\nexport class AddAnother extends Component {\n  /**\n   * @param {Element | null} $root - HTML element to use for add another\n   */\n  constructor($root) {\n    super($root)\n\n    this.$root.addEventListener('click', this.onRemoveButtonClick.bind(this))\n    this.$root.addEventListener('click', this.onAddButtonClick.bind(this))\n\n    const $buttons = this.$root.querySelectorAll(\n      '.moj-add-another__add-button, moj-add-another__remove-button'\n    )\n\n    $buttons.forEach(($button) => {\n      if (!($button instanceof HTMLButtonElement)) {\n        return\n      }\n\n      $button.type = 'button'\n    })\n  }\n\n  /**\n   * @param {MouseEvent} event - Click event\n   */\n  onAddButtonClick(event) {\n    const $button = event.target\n\n    if (\n      !$button ||\n      !($button instanceof HTMLButtonElement) ||\n      !$button.classList.contains('moj-add-another__add-button')\n    ) {\n      return\n    }\n\n    const $items = this.getItems()\n    const $item = this.getNewItem()\n\n    if (!$item || !($item instanceof HTMLElement)) {\n      return\n    }\n\n    this.updateAttributes($item, $items.length)\n    this.resetItem($item)\n\n    const $firstItem = $items[0]\n    if (!this.hasRemoveButton($firstItem)) {\n      this.createRemoveButton($firstItem)\n    }\n\n    $items[$items.length - 1].after($item)\n\n    const $input = $item.querySelector('input, textarea, select')\n    if ($input && $input instanceof HTMLInputElement) {\n      $input.focus()\n    }\n  }\n\n  /**\n   * @param {HTMLElement} $item - Add another item\n   */\n  hasRemoveButton($item) {\n    return $item.querySelectorAll('.moj-add-another__remove-button').length\n  }\n\n  getItems() {\n    if (!this.$root) {\n      return []\n    }\n\n    const $items = Array.from(\n      this.$root.querySelectorAll('.moj-add-another__item')\n    )\n\n    return $items.filter((item) => item instanceof HTMLElement)\n  }\n\n  getNewItem() {\n    const $items = this.getItems()\n    const $item = $items[0].cloneNode(true)\n\n    if (!$item || !($item instanceof HTMLElement)) {\n      return\n    }\n\n    if (!this.hasRemoveButton($item)) {\n      this.createRemoveButton($item)\n    }\n\n    return $item\n  }\n\n  /**\n   * @param {HTMLElement} $item - Add another item\n   * @param {number} index - Add another item index\n   */\n  updateAttributes($item, index) {\n    $item.querySelectorAll('[data-name]').forEach(($input) => {\n      if (!this.isValidInputElement($input)) {\n        return\n      }\n\n      const name = $input.getAttribute('data-name') || ''\n      const id = $input.getAttribute('data-id') || ''\n      const originalId = $input.id\n\n      $input.name = name.replace(/%index%/, `${index}`)\n      $input.id = id.replace(/%index%/, `${index}`)\n\n      const $label =\n        $input.parentElement.querySelector('label') ||\n        $input.closest('label') ||\n        $item.querySelector(`[for=\"${originalId}\"]`)\n\n      if ($label && $label instanceof HTMLLabelElement) {\n        $label.htmlFor = $input.id\n      }\n    })\n  }\n\n  /**\n   * @param {HTMLElement} $item - Add another item\n   */\n  createRemoveButton($item) {\n    const $button = document.createElement('button')\n    $button.type = 'button'\n\n    $button.classList.add(\n      'govuk-button',\n      'govuk-button--secondary',\n      'moj-add-another__remove-button'\n    )\n\n    $button.textContent = 'Remove'\n\n    $item.append($button)\n  }\n\n  /**\n   * @param {HTMLElement} $item - Add another item\n   */\n  resetItem($item) {\n    $item.querySelectorAll('[data-name], [data-id]').forEach(($input) => {\n      if (!this.isValidInputElement($input)) {\n        return\n      }\n\n      if ($input instanceof HTMLSelectElement) {\n        $input.selectedIndex = -1\n        $input.value = ''\n      } else if ($input instanceof HTMLTextAreaElement) {\n        $input.value = ''\n      } else {\n        switch ($input.type) {\n          case 'checkbox':\n          case 'radio':\n            $input.checked = false\n            break\n          default:\n            $input.value = ''\n        }\n      }\n    })\n  }\n\n  /**\n   * @param {MouseEvent} event - Click event\n   */\n  onRemoveButtonClick(event) {\n    const $button = event.target\n\n    if (\n      !$button ||\n      !($button instanceof HTMLButtonElement) ||\n      !$button.classList.contains('moj-add-another__remove-button')\n    ) {\n      return\n    }\n\n    $button.closest('.moj-add-another__item').remove()\n\n    const $items = this.getItems()\n\n    if ($items.length === 1) {\n      $items[0].querySelector('.moj-add-another__remove-button').remove()\n    }\n\n    $items.forEach(($item, index) => {\n      this.updateAttributes($item, index)\n    })\n\n    this.focusHeading()\n  }\n\n  focusHeading() {\n    const $heading = this.$root.querySelector('.moj-add-another__heading')\n\n    if ($heading && $heading instanceof HTMLElement) {\n      $heading.focus()\n    }\n  }\n\n  /**\n   * @param {Element} $input - the input to validate\n   */\n  isValidInputElement($input) {\n    return (\n      $input instanceof HTMLInputElement ||\n      $input instanceof HTMLSelectElement ||\n      $input instanceof HTMLTextAreaElement\n    )\n  }\n\n  /**\n   * Name for the component used when initialising using data-module attributes.\n   */\n  static moduleName = 'moj-add-another'\n}\n","/**\n * GOV.UK Frontend helpers\n *\n * @todo Import from GOV.UK Frontend\n */\n\n/**\n * Move focus to element\n *\n * Sets tabindex to -1 to make the element programmatically focusable,\n * but removes it on blur as the element doesn't need to be focused again.\n *\n * @template {HTMLElement} FocusElement\n * @param {FocusElement} $element - HTML element\n * @param {object} [options] - Handler options\n * @param {function(this: FocusElement): void} [options.onBeforeFocus] - Callback before focus\n * @param {function(this: FocusElement): void} [options.onBlur] - Callback on blur\n */\nexport function setFocus($element, options = {}) {\n  const isFocusable = $element.getAttribute('tabindex')\n\n  if (!isFocusable) {\n    $element.setAttribute('tabindex', '-1')\n  }\n\n  /**\n   * Handle element focus\n   */\n  function onFocus() {\n    $element.addEventListener('blur', onBlur, { once: true })\n  }\n\n  /**\n   * Handle element blur\n   */\n  function onBlur() {\n    options.onBlur?.call($element)\n\n    if (!isFocusable) {\n      $element.removeAttribute('tabindex')\n    }\n  }\n\n  // Add listener to reset element on blur, after focus\n  $element.addEventListener('focus', onFocus, { once: true })\n\n  // Focus element\n  options.onBeforeFocus?.call($element)\n  $element.focus()\n}\n","/**\n * @param {Element} $element - Element to remove attribute value from\n * @param {string} attr - Attribute name\n * @param {string} value - Attribute value\n */\nexport function removeAttributeValue($element, attr, value) {\n  let re, m\n  if ($element.getAttribute(attr)) {\n    if ($element.getAttribute(attr) === value) {\n      $element.removeAttribute(attr)\n    } else {\n      re = new RegExp(`(^|\\\\s)${value}(\\\\s|$)`)\n      m = $element.getAttribute(attr).match(re)\n      if (m && m.length === 3) {\n        $element.setAttribute(\n          attr,\n          $element.getAttribute(attr).replace(re, m[1] && m[2] ? ' ' : '')\n        )\n      }\n    }\n  }\n}\n\n/**\n * @param {Element} $element - Element to add attribute value to\n * @param {string} attr - Attribute name\n * @param {string} value - Attribute value\n */\nexport function addAttributeValue($element, attr, value) {\n  let re\n  if (!$element.getAttribute(attr)) {\n    $element.setAttribute(attr, value)\n  } else {\n    re = new RegExp(`(^|\\\\s)${value}(\\\\s|$)`)\n    if (!re.test($element.getAttribute(attr))) {\n      $element.setAttribute(attr, `${$element.getAttribute(attr)} ${value}`)\n    }\n  }\n}\n\n/**\n * Find an elements next sibling\n *\n * Utility function to find an elements next sibling matching the provided\n * selector.\n *\n * @param {Element | null} $element - Element to find siblings for\n * @param {string} [selector] - selector for required sibling\n */\nexport function getNextSibling($element, selector) {\n  if (!$element || !($element instanceof HTMLElement)) {\n    return\n  }\n\n  // Get the next sibling element\n  let $sibling = $element.nextElementSibling\n\n  // If there's no selector, return the first sibling\n  if (!selector) return $sibling\n\n  // If the sibling matches our selector, use it\n  // If not, jump to the next sibling and continue the loop\n  while ($sibling) {\n    if ($sibling.matches(selector)) return $sibling\n    $sibling = $sibling.nextElementSibling\n  }\n}\n\n/**\n * Find an elements preceding sibling\n *\n * Utility function to find an elements previous sibling matching the provided\n * selector.\n *\n * @param {Element | null} $element - Element to find siblings for\n * @param {string} [selector] - selector for required sibling\n */\nexport function getPreviousSibling($element, selector) {\n  if (!$element || !($element instanceof HTMLElement)) {\n    return\n  }\n\n  // Get the previous sibling element\n  let $sibling = $element.previousElementSibling\n\n  // If there's no selector, return the first sibling\n  if (!selector) return $sibling\n\n  // If the sibling matches our selector, use it\n  // If not, jump to the next sibling and continue the loop\n  while ($sibling) {\n    if ($sibling.matches(selector)) return $sibling\n    $sibling = $sibling.previousElementSibling\n  }\n}\n\n/**\n * @param {Element | null} $element\n * @param {string} [selector]\n */\nexport function findNearestMatchingElement($element, selector) {\n  // If no element or selector is provided, return\n  if (!$element || !($element instanceof HTMLElement) || !selector) {\n    return\n  }\n\n  // Start with the current element\n  let $currentElement = $element\n\n  while ($currentElement) {\n    // First check the current element\n    if ($currentElement.matches(selector)) {\n      return $currentElement\n    }\n\n    // Check all previous siblings\n    let $sibling = $currentElement.previousElementSibling\n    while ($sibling) {\n      // Check if the sibling itself is a heading\n      if ($sibling.matches(selector)) {\n        return $sibling\n      }\n      $sibling = $sibling.previousElementSibling\n    }\n\n    // If no match found in siblings, move up to parent\n    $currentElement = $currentElement.parentElement\n  }\n}\n","import { ConfigurableComponent } from 'govuk-frontend'\n\nimport { setFocus } from '../../common/index.mjs'\nimport {\n  findNearestMatchingElement,\n  getPreviousSibling\n} from '../../helpers.mjs'\n\n/**\n * @augments {ConfigurableComponent<AlertConfig>}\n */\nexport class Alert extends ConfigurableComponent {\n  /**\n   * @param {Element | null} $root - HTML element to use for alert\n   * @param {AlertConfig} [config] - Alert config\n   */\n  constructor($root, config = {}) {\n    super($root, config)\n\n    /**\n     * Focus the alert\n     *\n     * If `role=\"alert\"` is set, focus the element to help some assistive\n     * technologies prioritise announcing it.\n     *\n     * You can turn off the auto-focus functionality by setting\n     * `data-disable-auto-focus=\"true\"` in the component HTML. You might wish to\n     * do this based on user research findings, or to avoid a clash with another\n     * element which should be focused when the page loads.\n     */\n    if (\n      this.$root.getAttribute('role') === 'alert' &&\n      !this.config.disableAutoFocus\n    ) {\n      setFocus(this.$root)\n    }\n\n    this.$dismissButton = this.$root.querySelector('.moj-alert__dismiss')\n\n    if (this.config.dismissible && this.$dismissButton) {\n      this.$dismissButton.innerHTML = this.config.dismissText\n      this.$dismissButton.removeAttribute('hidden')\n\n      this.$root.addEventListener('click', (event) => {\n        if (\n          event.target instanceof Node &&\n          this.$dismissButton.contains(event.target)\n        ) {\n          this.dimiss()\n        }\n      })\n    }\n  }\n\n  /**\n   * Handle dismissing the alert\n   */\n  dimiss() {\n    let $elementToRecieveFocus\n\n    // If a selector has been provided, attempt to find that element\n    if (this.config.focusOnDismissSelector) {\n      $elementToRecieveFocus = document.querySelector(\n        this.config.focusOnDismissSelector\n      )\n    }\n\n    // Is the next sibling another alert\n    if (!$elementToRecieveFocus) {\n      const $nextSibling = this.$root.nextElementSibling\n      if ($nextSibling && $nextSibling.matches('.moj-alert')) {\n        $elementToRecieveFocus = $nextSibling\n      }\n    }\n\n    // Else try to find any preceding sibling alert or heading\n    if (!$elementToRecieveFocus) {\n      $elementToRecieveFocus = getPreviousSibling(\n        this.$root,\n        '.moj-alert, h1, h2, h3, h4, h5, h6'\n      )\n    }\n\n    // Else find the closest ancestor heading, or fallback to main, or last resort\n    // use the body element\n    if (!$elementToRecieveFocus) {\n      $elementToRecieveFocus = findNearestMatchingElement(\n        this.$root,\n        'h1, h2, h3, h4, h5, h6, main, body'\n      )\n    }\n\n    // If we have an element, place focus on it\n    if ($elementToRecieveFocus instanceof HTMLElement) {\n      setFocus($elementToRecieveFocus)\n    }\n\n    // Remove the alert\n    this.$root.remove()\n  }\n\n  /**\n   * Name for the component used when initialising using data-module attributes.\n   */\n  static moduleName = 'moj-alert'\n\n  /**\n   * Alert default config\n   *\n   * @type {AlertConfig}\n   */\n  static defaults = Object.freeze({\n    dismissible: false,\n    dismissText: 'Dismiss',\n    disableAutoFocus: false\n  })\n\n  /**\n   * Alert config schema\n   *\n   * @satisfies {Schema<AlertConfig>}\n   */\n  static schema = Object.freeze(\n    /** @type {const} */ ({\n      properties: {\n        dismissible: { type: 'boolean' },\n        dismissText: { type: 'string' },\n        disableAutoFocus: { type: 'boolean' },\n        focusOnDismissSelector: { type: 'string' }\n      }\n    })\n  )\n}\n\n/**\n * @typedef {object} AlertConfig\n * @property {boolean} [dismissible=false] - Can the alert be dismissed by the user\n * @property {string} [dismissText=Dismiss] - the label text for the dismiss button\n * @property {boolean} [disableAutoFocus=false] - whether the alert will be autofocused\n * @property {string} [focusOnDismissSelector] - CSS Selector for element to be focused on dismiss\n */\n\n/**\n * @import { Schema } from 'govuk-frontend/dist/govuk/common/configuration.mjs'\n */\n","import { ConfigurableComponent } from 'govuk-frontend'\n\n/**\n * @augments {ConfigurableComponent<ButtonMenuConfig>}\n */\nexport class ButtonMenu extends ConfigurableComponent {\n  /**\n   * @param {Element | null} $root - HTML element to use for button menu\n   * @param {ButtonMenuConfig} [config] - Button menu config\n   */\n  constructor($root, config = {}) {\n    super($root, config)\n\n    // If only one button is provided, don't initiate a menu and toggle button\n    // if classes have been provided for the toggleButton, apply them to the single item\n    if (this.$root.children.length === 1) {\n      const $button = this.$root.children[0]\n\n      $button.classList.forEach((className) => {\n        if (className.startsWith('govuk-button-')) {\n          $button.classList.remove(className)\n        }\n\n        $button.classList.remove('moj-button-menu__item')\n        $button.classList.add('moj-button-menu__single-button')\n      })\n\n      if (this.config.buttonClasses) {\n        $button.classList.add(...this.config.buttonClasses.split(' '))\n      }\n    }\n    // Otherwise initialise a button menu\n    if (this.$root.children.length > 1) {\n      this.initMenu()\n    }\n  }\n\n  initMenu() {\n    this.$menu = this.createMenu()\n    this.$root.insertAdjacentHTML('afterbegin', this.toggleTemplate())\n    this.setupMenuItems()\n\n    this.$menuToggle = this.$root.querySelector(':scope > button')\n    this.$items = this.$menu.querySelectorAll('a, button')\n\n    this.$menuToggle.addEventListener('click', (event) => {\n      this.toggleMenu(event)\n    })\n\n    this.$root.addEventListener('keydown', (event) => {\n      this.handleKeyDown(event)\n    })\n\n    document.addEventListener('click', (event) => {\n      if (event.target instanceof Node && !this.$root.contains(event.target)) {\n        this.closeMenu(false)\n      }\n    })\n  }\n\n  createMenu() {\n    const $menu = document.createElement('ul')\n\n    $menu.setAttribute('role', 'list')\n    $menu.hidden = true\n    $menu.classList.add('moj-button-menu__wrapper')\n\n    if (this.config.alignMenu === 'right') {\n      $menu.classList.add('moj-button-menu__wrapper--right')\n    }\n\n    this.$root.appendChild($menu)\n\n    while (this.$root.firstChild !== $menu) {\n      $menu.appendChild(this.$root.firstChild)\n    }\n\n    return $menu\n  }\n\n  setupMenuItems() {\n    Array.from(this.$menu.children).forEach(($menuItem) => {\n      // wrap item in li tag\n      const $listItem = document.createElement('li')\n      this.$menu.insertBefore($listItem, $menuItem)\n      $listItem.appendChild($menuItem)\n\n      $menuItem.setAttribute('tabindex', '-1')\n\n      if ($menuItem.tagName === 'BUTTON') {\n        $menuItem.setAttribute('type', 'button')\n      }\n\n      $menuItem.classList.forEach((className) => {\n        if (className.startsWith('govuk-button')) {\n          $menuItem.classList.remove(className)\n        }\n      })\n\n      // add a slight delay after click before closing the menu, makes it *feel* better\n      $menuItem.addEventListener('click', () => {\n        setTimeout(() => {\n          this.closeMenu(false)\n        }, 50)\n      })\n    })\n  }\n\n  toggleTemplate() {\n    return `\n    <button type=\"button\" class=\"govuk-button moj-button-menu__toggle-button ${this.config.buttonClasses || ''}\" aria-haspopup=\"true\" aria-expanded=\"false\">\n      <span>\n       ${this.config.buttonText}\n       <svg width=\"11\" height=\"5\" viewBox=\"0 0 11 5\"  xmlns=\"http://www.w3.org/2000/svg\">\n         <path d=\"M5.5 0L11 5L0 5L5.5 0Z\" fill=\"currentColor\"/>\n       </svg>\n      </span>\n    </button>`\n  }\n\n  /**\n   * @returns {boolean}\n   */\n  isOpen() {\n    return this.$menuToggle.getAttribute('aria-expanded') === 'true'\n  }\n\n  /**\n   * @param {MouseEvent} event - Click event\n   */\n  toggleMenu(event) {\n    event.preventDefault()\n\n    // If menu is triggered with mouse don't move focus to first item\n    const keyboardEvent = event.detail === 0\n    const focusIndex = keyboardEvent ? 0 : -1\n\n    if (this.isOpen()) {\n      this.closeMenu()\n    } else {\n      this.openMenu(focusIndex)\n    }\n  }\n\n  /**\n   * Opens the menu and optionally sets the focus to the item with given index\n   *\n   * @param {number} focusIndex - The index of the item to focus\n   */\n  openMenu(focusIndex = 0) {\n    this.$menu.hidden = false\n    this.$menuToggle.setAttribute('aria-expanded', 'true')\n    if (focusIndex !== -1) {\n      this.focusItem(focusIndex)\n    }\n  }\n\n  /**\n   * Closes the menu and optionally returns focus back to menuToggle\n   *\n   * @param {boolean} moveFocus - whether to return focus to the toggle button\n   */\n  closeMenu(moveFocus = true) {\n    this.$menu.hidden = true\n    this.$menuToggle.setAttribute('aria-expanded', 'false')\n    if (moveFocus) {\n      this.$menuToggle.focus()\n    }\n  }\n\n  /**\n   * Focuses the menu item at the specified index\n   *\n   * @param {number} index - the index of the item to focus\n   */\n  focusItem(index) {\n    if (index >= this.$items.length) index = 0\n    if (index < 0) index = this.$items.length - 1\n\n    const $menuItem = this.$items.item(index)\n    if ($menuItem) {\n      $menuItem.focus()\n    }\n  }\n\n  currentFocusIndex() {\n    const $activeElement = document.activeElement\n    const $menuItems = Array.from(this.$items)\n\n    return (\n      ($activeElement instanceof HTMLAnchorElement ||\n        $activeElement instanceof HTMLButtonElement) &&\n      $menuItems.indexOf($activeElement)\n    )\n  }\n\n  /**\n   * @param {KeyboardEvent} event - Keydown event\n   */\n  handleKeyDown(event) {\n    if (event.target === this.$menuToggle) {\n      switch (event.key) {\n        case 'ArrowDown':\n          event.preventDefault()\n          this.openMenu()\n          break\n        case 'ArrowUp':\n          event.preventDefault()\n          this.openMenu(this.$items.length - 1)\n          break\n      }\n    }\n\n    if (\n      event.target instanceof Node &&\n      this.$menu.contains(event.target) &&\n      this.isOpen()\n    ) {\n      switch (event.key) {\n        case 'ArrowDown':\n          event.preventDefault()\n          if (this.currentFocusIndex() !== -1) {\n            this.focusItem(this.currentFocusIndex() + 1)\n          }\n          break\n        case 'ArrowUp':\n          event.preventDefault()\n          if (this.currentFocusIndex() !== -1) {\n            this.focusItem(this.currentFocusIndex() - 1)\n          }\n          break\n        case 'Home':\n          event.preventDefault()\n          this.focusItem(0)\n          break\n        case 'End':\n          event.preventDefault()\n          this.focusItem(this.$items.length - 1)\n          break\n      }\n    }\n\n    if (event.key === 'Escape' && this.isOpen()) {\n      this.closeMenu()\n    }\n    if (event.key === 'Tab' && this.isOpen()) {\n      this.closeMenu(false)\n    }\n  }\n\n  /**\n   * Name for the component used when initialising using data-module attributes.\n   */\n  static moduleName = 'moj-button-menu'\n\n  /**\n   * Button menu config\n   *\n   * @type {ButtonMenuConfig}\n   */\n  static defaults = Object.freeze({\n    buttonText: 'Actions',\n    alignMenu: 'left',\n    buttonClasses: ''\n  })\n\n  /**\n   * Button menu config schema\n   *\n   * @type {Schema<ButtonMenuConfig>}\n   */\n  static schema = Object.freeze(\n    /** @type {const} */ ({\n      properties: {\n        buttonText: { type: 'string' },\n        buttonClasses: { type: 'string' },\n        alignMenu: { type: 'string' }\n      }\n    })\n  )\n}\n\n/**\n * @typedef {object} ButtonMenuConfig\n * @property {string} [buttonText='Actions'] - Label for the toggle button\n * @property {\"left\" | \"right\"} [alignMenu='left'] - the alignment of the menu\n * @property {string} [buttonClasses='govuk-button--secondary'] - css classes applied to the toggle button\n */\n\n/**\n * @import { Schema } from 'govuk-frontend/dist/govuk/common/configuration.mjs'\n */\n","import { ConfigurableComponent } from 'govuk-frontend'\n\n/**\n * @augments {ConfigurableComponent<DatePickerConfig>}\n */\nexport class DatePicker extends ConfigurableComponent {\n  /**\n   * @param {Element | null} $root - HTML element to use for date picker\n   * @param {DatePickerConfig} [config] - Date picker config\n   */\n  constructor($root, config = {}) {\n    super($root, config)\n\n    const $input =\n      this.config.input.element ??\n      this.$root.querySelector(this.config.input.selector)\n\n    if (!$input || !($input instanceof HTMLInputElement)) {\n      return this\n    }\n\n    this.$input = $input\n\n    this.dayLabels = [\n      'Monday',\n      'Tuesday',\n      'Wednesday',\n      'Thursday',\n      'Friday',\n      'Saturday',\n      'Sunday'\n    ]\n\n    this.monthLabels = [\n      'January',\n      'February',\n      'March',\n      'April',\n      'May',\n      'June',\n      'July',\n      'August',\n      'September',\n      'October',\n      'November',\n      'December'\n    ]\n\n    this.currentDate = new Date()\n    this.currentDate.setHours(0, 0, 0, 0)\n    this.calendarDays = /** @type {DSCalendarDay[]} */ ([])\n    this.excludedDates = /** @type {Date[]} */ ([])\n    this.excludedDays = /** @type {number[]} */ ([])\n\n    this.buttonClass = 'moj-datepicker__button'\n    this.selectedDayButtonClass = 'moj-datepicker__button--selected'\n    this.currentDayButtonClass = 'moj-datepicker__button--current'\n    this.todayButtonClass = 'moj-datepicker__button--today'\n\n    this.setOptions()\n    this.initControls()\n  }\n\n  initControls() {\n    this.id = `datepicker-${this.$input.id}`\n\n    this.$dialog = this.createDialog()\n    this.createCalendarHeaders()\n\n    const $componentWrapper = document.createElement('div')\n    const $inputWrapper = document.createElement('div')\n    $componentWrapper.classList.add('moj-datepicker__wrapper')\n    $inputWrapper.classList.add('govuk-input__wrapper')\n\n    this.$input.parentElement.insertBefore($componentWrapper, this.$input)\n    $componentWrapper.appendChild($inputWrapper)\n    $inputWrapper.appendChild(this.$input)\n\n    $inputWrapper.insertAdjacentHTML('beforeend', this.toggleTemplate())\n    $componentWrapper.insertAdjacentElement('beforeend', this.$dialog)\n\n    this.$calendarButton = /** @type {HTMLButtonElement} */ (\n      this.$root.querySelector('.moj-js-datepicker-toggle')\n    )\n\n    this.$dialogTitle = /** @type {HTMLHeadingElement} */ (\n      this.$dialog.querySelector('.moj-js-datepicker-month-year')\n    )\n\n    this.createCalendar()\n\n    this.$prevMonthButton = /** @type {HTMLButtonElement} */ (\n      this.$dialog.querySelector('.moj-js-datepicker-prev-month')\n    )\n\n    this.$prevYearButton = /** @type {HTMLButtonElement} */ (\n      this.$dialog.querySelector('.moj-js-datepicker-prev-year')\n    )\n\n    this.$nextMonthButton = /** @type {HTMLButtonElement} */ (\n      this.$dialog.querySelector('.moj-js-datepicker-next-month')\n    )\n\n    this.$nextYearButton = /** @type {HTMLButtonElement} */ (\n      this.$dialog.querySelector('.moj-js-datepicker-next-year')\n    )\n\n    this.$cancelButton = /** @type {HTMLButtonElement} */ (\n      this.$dialog.querySelector('.moj-js-datepicker-cancel')\n    )\n\n    this.$okButton = /** @type {HTMLButtonElement} */ (\n      this.$dialog.querySelector('.moj-js-datepicker-ok')\n    )\n\n    // add event listeners\n    this.$prevMonthButton.addEventListener('click', (event) =>\n      this.focusPreviousMonth(event, false)\n    )\n    this.$prevYearButton.addEventListener('click', (event) =>\n      this.focusPreviousYear(event, false)\n    )\n    this.$nextMonthButton.addEventListener('click', (event) =>\n      this.focusNextMonth(event, false)\n    )\n    this.$nextYearButton.addEventListener('click', (event) =>\n      this.focusNextYear(event, false)\n    )\n    this.$cancelButton.addEventListener('click', (event) => {\n      event.preventDefault()\n      this.closeDialog()\n    })\n    this.$okButton.addEventListener('click', () => {\n      this.selectDate(this.currentDate)\n    })\n\n    const $dialogButtons = this.$dialog.querySelectorAll(\n      'button:not([disabled=\"true\"])'\n    )\n\n    this.$firstButtonInDialog = $dialogButtons[0]\n    this.$lastButtonInDialog = $dialogButtons[$dialogButtons.length - 1]\n    this.$firstButtonInDialog.addEventListener('keydown', (event) =>\n      this.firstButtonKeydown(event)\n    )\n    this.$lastButtonInDialog.addEventListener('keydown', (event) =>\n      this.lastButtonKeydown(event)\n    )\n\n    this.$calendarButton.addEventListener('click', (event) =>\n      this.toggleDialog(event)\n    )\n\n    this.$dialog.addEventListener('keydown', (event) => {\n      if (event.key === 'Escape') {\n        this.closeDialog()\n        event.preventDefault()\n        event.stopPropagation()\n      }\n    })\n\n    document.body.addEventListener('mouseup', (event) => {\n      this.backgroundClick(event)\n    })\n\n    // populates calendar with initial dates, avoids Wave errors about null buttons\n    this.updateCalendar()\n  }\n\n  createDialog() {\n    const titleId = `datepicker-title-${this.$input.id}`\n    const $dialog = document.createElement('div')\n\n    $dialog.id = this.id\n    $dialog.setAttribute('class', 'moj-datepicker__dialog')\n    $dialog.setAttribute('role', 'dialog')\n    $dialog.setAttribute('aria-modal', 'true')\n    $dialog.setAttribute('aria-labelledby', titleId)\n    $dialog.innerHTML = this.dialogTemplate(titleId)\n    $dialog.hidden = true\n\n    return $dialog\n  }\n\n  createCalendar() {\n    const $tbody = this.$dialog.querySelector('tbody')\n    let dayCount = 0\n    for (let i = 0; i < 6; i++) {\n      // create row\n      const $row = $tbody.insertRow(i)\n\n      for (let j = 0; j < 7; j++) {\n        // create cell (day)\n        const $cell = document.createElement('td')\n        $row.appendChild($cell)\n        const $dateButton = document.createElement('button')\n        $dateButton.setAttribute('type', 'button')\n        $cell.appendChild($dateButton)\n\n        const calendarDay = new DSCalendarDay($dateButton, dayCount, i, j, this)\n        this.calendarDays.push(calendarDay)\n        dayCount++\n      }\n    }\n  }\n\n  toggleTemplate() {\n    return `<button class=\"moj-datepicker__toggle moj-js-datepicker-toggle\" type=\"button\" aria-haspopup=\"dialog\" aria-controls=\"${this.id}\" aria-expanded=\"false\">\n            <span class=\"govuk-visually-hidden\">Choose date</span>\n            <svg width=\"32\" height=\"24\" focusable=\"false\" class=\"moj-datepicker-icon\" aria-hidden=\"true\" role=\"img\" viewBox=\"0 0 22 22\">\n              <path\n                fill=\"currentColor\"\n                fill-rule=\"evenodd\"\n                clip-rule=\"evenodd\"\n                d=\"M16.1333 2.93333H5.86668V4.4C5.86668 5.21002 5.21003 5.86667 4.40002 5.86667C3.59 5.86667 2.93335 5.21002 2.93335 4.4V2.93333H2C0.895431 2.93333 0 3.82877 0 4.93334V19.2667C0 20.3712 0.89543 21.2667 2 21.2667H20C21.1046 21.2667 22 20.3712 22 19.2667V4.93333C22 3.82876 21.1046 2.93333 20 2.93333H19.0667V4.4C19.0667 5.21002 18.41 5.86667 17.6 5.86667C16.79 5.86667 16.1333 5.21002 16.1333 4.4V2.93333ZM20.5333 8.06667H1.46665V18.8C1.46665 19.3523 1.91436 19.8 2.46665 19.8H19.5333C20.0856 19.8 20.5333 19.3523 20.5333 18.8V8.06667Z\"\n              ></path>\n              <rect x=\"3.66669\" width=\"1.46667\" height=\"5.13333\" rx=\"0.733333\" fill=\"currentColor\"></rect>\n              <rect x=\"16.8667\" width=\"1.46667\" height=\"5.13333\" rx=\"0.733333\" fill=\"currentColor\"></rect>\n            </svg>\n          </button>`\n  }\n\n  /**\n   * HTML template for calendar dialog\n   *\n   * @param {string} [titleId] - Id attribute for dialog title\n   * @returns {string}\n   */\n  dialogTemplate(titleId) {\n    return `<div class=\"moj-datepicker__dialog-header\">\n            <div class=\"moj-datepicker__dialog-navbuttons\">\n              <button type=\"button\" class=\"moj-datepicker__button moj-js-datepicker-prev-year\">\n                <span class=\"govuk-visually-hidden\">Previous year</span>\n                <svg width=\"44\" height=\"40\" viewBox=\"0 0 44 40\" fill=\"none\" fill=\"none\" focusable=\"false\" aria-hidden=\"true\" role=\"img\">\n                  <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M23.1643 20L28.9572 14.2071L27.5429 12.7929L20.3358 20L27.5429 27.2071L28.9572 25.7929L23.1643 20Z\" fill=\"currentColor\"/>\n                  <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M17.1643 20L22.9572 14.2071L21.5429 12.7929L14.3358 20L21.5429 27.2071L22.9572 25.7929L17.1643 20Z\" fill=\"currentColor\"/>\n                </svg>\n              </button>\n\n              <button type=\"button\" class=\"moj-datepicker__button moj-js-datepicker-prev-month\">\n                <span class=\"govuk-visually-hidden\">Previous month</span>\n                <svg width=\"44\" height=\"40\" viewBox=\"0 0 44 40\" fill=\"none\" focusable=\"false\" aria-hidden=\"true\" role=\"img\">\n                  <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M20.5729 20L25.7865 14.2071L24.5137 12.7929L18.0273 20L24.5137 27.2071L25.7865 25.7929L20.5729 20Z\" fill=\"currentColor\"/>\n                </svg>\n              </button>\n            </div>\n\n            <h2 id=\"${titleId}\" class=\"moj-datepicker__dialog-title moj-js-datepicker-month-year\" aria-live=\"polite\">June 2020</h2>\n\n            <div class=\"moj-datepicker__dialog-navbuttons\">\n              <button type=\"button\" class=\"moj-datepicker__button moj-js-datepicker-next-month\">\n                <span class=\"govuk-visually-hidden\">Next month</span>\n                <svg width=\"44\" height=\"40\" viewBox=\"0 0 44 40\" fill=\"none\"  focusable=\"false\" aria-hidden=\"true\" role=\"img\">\n                  <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M23.4271 20L18.2135 14.2071L19.4863 12.7929L25.9727 20L19.4863 27.2071L18.2135 25.7929L23.4271 20Z\" fill=\"currentColor\"/>\n                </svg>\n              </button>\n\n              <button type=\"button\" class=\"moj-datepicker__button moj-js-datepicker-next-year\">\n                <span class=\"govuk-visually-hidden\">Next year</span>\n                <svg width=\"44\" height=\"40\" viewBox=\"0 0 44 40\" fill=\"none\" fill=\"none\" focusable=\"false\" aria-hidden=\"true\" role=\"img\">\n                  <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M20.8357 20L15.0428 14.2071L16.4571 12.7929L23.6642 20L16.4571 27.2071L15.0428 25.7929L20.8357 20Z\" fill=\"currentColor\"/>\n                  <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M26.8357 20L21.0428 14.2071L22.4571 12.7929L29.6642 20L22.4571 27.2071L21.0428 25.7929L26.8357 20Z\" fill=\"currentColor\"/>\n                </svg>\n              </button>\n            </div>\n          </div>\n\n          <table class=\"moj-datepicker__calendar moj-js-datepicker-grid\" role=\"grid\" aria-labelledby=\"${titleId}\">\n            <thead>\n              <tr></tr>\n            </thead>\n\n            <tbody></tbody>\n          </table>\n\n          <div class=\"govuk-button-group\">\n            <button type=\"button\" class=\"govuk-button moj-js-datepicker-ok\">Select</button>\n            <button type=\"button\" class=\"govuk-button govuk-button--secondary moj-js-datepicker-cancel\">Close</button>\n          </div>`\n  }\n\n  createCalendarHeaders() {\n    this.dayLabels.forEach((day) => {\n      const html = `<th scope=\"col\"><span aria-hidden=\"true\">${day.substring(0, 3)}</span><span class=\"govuk-visually-hidden\">${day}</span></th>`\n      const $headerRow = this.$dialog.querySelector('thead > tr')\n      $headerRow.insertAdjacentHTML('beforeend', html)\n    })\n  }\n\n  /**\n   * Pads given number with leading zeros\n   *\n   * @param {number} value - The value to be padded\n   * @param {number} length - The length in characters of the output\n   * @returns {string}\n   */\n  leadingZeros(value, length = 2) {\n    let ret = value.toString()\n\n    while (ret.length < length) {\n      ret = `0${ret}`\n    }\n\n    return ret\n  }\n\n  setOptions() {\n    this.setMinAndMaxDatesOnCalendar()\n    this.setExcludedDates()\n    this.setExcludedDays()\n    this.setWeekStartDay()\n  }\n\n  setMinAndMaxDatesOnCalendar() {\n    if (this.config.minDate) {\n      this.minDate = this.formattedDateFromString(this.config.minDate, null)\n      if (this.minDate && this.currentDate < this.minDate) {\n        this.currentDate = this.minDate\n      }\n    }\n\n    if (this.config.maxDate) {\n      this.maxDate = this.formattedDateFromString(this.config.maxDate, null)\n      if (this.maxDate && this.currentDate > this.maxDate) {\n        this.currentDate = this.maxDate\n      }\n    }\n  }\n\n  setExcludedDates() {\n    if (this.config.excludedDates) {\n      this.excludedDates = this.config.excludedDates\n        .replace(/\\s+/, ' ')\n        .split(' ')\n        .map((item) => {\n          return item.includes('-')\n            ? this.parseDateRangeString(item)\n            : [this.formattedDateFromString(item)]\n        })\n        .reduce((dates, items) => dates.concat(items))\n        .filter((date) => date)\n    }\n  }\n\n  /**\n   * Parses a daterange string into an array of dates\n   *\n   * @param {string} datestring - A daterange string in the format \"dd/mm/yyyy-dd/mm/yyyy\"\n   */\n  parseDateRangeString(datestring) {\n    const dates = []\n    const [startDate, endDate] = datestring\n      .split('-')\n      .map((d) => this.formattedDateFromString(d, null))\n\n    if (startDate && endDate) {\n      const date = new Date(startDate.getTime())\n      /* eslint-disable no-unmodified-loop-condition */\n      while (date <= endDate) {\n        dates.push(new Date(date))\n        date.setDate(date.getDate() + 1)\n      }\n      /* eslint-enable no-unmodified-loop-condition */\n    }\n    return dates\n  }\n\n  setExcludedDays() {\n    if (this.config.excludedDays) {\n      // lowercase and arrange dayLabels to put indexOf sunday == 0 for comparison\n      // with getDay() function\n      const weekDays = this.dayLabels.map((item) => item.toLowerCase())\n      if (this.config.weekStartDay === 'monday') {\n        weekDays.unshift(weekDays.pop())\n      }\n\n      this.excludedDays = this.config.excludedDays\n        .replace(/\\s+/, ' ')\n        .toLowerCase()\n        .split(' ')\n        .map((item) => weekDays.indexOf(item))\n        .filter((item) => item !== -1)\n    }\n  }\n\n  setWeekStartDay() {\n    const weekStartDayParam = this.config.weekStartDay\n    if (weekStartDayParam && weekStartDayParam.toLowerCase() === 'sunday') {\n      this.config.weekStartDay = 'sunday'\n      // Rotate dayLabels array to put Sunday as the first item\n      this.dayLabels.unshift(this.dayLabels.pop())\n    } else {\n      this.config.weekStartDay = 'monday'\n    }\n  }\n\n  /**\n   * Determine if a date is selectable\n   *\n   * @param {Date} date - the date to check\n   * @returns {boolean}\n   */\n  isExcludedDate(date) {\n    // This comparison does not work correctly - it will exclude the mindate itself\n    // see: https://github.com/ministryofjustice/moj-frontend/issues/923\n    if (this.minDate && this.minDate > date) {\n      return true\n    }\n\n    // This comparison works as expected - the maxdate will not be excluded\n    if (this.maxDate && this.maxDate < date) {\n      return true\n    }\n\n    for (const excludedDate of this.excludedDates) {\n      if (date.toDateString() === excludedDate.toDateString()) {\n        return true\n      }\n    }\n\n    if (this.excludedDays.includes(date.getDay())) {\n      return true\n    }\n\n    return false\n  }\n\n  /**\n   * Get a Date object from a string\n   *\n   * @param {string} dateString - string in the format d/m/yyyy dd/mm/yyyy\n   * @param {Date} fallback - date object to return if formatting fails\n   * @returns {Date}\n   */\n  formattedDateFromString(dateString, fallback = new Date()) {\n    let formattedDate = null\n    // Accepts d/m/yyyy and dd/mm/yyyy\n    const dateFormatPattern = /(\\d{1,2})([-/,. ])(\\d{1,2})\\2(\\d{4})/\n\n    if (!dateFormatPattern.test(dateString)) return fallback\n\n    const match = dateFormatPattern.exec(dateString)\n    const day = match[1]\n    const month = match[3]\n    const year = match[4]\n\n    formattedDate = new Date(`${year}-${month}-${day}`)\n    if (\n      formattedDate instanceof Date &&\n      Number.isFinite(formattedDate.getTime())\n    ) {\n      return formattedDate\n    }\n    return fallback\n  }\n\n  /**\n   * Get a formatted date string from a Date object\n   *\n   * @param {Date} date - date to format to a string\n   * @returns {string}\n   */\n  formattedDateFromDate(date) {\n    if (this.config.leadingZeros) {\n      return `${this.leadingZeros(date.getDate())}/${this.leadingZeros(date.getMonth() + 1)}/${date.getFullYear()}`\n    }\n\n    return `${date.getDate()}/${date.getMonth() + 1}/${date.getFullYear()}`\n  }\n\n  /**\n   * Get a human readable date in the format Monday 2 March 2024\n   *\n   * @param {Date} date - Date to format\n   * @returns {string}\n   */\n  formattedDateHuman(date) {\n    return `${this.dayLabels[(date.getDay() + 6) % 7]} ${date.getDate()} ${this.monthLabels[date.getMonth()]} ${date.getFullYear()}`\n  }\n\n  /**\n   * @param {MouseEvent} event - Click event\n   */\n  backgroundClick(event) {\n    if (\n      this.isOpen() &&\n      event.target instanceof Node &&\n      !this.$dialog.contains(event.target) &&\n      !this.$input.contains(event.target) &&\n      !this.$calendarButton.contains(event.target)\n    ) {\n      event.preventDefault()\n      this.closeDialog()\n    }\n  }\n\n  /**\n   * @param {KeyboardEvent} event - Keydown event\n   */\n  firstButtonKeydown(event) {\n    if (event.key === 'Tab' && event.shiftKey) {\n      this.$lastButtonInDialog.focus()\n      event.preventDefault()\n    }\n  }\n\n  /**\n   * @param {KeyboardEvent} event - Keydown event\n   */\n  lastButtonKeydown(event) {\n    if (event.key === 'Tab' && !event.shiftKey) {\n      this.$firstButtonInDialog.focus()\n      event.preventDefault()\n    }\n  }\n\n  // render calendar\n  updateCalendar() {\n    this.$dialogTitle.innerHTML = `${this.monthLabels[this.currentDate.getMonth()]} ${this.currentDate.getFullYear()}`\n\n    const day = this.currentDate\n    const firstOfMonth = new Date(day.getFullYear(), day.getMonth(), 1)\n    let dayOfWeek\n\n    if (this.config.weekStartDay === 'monday') {\n      dayOfWeek = firstOfMonth.getDay() === 0 ? 6 : firstOfMonth.getDay() - 1 // Change logic to make Monday first day of week, i.e. 0\n    } else {\n      dayOfWeek = firstOfMonth.getDay()\n    }\n\n    firstOfMonth.setDate(firstOfMonth.getDate() - dayOfWeek)\n\n    const thisDay = new Date(firstOfMonth)\n\n    // loop through our days\n    for (const calendarDay of this.calendarDays) {\n      const hidden = thisDay.getMonth() !== day.getMonth()\n      const disabled = this.isExcludedDate(thisDay)\n\n      calendarDay.update(thisDay, hidden, disabled)\n\n      thisDay.setDate(thisDay.getDate() + 1)\n    }\n  }\n\n  /**\n   * @param {boolean} [focus] - Focus the day button\n   */\n  setCurrentDate(focus = true) {\n    const { currentDate } = this\n    this.calendarDays.forEach((calendarDay) => {\n      calendarDay.$button.classList.add('moj-datepicker__button')\n      calendarDay.$button.classList.add('moj-datepicker__calendar-day')\n      calendarDay.$button.setAttribute('tabindex', '-1')\n      calendarDay.$button.classList.remove(this.selectedDayButtonClass)\n      const calendarDayDate = calendarDay.date\n      calendarDayDate.setHours(0, 0, 0, 0)\n\n      const today = new Date()\n      today.setHours(0, 0, 0, 0)\n\n      if (\n        calendarDayDate.getTime() ===\n        currentDate.getTime() /* && !calendarDay.button.disabled */\n      ) {\n        if (focus) {\n          calendarDay.$button.setAttribute('tabindex', '0')\n          calendarDay.$button.focus()\n          calendarDay.$button.classList.add(this.selectedDayButtonClass)\n        }\n      }\n\n      if (\n        this.inputDate &&\n        calendarDayDate.getTime() === this.inputDate.getTime()\n      ) {\n        calendarDay.$button.classList.add(this.currentDayButtonClass)\n        calendarDay.$button.setAttribute('aria-current', 'date')\n      } else {\n        calendarDay.$button.classList.remove(this.currentDayButtonClass)\n        calendarDay.$button.removeAttribute('aria-current')\n      }\n\n      if (calendarDayDate.getTime() === today.getTime()) {\n        calendarDay.$button.classList.add(this.todayButtonClass)\n      } else {\n        calendarDay.$button.classList.remove(this.todayButtonClass)\n      }\n    })\n\n    // if no date is tab-able, make the first non-disabled date tab-able\n    if (!focus) {\n      const enabledDays = this.calendarDays.filter((calendarDay) => {\n        return (\n          window.getComputedStyle(calendarDay.$button).display === 'block' &&\n          !calendarDay.$button.disabled\n        )\n      })\n\n      enabledDays[0].$button.setAttribute('tabindex', '0')\n\n      this.currentDate = enabledDays[0].date\n    }\n  }\n\n  /**\n   * @param {Date} date - Date to select\n   */\n  selectDate(date) {\n    if (this.isExcludedDate(date)) {\n      return\n    }\n\n    this.$calendarButton.querySelector('span').innerText =\n      `Choose date. Selected date is ${this.formattedDateHuman(date)}`\n    this.$input.value = this.formattedDateFromDate(date)\n\n    const changeEvent = new Event('change', { bubbles: true, cancelable: true })\n    this.$input.dispatchEvent(changeEvent)\n\n    this.closeDialog()\n  }\n\n  isOpen() {\n    return this.$dialog.classList.contains('moj-datepicker__dialog--open')\n  }\n\n  /**\n   * @param {MouseEvent} event - Click event\n   */\n  toggleDialog(event) {\n    event.preventDefault()\n    if (this.isOpen()) {\n      this.closeDialog()\n    } else {\n      this.setMinAndMaxDatesOnCalendar()\n      this.openDialog()\n    }\n  }\n\n  openDialog() {\n    this.$dialog.hidden = false\n    this.$dialog.classList.add('moj-datepicker__dialog--open')\n    this.$calendarButton.setAttribute('aria-expanded', 'true')\n\n    // position the dialog\n    // if input is wider than dialog pin it to the right\n    if (this.$input.offsetWidth > this.$dialog.offsetWidth) {\n      this.$dialog.style.right = `0px`\n    }\n    this.$dialog.style.top = `${this.$input.offsetHeight + 3}px`\n\n    // get the date from the input element\n    this.inputDate = this.formattedDateFromString(this.$input.value)\n    this.currentDate = this.inputDate\n    this.currentDate.setHours(0, 0, 0, 0)\n\n    this.updateCalendar()\n    this.setCurrentDate()\n  }\n\n  closeDialog() {\n    this.$dialog.hidden = true\n    this.$dialog.classList.remove('moj-datepicker__dialog--open')\n    this.$calendarButton.setAttribute('aria-expanded', 'false')\n    this.$calendarButton.focus()\n  }\n\n  /**\n   * @param {Date} date - Date to go to\n   * @param {boolean} [focus] - Focus the day button\n   */\n  goToDate(date, focus) {\n    const current = this.currentDate\n    this.currentDate = date\n\n    if (\n      current.getMonth() !== this.currentDate.getMonth() ||\n      current.getFullYear() !== this.currentDate.getFullYear()\n    ) {\n      this.updateCalendar()\n    }\n\n    this.setCurrentDate(focus)\n  }\n\n  // day navigation\n  focusNextDay() {\n    const date = new Date(this.currentDate)\n    date.setDate(date.getDate() + 1)\n    this.goToDate(date)\n  }\n\n  focusPreviousDay() {\n    const date = new Date(this.currentDate)\n    date.setDate(date.getDate() - 1)\n    this.goToDate(date)\n  }\n\n  // week navigation\n  focusNextWeek() {\n    const date = new Date(this.currentDate)\n    date.setDate(date.getDate() + 7)\n    this.goToDate(date)\n  }\n\n  focusPreviousWeek() {\n    const date = new Date(this.currentDate)\n    date.setDate(date.getDate() - 7)\n    this.goToDate(date)\n  }\n\n  focusFirstDayOfWeek() {\n    const date = new Date(this.currentDate)\n    const firstDayOfWeekIndex = this.config.weekStartDay === 'sunday' ? 0 : 1\n    const dayOfWeek = date.getDay()\n    const diff =\n      dayOfWeek >= firstDayOfWeekIndex\n        ? dayOfWeek - firstDayOfWeekIndex\n        : 6 - dayOfWeek\n\n    date.setDate(date.getDate() - diff)\n    date.setHours(0, 0, 0, 0)\n\n    this.goToDate(date)\n  }\n\n  focusLastDayOfWeek() {\n    const date = new Date(this.currentDate)\n    const lastDayOfWeekIndex = this.config.weekStartDay === 'sunday' ? 6 : 0\n    const dayOfWeek = date.getDay()\n    const diff =\n      dayOfWeek <= lastDayOfWeekIndex\n        ? lastDayOfWeekIndex - dayOfWeek\n        : 7 - dayOfWeek\n\n    date.setDate(date.getDate() + diff)\n    date.setHours(0, 0, 0, 0)\n\n    this.goToDate(date)\n  }\n\n  /**\n   * Month navigation\n   *\n   * @param {KeyboardEvent | MouseEvent} event - Key press or click event\n   * @param {boolean} [focus] - Focus the day button\n   */\n  focusNextMonth(event, focus = true) {\n    event.preventDefault()\n    const date = new Date(this.currentDate)\n    date.setMonth(date.getMonth() + 1, 1)\n    this.goToDate(date, focus)\n  }\n\n  /**\n   * @param {KeyboardEvent | MouseEvent} event - Key press or click event\n   * @param {boolean} [focus] - Focus the day button\n   */\n  focusPreviousMonth(event, focus = true) {\n    event.preventDefault()\n    const date = new Date(this.currentDate)\n    date.setMonth(date.getMonth() - 1, 1)\n    this.goToDate(date, focus)\n  }\n\n  /**\n   * Year navigation\n   *\n   * @param {KeyboardEvent | MouseEvent} event - Key press or click event\n   * @param {boolean} [focus] - Focus the day button\n   */\n  focusNextYear(event, focus = true) {\n    event.preventDefault()\n    const date = new Date(this.currentDate)\n    date.setFullYear(date.getFullYear() + 1, date.getMonth(), 1)\n    this.goToDate(date, focus)\n  }\n\n  /**\n   * @param {KeyboardEvent | MouseEvent} event - Key press or click event\n   * @param {boolean} [focus] - Focus the day button\n   */\n  focusPreviousYear(event, focus = true) {\n    event.preventDefault()\n    const date = new Date(this.currentDate)\n    date.setFullYear(date.getFullYear() - 1, date.getMonth(), 1)\n    this.goToDate(date, focus)\n  }\n\n  /**\n   * Name for the component used when initialising using data-module attributes.\n   */\n  static moduleName = 'moj-date-picker'\n\n  /**\n   * Date picker default config\n   *\n   * @type {DatePickerConfig}\n   */\n  static defaults = Object.freeze({\n    leadingZeros: false,\n    weekStartDay: 'monday',\n    input: {\n      selector: '.moj-js-datepicker-input'\n    }\n  })\n\n  /**\n   * Date picker config schema\n   *\n   * @satisfies {Schema<DatePickerConfig>}\n   */\n  static schema = Object.freeze(\n    /** @type {const} */ ({\n      properties: {\n        excludedDates: { type: 'string' },\n        excludedDays: { type: 'string' },\n        leadingZeros: { type: 'boolean' },\n        maxDate: { type: 'string' },\n        minDate: { type: 'string' },\n        weekStartDay: { type: 'string' },\n        input: { type: 'object' }\n      }\n    })\n  )\n}\n\nclass DSCalendarDay {\n  /**\n   *\n   * @param {HTMLButtonElement} $button\n   * @param {number} index\n   * @param {number} row\n   * @param {number} column\n   * @param {DatePicker} picker\n   */\n  constructor($button, index, row, column, picker) {\n    this.index = index\n    this.row = row\n    this.column = column\n    this.$button = $button\n    this.picker = picker\n    this.date = new Date()\n    this.$button.addEventListener('keydown', this.keyPress.bind(this))\n    this.$button.addEventListener('click', this.click.bind(this))\n  }\n\n  /**\n   * @param {Date} day - the Date for the calendar day\n   * @param {boolean} hidden - visibility of the day\n   * @param {boolean} disabled - is the day selectable or excluded\n   */\n  update(day, hidden, disabled) {\n    const label = day.getDate()\n    let accessibleLabel = this.picker.formattedDateHuman(day)\n\n    if (disabled) {\n      this.$button.setAttribute('aria-disabled', 'true')\n      accessibleLabel = `Excluded date, ${accessibleLabel}`\n    } else {\n      this.$button.removeAttribute('aria-disabled')\n    }\n\n    if (hidden) {\n      this.$button.style.display = 'none'\n    } else {\n      this.$button.style.display = 'block'\n    }\n    this.$button.setAttribute(\n      'data-testid',\n      this.picker.formattedDateFromDate(day)\n    )\n\n    this.$button.innerHTML = `<span class=\"govuk-visually-hidden\">${accessibleLabel}</span><span aria-hidden=\"true\">${label}</span>`\n    this.date = new Date(day)\n  }\n\n  /**\n   * @param {MouseEvent} event - Click event\n   */\n  click(event) {\n    this.picker.goToDate(this.date)\n    this.picker.selectDate(this.date)\n\n    event.stopPropagation()\n    event.preventDefault()\n  }\n\n  /**\n   * @param {KeyboardEvent} event - Keydown event\n   */\n  keyPress(event) {\n    let calendarNavKey = true\n\n    switch (event.key) {\n      case 'ArrowLeft':\n        this.picker.focusPreviousDay()\n        break\n      case 'ArrowRight':\n        this.picker.focusNextDay()\n        break\n      case 'ArrowUp':\n        this.picker.focusPreviousWeek()\n        break\n      case 'ArrowDown':\n        this.picker.focusNextWeek()\n        break\n      case 'Home':\n        this.picker.focusFirstDayOfWeek()\n        break\n      case 'End':\n        this.picker.focusLastDayOfWeek()\n        break\n      case 'PageUp': {\n        if (event.shiftKey) {\n          this.picker.focusPreviousYear(event)\n        } else {\n          this.picker.focusPreviousMonth(event)\n        }\n        break\n      }\n      case 'PageDown': {\n        if (event.shiftKey) {\n          this.picker.focusNextYear(event)\n        } else {\n          this.picker.focusNextMonth(event)\n        }\n        break\n      }\n      default:\n        calendarNavKey = false\n        break\n    }\n\n    if (calendarNavKey) {\n      event.preventDefault()\n      event.stopPropagation()\n    }\n  }\n}\n\n/**\n * Date picker config\n *\n * @typedef {object} DatePickerConfig\n * @property {string} [excludedDates] - Dates that cannot be selected\n * @property {string} [excludedDays] - Days that cannot be selected\n * @property {boolean} [leadingZeros] - Whether to add leading zeroes when populating the field\n * @property {string} [minDate] - The earliest available date\n * @property {string} [maxDate] - The latest available date\n * @property {string} [weekStartDay] - First day of the week in calendar view\n * @property {object} [input] - Input config\n * @property {string} [input.selector] - Selector for the input element\n * @property {Element | null} [input.element] - HTML element for the input\n */\n\n/**\n * @import { Schema } from 'govuk-frontend/dist/govuk/common/configuration.mjs'\n */\n","import { ConfigurableComponent } from 'govuk-frontend'\n\n/**\n * @augments {ConfigurableComponent<FilterToggleButtonConfig>}\n */\nexport class FilterToggleButton extends ConfigurableComponent {\n  /**\n   * @param {Element | null} $root - HTML element to use for filter toggle button\n   * @param {FilterToggleButtonConfig} [config] - Filter toggle button config\n   */\n  constructor($root, config = {}) {\n    super($root, config)\n\n    const $toggleButtonContainer =\n      this.config.toggleButtonContainer.element ??\n      document.querySelector(this.config.toggleButtonContainer.selector)\n\n    const $closeButtonContainer =\n      this.config.closeButtonContainer.element ??\n      this.$root.querySelector(this.config.closeButtonContainer.selector)\n\n    if (\n      !(\n        $toggleButtonContainer instanceof HTMLElement &&\n        $closeButtonContainer instanceof HTMLElement\n      )\n    ) {\n      return this\n    }\n\n    this.$toggleButtonContainer = $toggleButtonContainer\n    this.$closeButtonContainer = $closeButtonContainer\n\n    this.createToggleButton()\n    this.setupResponsiveChecks()\n\n    this.$root.setAttribute('tabindex', '-1')\n\n    if (this.config.startHidden) {\n      this.hideMenu()\n    }\n  }\n\n  setupResponsiveChecks() {\n    this.mq = window.matchMedia(this.config.bigModeMediaQuery)\n    this.mq.addListener(this.checkMode.bind(this))\n    this.checkMode()\n  }\n\n  createToggleButton() {\n    this.$menuButton = document.createElement('button')\n    this.$menuButton.setAttribute('type', 'button')\n    this.$menuButton.setAttribute('aria-haspopup', 'true')\n    this.$menuButton.setAttribute('aria-expanded', 'false')\n\n    this.$menuButton.className = `govuk-button ${this.config.toggleButton.classes}`\n    this.$menuButton.textContent = this.config.toggleButton.showText\n\n    this.$menuButton.addEventListener(\n      'click',\n      this.onMenuButtonClick.bind(this)\n    )\n\n    this.$toggleButtonContainer.append(this.$menuButton)\n  }\n\n  checkMode() {\n    if (this.mq.matches) {\n      this.enableBigMode()\n    } else {\n      this.enableSmallMode()\n    }\n  }\n\n  enableBigMode() {\n    this.showMenu()\n    this.removeCloseButton()\n  }\n\n  enableSmallMode() {\n    this.hideMenu()\n    this.addCloseButton()\n  }\n\n  addCloseButton() {\n    this.$closeButton = document.createElement('button')\n    this.$closeButton.setAttribute('type', 'button')\n\n    this.$closeButton.className = this.config.closeButton.classes\n    this.$closeButton.textContent = this.config.closeButton.text\n\n    this.$closeButton.addEventListener('click', this.onCloseClick.bind(this))\n    this.$closeButtonContainer.append(this.$closeButton)\n  }\n\n  onCloseClick() {\n    this.hideMenu()\n    this.$menuButton.focus()\n  }\n\n  removeCloseButton() {\n    if (this.$closeButton) {\n      this.$closeButton.remove()\n      this.$closeButton = null\n    }\n  }\n\n  hideMenu() {\n    this.$menuButton.setAttribute('aria-expanded', 'false')\n    this.$root.classList.add('moj-js-hidden')\n    this.$menuButton.textContent = this.config.toggleButton.showText\n  }\n\n  showMenu() {\n    this.$menuButton.setAttribute('aria-expanded', 'true')\n    this.$root.classList.remove('moj-js-hidden')\n    this.$menuButton.textContent = this.config.toggleButton.hideText\n  }\n\n  onMenuButtonClick() {\n    this.toggle()\n  }\n\n  toggle() {\n    if (this.$menuButton.getAttribute('aria-expanded') === 'false') {\n      this.showMenu()\n      this.$root.focus()\n    } else {\n      this.hideMenu()\n    }\n  }\n\n  /**\n   * Name for the component used when initialising using data-module attributes.\n   */\n  static moduleName = 'moj-filter'\n\n  /**\n   * Filter toggle button config\n   *\n   * @type {FilterToggleButtonConfig}\n   */\n  static defaults = Object.freeze({\n    bigModeMediaQuery: '(min-width: 48.0625em)',\n    startHidden: true,\n    toggleButton: {\n      showText: 'Show filter',\n      hideText: 'Hide filter',\n      classes: 'govuk-button--secondary'\n    },\n    toggleButtonContainer: {\n      selector: '.moj-action-bar__filter'\n    },\n    closeButton: {\n      text: 'Close',\n      classes: 'moj-filter__close'\n    },\n    closeButtonContainer: {\n      selector: '.moj-filter__header-action'\n    }\n  })\n\n  /**\n   * Filter toggle button config schema\n   *\n   * @satisfies {Schema<FilterToggleButtonConfig>}\n   */\n  static schema = Object.freeze(\n    /** @type {const} */ ({\n      properties: {\n        bigModeMediaQuery: { type: 'string' },\n        startHidden: { type: 'boolean' },\n        toggleButton: { type: 'object' },\n        toggleButtonContainer: { type: 'object' },\n        closeButton: { type: 'object' },\n        closeButtonContainer: { type: 'object' }\n      }\n    })\n  )\n}\n\n/**\n * @typedef {object} FilterToggleButtonConfig\n * @property {string} [bigModeMediaQuery] - Media query for big mode\n * @property {boolean} [startHidden] - Whether to start hidden\n * @property {object} [toggleButton] - Toggle button config\n * @property {string} [toggleButton.showText] - Text for show button\n * @property {string} [toggleButton.hideText] - Text for hide button\n * @property {string} [toggleButton.classes] - Classes for toggle button\n * @property {object} [toggleButtonContainer] - Toggle button container config\n * @property {string} [toggleButtonContainer.selector] - Selector for toggle button container\n * @property {Element | null} [toggleButtonContainer.element] - HTML element for toggle button container\n * @property {object} [closeButton] - Close button config\n * @property {string} [closeButton.text] - Text for close button\n * @property {string} [closeButton.classes] - Classes for close button\n * @property {object} [closeButtonContainer] - Close button container config\n * @property {string} [closeButtonContainer.selector] - Selector for close button container\n * @property {Element | null} [closeButtonContainer.element] - HTML element for close button container\n */\n\n/**\n * @import { Schema } from 'govuk-frontend/dist/govuk/common/configuration.mjs'\n */\n","import { ConfigurableComponent } from 'govuk-frontend'\n\nimport { addAttributeValue, removeAttributeValue } from '../../helpers.mjs'\n\n/**\n * @augments {ConfigurableComponent<FormValidatorConfig, HTMLFormElement>}\n */\nexport class FormValidator extends ConfigurableComponent {\n  /**\n   * @param {Element | null} $root - HTML element to use for form validator\n   * @param {FormValidatorConfig} [config] - Form validator config\n   */\n  constructor($root, config = {}) {\n    super($root, config)\n\n    const $summary =\n      this.config.summary.element ||\n      document.querySelector(this.config.summary.selector)\n\n    if (!$summary || !($summary instanceof HTMLElement)) {\n      return this\n    }\n\n    this.$summary = $summary\n\n    this.errors = /** @type {ValidationError[]} */ ([])\n    this.validators = /** @type {Validator[]} */ ([])\n    this.originalTitle = document.title\n\n    this.$root.addEventListener('submit', this.onSubmit.bind(this))\n  }\n\n  escapeHtml(string = '') {\n    return String(string).replace(\n      /[&<>\"'`=/]/g,\n      (name) => FormValidator.entityMap[name]\n    )\n  }\n\n  resetTitle() {\n    document.title = this.originalTitle\n  }\n\n  updateTitle() {\n    document.title = `${this.errors.length} errors - ${document.title}`\n  }\n\n  showSummary() {\n    this.$summary.innerHTML = this.getSummaryHtml()\n    this.$summary.classList.remove('moj-hidden')\n    this.$summary.setAttribute('aria-labelledby', 'errorSummary-heading')\n    this.$summary.focus()\n  }\n\n  getSummaryHtml() {\n    let html =\n      '<h2 id=\"error-summary-title\" class=\"govuk-error-summary__title\">There is a problem</h2>'\n    html += '<div class=\"govuk-error-summary__body\">'\n    html += '<ul class=\"govuk-list govuk-error-summary__list\">'\n    for (const error of this.errors) {\n      html += '<li>'\n      html += `<a href=\"#${this.escapeHtml(error.fieldName)}\">`\n      html += this.escapeHtml(error.message)\n      html += '</a>'\n      html += '</li>'\n    }\n    html += '</ul>'\n    html += '</div>'\n    return html\n  }\n\n  hideSummary() {\n    this.$summary.classList.add('moj-hidden')\n    this.$summary.removeAttribute('aria-labelledby')\n  }\n\n  /**\n   * @param {SubmitEvent} event - Form submit event\n   */\n  onSubmit(event) {\n    this.removeInlineErrors()\n    this.hideSummary()\n    this.resetTitle()\n    if (!this.validate()) {\n      event.preventDefault()\n      this.updateTitle()\n      this.showSummary()\n      this.showInlineErrors()\n    }\n  }\n\n  showInlineErrors() {\n    for (const error of this.errors) {\n      this.showInlineError(error)\n    }\n  }\n\n  /**\n   * @param {ValidationError} error\n   */\n  showInlineError(error) {\n    const $errorSpan = document.createElement('span')\n    $errorSpan.id = `${error.fieldName}-error`\n    $errorSpan.classList.add('govuk-error-message')\n    $errorSpan.innerHTML = this.escapeHtml(error.message)\n\n    const $control = document.querySelector(`#${error.fieldName}`)\n    const $fieldset = $control.closest('.govuk-fieldset')\n    const $fieldContainer = ($fieldset || $control).closest('.govuk-form-group')\n\n    const $label = $fieldContainer.querySelector('label')\n    const $legend = $fieldContainer.querySelector('legend')\n\n    $fieldContainer.classList.add('govuk-form-group--error')\n\n    if ($fieldset && $legend) {\n      $legend.after($errorSpan)\n      $fieldContainer.setAttribute('aria-invalid', 'true')\n      addAttributeValue($fieldset, 'aria-describedby', $errorSpan.id)\n    } else if ($label && $control) {\n      $label.after($errorSpan)\n      $control.setAttribute('aria-invalid', 'true')\n      addAttributeValue($control, 'aria-describedby', $errorSpan.id)\n    }\n  }\n\n  removeInlineErrors() {\n    for (const error of this.errors) {\n      this.removeInlineError(error)\n    }\n  }\n\n  /**\n   * @param {ValidationError} error\n   */\n  removeInlineError(error) {\n    const $errorSpan = document.querySelector(`#${error.fieldName}-error`)\n\n    const $control = document.querySelector(`#${error.fieldName}`)\n    const $fieldset = $control.closest('.govuk-fieldset')\n    const $fieldContainer = ($fieldset || $control).closest('.govuk-form-group')\n\n    const $label = $fieldContainer.querySelector('label')\n    const $legend = $fieldContainer.querySelector('legend')\n\n    $errorSpan.remove()\n    $fieldContainer.classList.remove('govuk-form-group--error')\n\n    if ($fieldset && $legend) {\n      $fieldContainer.removeAttribute('aria-invalid')\n      removeAttributeValue($fieldset, 'aria-describedby', $errorSpan.id)\n    } else if ($label && $control) {\n      $control.removeAttribute('aria-invalid')\n      removeAttributeValue($control, 'aria-describedby', $errorSpan.id)\n    }\n  }\n\n  /**\n   * @param {string} fieldName - Field name\n   * @param {ValidationRule[]} rules - Validation rules\n   */\n  addValidator(fieldName, rules) {\n    this.validators.push({\n      fieldName,\n      rules,\n      field: this.$root.elements.namedItem(fieldName)\n    })\n  }\n\n  validate() {\n    this.errors = []\n\n    /** @type {Validator | null} */\n    let validator = null\n\n    /** @type {boolean | string} */\n    let validatorReturnValue = true\n\n    let i\n    let j\n\n    for (i = 0; i < this.validators.length; i++) {\n      validator = this.validators[i]\n      for (j = 0; j < validator.rules.length; j++) {\n        validatorReturnValue = validator.rules[j].method(\n          validator.field,\n          validator.rules[j].params\n        )\n\n        if (\n          typeof validatorReturnValue === 'boolean' &&\n          !validatorReturnValue\n        ) {\n          this.errors.push({\n            fieldName: validator.fieldName,\n            message: validator.rules[j].message\n          })\n          break\n        } else if (typeof validatorReturnValue === 'string') {\n          this.errors.push({\n            fieldName: validatorReturnValue,\n            message: validator.rules[j].message\n          })\n          break\n        }\n      }\n    }\n    return this.errors.length === 0\n  }\n\n  /**\n   * @type {Record<string, string>}\n   */\n  static entityMap = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#39;',\n    '/': '&#x2F;',\n    '`': '&#x60;',\n    '=': '&#x3D;'\n  }\n\n  /**\n   * Name for the component used when initialising using data-module attributes.\n   */\n  static moduleName = 'moj-form-validator'\n\n  /**\n   * Multi file upload default config\n   *\n   * @type {FormValidatorConfig}\n   */\n  static defaults = Object.freeze({\n    summary: {\n      selector: '.govuk-error-summary'\n    }\n  })\n\n  /**\n   * Multi file upload config schema\n   *\n   * @satisfies {Schema<FormValidatorConfig>}\n   */\n  static schema = Object.freeze(\n    /** @type {const} */ ({\n      properties: {\n        summary: { type: 'object' }\n      }\n    })\n  )\n}\n\n/**\n * @typedef {object} FormValidatorConfig\n * @property {object} [summary] - Error summary config\n * @property {string} [summary.selector] - Selector for error summary\n * @property {Element | null} [summary.element] - HTML element for error summary\n */\n\n/**\n * @typedef {object} ValidationRule\n * @property {(field: Validator['field'], params: Record<string, Validator['field']>) => boolean | string} method - Validation method\n * @property {string} message - Error message\n * @property {Record<string, Validator['field']>} [params] - Parameters for validation\n */\n\n/**\n * @typedef {object} ValidationError\n * @property {string} fieldName - Name of the field\n * @property {string} message - Validation error message\n */\n\n/**\n * @typedef {object} Validator\n * @property {string} fieldName - Name of the field\n * @property {ValidationRule[]} rules - Validation rules\n * @property {Element | RadioNodeList} field - Form field\n */\n\n/**\n * @import { Schema } from 'govuk-frontend/dist/govuk/common/configuration.mjs'\n */\n","/* eslint-disable @typescript-eslint/no-empty-function */\n\nimport { ConfigurableComponent } from 'govuk-frontend'\n\n/**\n * @augments {ConfigurableComponent<MultiFileUploadConfig>}\n */\nexport class MultiFileUpload extends ConfigurableComponent {\n  /**\n   * @param {Element | null} $root - HTML element to use for multi file upload\n   * @param {MultiFileUploadConfig} [config] - Multi file upload config\n   */\n  constructor($root, config = {}) {\n    super($root, config)\n\n    if (!MultiFileUpload.isSupported()) {\n      return this\n    }\n\n    const $feedbackContainer =\n      this.config.feedbackContainer.element ??\n      this.$root.querySelector(this.config.feedbackContainer.selector)\n\n    if (!$feedbackContainer || !($feedbackContainer instanceof HTMLElement)) {\n      return this\n    }\n\n    this.$feedbackContainer = $feedbackContainer\n\n    this.setupFileInput()\n    this.setupDropzone()\n    this.setupLabel()\n    this.setupStatusBox()\n\n    this.$root.addEventListener('click', this.onFileDeleteClick.bind(this))\n    this.$root.classList.add('moj-multi-file-upload--enhanced')\n  }\n\n  setupDropzone() {\n    this.$dropzone = document.createElement('div')\n    this.$dropzone.classList.add('moj-multi-file-upload__dropzone')\n\n    this.$dropzone.addEventListener('dragover', this.onDragOver.bind(this))\n    this.$dropzone.addEventListener('dragleave', this.onDragLeave.bind(this))\n    this.$dropzone.addEventListener('drop', this.onDrop.bind(this))\n\n    this.$fileInput.replaceWith(this.$dropzone)\n    this.$dropzone.appendChild(this.$fileInput)\n  }\n\n  setupLabel() {\n    const $label = document.createElement('label')\n    $label.setAttribute('for', this.$fileInput.id)\n    $label.classList.add('govuk-button', 'govuk-button--secondary')\n    $label.textContent = this.config.dropzoneButtonText\n\n    const $hint = document.createElement('p')\n    $hint.classList.add('govuk-body')\n    $hint.textContent = this.config.dropzoneHintText\n\n    this.$label = $label\n    this.$dropzone.append($hint)\n    this.$dropzone.append($label)\n  }\n\n  setupFileInput() {\n    this.$fileInput = /** @type {HTMLInputElement} */ (\n      this.$root.querySelector('.moj-multi-file-upload__input')\n    )\n    this.$fileInput.addEventListener('change', this.onFileChange.bind(this))\n    this.$fileInput.addEventListener('focus', this.onFileFocus.bind(this))\n    this.$fileInput.addEventListener('blur', this.onFileBlur.bind(this))\n  }\n\n  setupStatusBox() {\n    this.$status = document.createElement('div')\n    this.$status.classList.add('govuk-visually-hidden')\n    this.$status.setAttribute('aria-live', 'polite')\n    this.$status.setAttribute('role', 'status')\n    this.$dropzone.append(this.$status)\n  }\n\n  /**\n   * @param {DragEvent} event - Drag event\n   */\n  onDragOver(event) {\n    event.preventDefault()\n    this.$dropzone.classList.add('moj-multi-file-upload--dragover')\n  }\n\n  onDragLeave() {\n    this.$dropzone.classList.remove('moj-multi-file-upload--dragover')\n  }\n\n  /**\n   * @param {DragEvent} event - Drag event\n   */\n  onDrop(event) {\n    event.preventDefault()\n    this.$dropzone.classList.remove('moj-multi-file-upload--dragover')\n    this.$feedbackContainer.classList.remove('moj-hidden')\n    this.$status.textContent = this.config.uploadStatusText\n    this.uploadFiles(event.dataTransfer.files)\n  }\n\n  /**\n   * @param {FileList} files - File list\n   */\n  uploadFiles(files) {\n    for (const file of Array.from(files)) {\n      this.uploadFile(file)\n    }\n  }\n\n  onFileChange() {\n    this.$feedbackContainer.classList.remove('moj-hidden')\n    this.$status.textContent = this.config.uploadStatusText\n    this.uploadFiles(this.$fileInput.files)\n\n    const $fileInput = this.$fileInput.cloneNode(true)\n    if (!$fileInput || !($fileInput instanceof HTMLInputElement)) {\n      return\n    }\n\n    $fileInput.value = ''\n    this.$fileInput.replaceWith($fileInput)\n\n    this.setupFileInput()\n    this.$fileInput.focus()\n  }\n\n  onFileFocus() {\n    this.$label.classList.add('moj-multi-file-upload--focused')\n  }\n\n  onFileBlur() {\n    this.$label.classList.remove('moj-multi-file-upload--focused')\n  }\n\n  /**\n   * @param {UploadResponseSuccess['success']} success\n   */\n  getSuccessHtml(success) {\n    return `<span class=\"moj-multi-file-upload__success\"> <svg class=\"moj-banner__icon\" fill=\"currentColor\" role=\"presentation\" focusable=\"false\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 25 25\" height=\"25\" width=\"25\"><path d=\"M25,6.2L8.7,23.2L0,14.1l4-4.2l4.7,4.9L21,2L25,6.2z\"/></svg>${success.messageHtml}</span>`\n  }\n\n  /**\n   * @param {UploadResponseError['error']} error\n   */\n  getErrorHtml(error) {\n    return `<span class=\"moj-multi-file-upload__error\"> <svg class=\"moj-banner__icon\" fill=\"currentColor\" role=\"presentation\" focusable=\"false\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 25 25\" height=\"25\" width=\"25\"><path d=\"M13.6,15.4h-2.3v-4.5h2.3V15.4z M13.6,19.8h-2.3v-2.2h2.3V19.8z M0,23.2h25L12.5,2L0,23.2z\"/></svg>${error.message}</span>`\n  }\n\n  /**\n   * @param {File} file\n   */\n  getFileRow(file) {\n    const $row = document.createElement('div')\n\n    $row.classList.add('govuk-summary-list__row', 'moj-multi-file-upload__row')\n\n    $row.innerHTML = `\n    <div class=\"govuk-summary-list__value moj-multi-file-upload__message\">\n      <span class=\"moj-multi-file-upload__filename\">${file.name}</span>\n      <span class=\"moj-multi-file-upload__progress\">0%</span>\n    </div>\n    <div class=\"govuk-summary-list__actions moj-multi-file-upload__actions\"></div>\n  `\n\n    return $row\n  }\n\n  /**\n   * @param {UploadResponseFile} file\n   */\n  getDeleteButton(file) {\n    const $button = document.createElement('button')\n\n    $button.setAttribute('type', 'button')\n    $button.setAttribute('name', 'delete')\n    $button.setAttribute('value', file.filename)\n\n    $button.classList.add(\n      'moj-multi-file-upload__delete',\n      'govuk-button',\n      'govuk-button--secondary',\n      'govuk-!-margin-bottom-0'\n    )\n\n    $button.innerHTML = `Delete <span class=\"govuk-visually-hidden\">${file.originalname}</span>`\n\n    return $button\n  }\n\n  /**\n   * @param {File} file\n   */\n  uploadFile(file) {\n    this.config.hooks.entryHook(this, file)\n\n    const $item = this.getFileRow(file)\n    const $message = $item.querySelector('.moj-multi-file-upload__message')\n    const $actions = $item.querySelector('.moj-multi-file-upload__actions')\n    const $progress = $item.querySelector('.moj-multi-file-upload__progress')\n\n    const formData = new FormData()\n    formData.append('documents', file)\n\n    this.$feedbackContainer\n      .querySelector('.moj-multi-file-upload__list')\n      .append($item)\n\n    const xhr = new XMLHttpRequest()\n\n    const onLoad = () => {\n      if (\n        xhr.status < 200 ||\n        xhr.status >= 300 ||\n        !('success' in xhr.response)\n      ) {\n        return onError()\n      }\n\n      $message.innerHTML = this.getSuccessHtml(xhr.response.success)\n      this.$status.textContent = xhr.response.success.messageText\n\n      $actions.append(this.getDeleteButton(xhr.response.file))\n      this.config.hooks.exitHook(this, file, xhr, xhr.responseText)\n    }\n\n    const onError = () => {\n      const error = new Error(\n        xhr.response && 'error' in xhr.response\n          ? xhr.response.error.message\n          : xhr.statusText || 'Upload failed'\n      )\n\n      $message.innerHTML = this.getErrorHtml(error)\n      this.$status.textContent = error.message\n\n      this.config.hooks.errorHook(this, file, xhr, xhr.responseText, error)\n    }\n\n    xhr.addEventListener('load', onLoad)\n    xhr.addEventListener('error', onError)\n\n    xhr.upload.addEventListener('progress', (event) => {\n      if (!event.lengthComputable) {\n        return\n      }\n\n      const percentComplete = Math.round((event.loaded / event.total) * 100)\n      $progress.textContent = ` ${percentComplete}%`\n    })\n\n    xhr.open('POST', this.config.uploadUrl)\n    xhr.responseType = 'json'\n\n    xhr.send(formData)\n  }\n\n  /**\n   * @param {MouseEvent} event - Click event\n   */\n  onFileDeleteClick(event) {\n    const $button = event.target\n\n    if (\n      !$button ||\n      !($button instanceof HTMLButtonElement) ||\n      !$button.classList.contains('moj-multi-file-upload__delete')\n    ) {\n      return\n    }\n\n    event.preventDefault() // if user refreshes page and then deletes\n\n    const xhr = new XMLHttpRequest()\n\n    xhr.addEventListener('load', () => {\n      if (xhr.status < 200 || xhr.status >= 300) {\n        return\n      }\n\n      const $rows = Array.from(\n        this.$feedbackContainer.querySelectorAll('.moj-multi-file-upload__row')\n      )\n\n      if ($rows.length === 1) {\n        this.$feedbackContainer.classList.add('moj-hidden')\n      }\n\n      const $rowDelete = $rows.find(($row) => $row.contains($button))\n      if ($rowDelete) $rowDelete.remove()\n\n      this.config.hooks.deleteHook(this, undefined, xhr, xhr.responseText)\n    })\n\n    xhr.open('POST', this.config.deleteUrl)\n    xhr.setRequestHeader('Content-Type', 'application/json')\n    xhr.responseType = 'json'\n\n    xhr.send(\n      JSON.stringify({\n        [$button.name]: $button.value\n      })\n    )\n  }\n\n  static isSupported() {\n    return (\n      this.isDragAndDropSupported() &&\n      this.isFormDataSupported() &&\n      this.isFileApiSupported()\n    )\n  }\n\n  static isDragAndDropSupported() {\n    const div = document.createElement('div')\n    return typeof div.ondrop !== 'undefined'\n  }\n\n  static isFormDataSupported() {\n    return typeof FormData === 'function'\n  }\n\n  static isFileApiSupported() {\n    const input = document.createElement('input')\n    input.type = 'file'\n    return typeof input.files !== 'undefined'\n  }\n\n  /**\n   * Name for the component used when initialising using data-module attributes.\n   */\n  static moduleName = 'moj-multi-file-upload'\n\n  /**\n   * Multi file upload default config\n   *\n   * @type {MultiFileUploadConfig}\n   */\n  static defaults = Object.freeze({\n    uploadStatusText: 'Uploading files, please wait',\n    dropzoneHintText: 'Drag and drop files here or',\n    dropzoneButtonText: 'Choose files',\n    feedbackContainer: {\n      selector: '.moj-multi-file__uploaded-files'\n    },\n    hooks: {\n      entryHook: () => {},\n      exitHook: () => {},\n      errorHook: () => {},\n      deleteHook: () => {}\n    }\n  })\n\n  /**\n   * Multi file upload config schema\n   *\n   * @satisfies {Schema<MultiFileUploadConfig>}\n   */\n  static schema = Object.freeze(\n    /** @type {const} */ ({\n      properties: {\n        uploadUrl: { type: 'string' },\n        deleteUrl: { type: 'string' },\n        uploadStatusText: { type: 'string' },\n        dropzoneHintText: { type: 'string' },\n        dropzoneButtonText: { type: 'string' },\n        feedbackContainer: { type: 'object' },\n        hooks: { type: 'object' }\n      }\n    })\n  )\n}\n\n/**\n * Multi file upload config\n *\n * @typedef {object} MultiFileUploadConfig\n * @property {string} [uploadUrl] - File upload URL\n * @property {string} [deleteUrl] - File delete URL\n * @property {string} [uploadStatusText] - Upload status text\n * @property {string} [dropzoneHintText] - Dropzone hint text\n * @property {string} [dropzoneButtonText] - Dropzone button text\n * @property {object} [feedbackContainer] - Feedback container config\n * @property {string} [feedbackContainer.selector] - Selector for feedback container\n * @property {Element | null} [feedbackContainer.element] - HTML element for feedback container\n * @property {MultiFileUploadHooks} [hooks] - Upload hooks\n */\n\n/**\n * Multi file upload hooks\n *\n * @typedef {object} MultiFileUploadHooks\n * @property {OnUploadFileEntryHook} [entryHook] - File upload entry hook\n * @property {OnUploadFileExitHook} [exitHook] - File upload exit hook\n * @property {OnUploadFileErrorHook} [errorHook] - File upload error hook\n * @property {OnUploadFileDeleteHook} [deleteHook] - File delete hook\n */\n\n/**\n * Upload hook: File entry\n *\n * @callback OnUploadFileEntryHook\n * @param {InstanceType<typeof MultiFileUpload>} upload - Multi file upload\n * @param {File} file - File upload\n */\n\n/**\n * Upload hook: File exit\n *\n * @callback OnUploadFileExitHook\n * @param {InstanceType<typeof MultiFileUpload>} upload - Multi file upload\n * @param {File} file - File upload\n * @param {XMLHttpRequest} xhr - XMLHttpRequest\n * @param {string} textStatus - Text status\n */\n\n/**\n * Upload hook: File error\n *\n * @callback OnUploadFileErrorHook\n * @param {InstanceType<typeof MultiFileUpload>} upload - Multi file upload\n * @param {File} file - File upload\n * @param {XMLHttpRequest} xhr - XMLHttpRequest\n * @param {string} textStatus - Text status\n * @param {Error} errorThrown - Error thrown\n */\n\n/**\n * Upload hook: File delete\n *\n * @callback OnUploadFileDeleteHook\n * @param {InstanceType<typeof MultiFileUpload>} upload - Multi file upload\n * @param {File} [file] - File upload\n * @param {XMLHttpRequest} xhr - XMLHttpRequest\n * @param {string} textStatus - Text status\n */\n\n/**\n * @typedef {object} UploadResponseSuccess\n * @property {{ messageText: string, messageHtml: string }} success - Response success\n * @property {UploadResponseFile} file - Response file\n */\n\n/**\n * @typedef {object} UploadResponseError\n * @property {{ message: string }} error - Response error\n * @property {UploadResponseFile} file - Response file\n */\n\n/**\n * @typedef {object} UploadResponseFile\n * @property {string} filename - File name\n * @property {string} originalname - Original file name\n */\n\n/**\n * @import { Schema } from 'govuk-frontend/dist/govuk/common/configuration.mjs'\n */\n","import { ConfigurableComponent } from 'govuk-frontend'\n\n/**\n * @augments {ConfigurableComponent<MultiSelectConfig>}\n */\nexport class MultiSelect extends ConfigurableComponent {\n  /**\n   * @param {Element | null} $root - HTML element to use for multi select\n   * @param {MultiSelectConfig} [config] - Multi select config\n   */\n  constructor($root, config = {}) {\n    super($root, config)\n\n    const $container = this.$root.querySelector(\n      `#${this.config.idPrefix}select-all`\n    )\n\n    const $checkboxes = /** @type {NodeListOf<HTMLInputElement>} */ (\n      this.config.checkboxes.items ??\n        this.$root.querySelectorAll(this.config.checkboxes.selector)\n    )\n\n    if (\n      !$container ||\n      !($container instanceof HTMLElement) ||\n      !$checkboxes.length\n    ) {\n      return this\n    }\n\n    this.setupToggle(this.config.idPrefix)\n\n    this.$toggleButton = this.$toggle.querySelector('input')\n    this.$toggleButton.addEventListener('click', this.onButtonClick.bind(this))\n\n    this.$container = $container\n    this.$container.append(this.$toggle)\n\n    this.$checkboxes = Array.from($checkboxes)\n    this.$checkboxes.forEach(($input) =>\n      $input.addEventListener('click', this.onCheckboxClick.bind(this))\n    )\n\n    this.checked = config.checked || false\n  }\n\n  setupToggle(idPrefix = '') {\n    const id = `${idPrefix}checkboxes-all`\n\n    const $toggle = document.createElement('div')\n    const $label = document.createElement('label')\n    const $input = document.createElement('input')\n    const $span = document.createElement('span')\n\n    $toggle.classList.add(\n      'govuk-checkboxes__item',\n      'govuk-checkboxes--small',\n      'moj-multi-select__checkbox'\n    )\n\n    $input.id = id\n    $input.type = 'checkbox'\n    $input.classList.add('govuk-checkboxes__input')\n\n    $label.setAttribute('for', id)\n    $label.classList.add(\n      'govuk-label',\n      'govuk-checkboxes__label',\n      'moj-multi-select__toggle-label'\n    )\n\n    $span.classList.add('govuk-visually-hidden')\n    $span.textContent = 'Select all'\n\n    $label.append($span)\n    $toggle.append($input, $label)\n\n    this.$toggle = $toggle\n  }\n\n  onButtonClick() {\n    if (this.checked) {\n      this.uncheckAll()\n      this.$toggleButton.checked = false\n    } else {\n      this.checkAll()\n      this.$toggleButton.checked = true\n    }\n  }\n\n  checkAll() {\n    this.$checkboxes.forEach(($input) => {\n      $input.checked = true\n    })\n\n    this.checked = true\n  }\n\n  uncheckAll() {\n    this.$checkboxes.forEach(($input) => {\n      $input.checked = false\n    })\n\n    this.checked = false\n  }\n\n  /**\n   * @param {MouseEvent} event - Click event\n   */\n  onCheckboxClick(event) {\n    if (!(event.target instanceof HTMLInputElement)) {\n      return\n    }\n\n    if (!event.target.checked) {\n      this.$toggleButton.checked = false\n      this.checked = false\n    } else {\n      if (\n        this.$checkboxes.filter(($input) => $input.checked).length ===\n        this.$checkboxes.length\n      ) {\n        this.$toggleButton.checked = true\n        this.checked = true\n      }\n    }\n  }\n\n  /**\n   * Name for the component used when initialising using data-module attributes.\n   */\n  static moduleName = 'moj-multi-select'\n\n  /**\n   * Multi select config\n   *\n   * @type {MultiSelectConfig}\n   */\n  static defaults = Object.freeze({\n    idPrefix: '',\n    checkboxes: {\n      selector: 'tbody input.govuk-checkboxes__input'\n    }\n  })\n\n  /**\n   * Multi select config schema\n   *\n   * @satisfies {Schema<MultiSelectConfig>}\n   */\n  static schema = Object.freeze(\n    /** @type {const} */ ({\n      properties: {\n        idPrefix: { type: 'string' },\n        checked: { type: 'boolean' },\n        checkboxes: { type: 'object' }\n      }\n    })\n  )\n}\n\n/**\n * Multi select config\n *\n * @typedef {object} MultiSelectConfig\n * @property {string} [idPrefix] - Prefix for the Select all\" checkbox `id` attribute\n * @property {boolean} [checked] - Whether the \"Select all\" checkbox is checked\n * @property {object} [checkboxes] - Checkboxes config\n * @property {string} [checkboxes.selector] - Checkboxes query selector\n * @property {NodeListOf<HTMLInputElement>} [checkboxes.items] - Checkboxes query selector results\n */\n\n/**\n * @import { Schema } from 'govuk-frontend/dist/govuk/common/configuration.mjs'\n */\n","import { Component } from 'govuk-frontend'\n\nexport class PasswordReveal extends Component {\n  /**\n   * @param {Element | null} $root - HTML element to use for password reveal\n   */\n  constructor($root) {\n    super($root)\n\n    const $input = this.$root.querySelector('.govuk-input')\n    if (!$input || !($input instanceof HTMLInputElement)) {\n      return this\n    }\n\n    this.$input = $input\n    this.$input.setAttribute('spellcheck', 'false')\n\n    this.createButton()\n  }\n\n  createButton() {\n    this.$group = document.createElement('div')\n    this.$button = document.createElement('button')\n\n    this.$button.setAttribute('type', 'button')\n\n    this.$root.classList.add('moj-password-reveal')\n    this.$group.classList.add('moj-password-reveal__wrapper')\n    this.$button.classList.add(\n      'govuk-button',\n      'govuk-button--secondary',\n      'moj-password-reveal__button'\n    )\n\n    this.$button.innerHTML =\n      'Show <span class=\"govuk-visually-hidden\">password</span>'\n\n    this.$button.addEventListener('click', this.onButtonClick.bind(this))\n\n    this.$group.append(this.$input, this.$button)\n    this.$root.append(this.$group)\n  }\n\n  onButtonClick() {\n    if (this.$input.type === 'password') {\n      this.$input.type = 'text'\n      this.$button.innerHTML =\n        'Hide <span class=\"govuk-visually-hidden\">password</span>'\n    } else {\n      this.$input.type = 'password'\n      this.$button.innerHTML =\n        'Show <span class=\"govuk-visually-hidden\">password</span>'\n    }\n  }\n\n  /**\n   * Name for the component used when initialising using data-module attributes.\n   */\n  static moduleName = 'moj-password-reveal'\n}\n","import { ConfigurableComponent } from 'govuk-frontend'\n\n/**\n * @augments {ConfigurableComponent<RichTextEditorConfig>}\n */\nexport class RichTextEditor extends ConfigurableComponent {\n  /**\n   * @param {Element | null} $root - HTML element to use for rich text editor\n   * @param {RichTextEditorConfig} config\n   */\n  constructor($root, config = {}) {\n    super($root, config)\n\n    if (!RichTextEditor.isSupported()) {\n      return this\n    }\n\n    const $textarea = this.$root.querySelector('.govuk-textarea')\n    if (!$textarea || !($textarea instanceof HTMLTextAreaElement)) {\n      return this\n    }\n\n    this.$textarea = $textarea\n\n    this.createToolbar()\n    this.hideDefault()\n    this.configureToolbar()\n\n    this.keys = {\n      left: 37,\n      right: 39,\n      up: 38,\n      down: 40\n    }\n\n    this.$content.addEventListener('input', this.onEditorInput.bind(this))\n\n    this.$root\n      .querySelector('label')\n      .addEventListener('click', this.onLabelClick.bind(this))\n\n    this.$toolbar.addEventListener('keydown', this.onToolbarKeydown.bind(this))\n  }\n\n  /**\n   * @param {KeyboardEvent} event - Click event\n   */\n  onToolbarKeydown(event) {\n    let $focusableButton\n    switch (event.keyCode) {\n      case this.keys.right:\n      case this.keys.down: {\n        $focusableButton = this.$buttons.find(\n          (button) => button.getAttribute('tabindex') === '0'\n        )\n\n        if ($focusableButton) {\n          const $nextButton = $focusableButton.nextElementSibling\n\n          if ($nextButton && $nextButton instanceof HTMLButtonElement) {\n            $nextButton.focus()\n            $focusableButton.setAttribute('tabindex', '-1')\n            $nextButton.setAttribute('tabindex', '0')\n          }\n        }\n\n        break\n      }\n\n      case this.keys.left:\n      case this.keys.up: {\n        $focusableButton = this.$buttons.find(\n          (button) => button.getAttribute('tabindex') === '0'\n        )\n\n        if ($focusableButton) {\n          const $previousButton = $focusableButton.previousElementSibling\n\n          if ($previousButton && $previousButton instanceof HTMLButtonElement) {\n            $previousButton.focus()\n            $focusableButton.setAttribute('tabindex', '-1')\n            $previousButton.setAttribute('tabindex', '0')\n          }\n        }\n\n        break\n      }\n    }\n  }\n\n  getToolbarHtml() {\n    let html = ''\n\n    html += '<div class=\"moj-rich-text-editor__toolbar\" role=\"toolbar\">'\n\n    if (this.config.toolbar.bold) {\n      html +=\n        '<button class=\"moj-rich-text-editor__toolbar-button moj-rich-text-editor__toolbar-button--bold\" type=\"button\" data-command=\"bold\"><span class=\"govuk-visually-hidden\">Bold</span></button>'\n    }\n\n    if (this.config.toolbar.italic) {\n      html +=\n        '<button class=\"moj-rich-text-editor__toolbar-button moj-rich-text-editor__toolbar-button--italic\" type=\"button\" data-command=\"italic\"><span class=\"govuk-visually-hidden\">Italic</span></button>'\n    }\n\n    if (this.config.toolbar.underline) {\n      html +=\n        '<button class=\"moj-rich-text-editor__toolbar-button moj-rich-text-editor__toolbar-button--underline\" type=\"button\" data-command=\"underline\"><span class=\"govuk-visually-hidden\">Underline</span></button>'\n    }\n\n    if (this.config.toolbar.bullets) {\n      html +=\n        '<button class=\"moj-rich-text-editor__toolbar-button moj-rich-text-editor__toolbar-button--unordered-list\" type=\"button\" data-command=\"insertUnorderedList\"><span class=\"govuk-visually-hidden\">Unordered list</span></button>'\n    }\n\n    if (this.config.toolbar.numbers) {\n      html +=\n        '<button class=\"moj-rich-text-editor__toolbar-button moj-rich-text-editor__toolbar-button--ordered-list\" type=\"button\" data-command=\"insertOrderedList\"><span class=\"govuk-visually-hidden\">Ordered list</span></button>'\n    }\n\n    html += '</div>'\n    return html\n  }\n\n  getEnhancedHtml() {\n    return `${this.getToolbarHtml()}<div class=\"govuk-textarea moj-rich-text-editor__content\" contenteditable=\"true\" spellcheck=\"false\"></div>`\n  }\n\n  hideDefault() {\n    this.$textarea.classList.add('govuk-visually-hidden')\n    this.$textarea.setAttribute('aria-hidden', 'true')\n    this.$textarea.setAttribute('tabindex', '-1')\n  }\n\n  createToolbar() {\n    this.$toolbar = document.createElement('div')\n    this.$toolbar.className = 'moj-rich-text-editor'\n    this.$toolbar.innerHTML = this.getEnhancedHtml()\n    this.$root.append(this.$toolbar)\n\n    this.$content = /** @type {HTMLElement} */ (\n      this.$root.querySelector('.moj-rich-text-editor__content')\n    )\n\n    this.$content.innerHTML = this.$textarea.value\n  }\n\n  configureToolbar() {\n    this.$buttons = Array.from(\n      /** @type {NodeListOf<HTMLButtonElement>} */\n      (this.$root.querySelectorAll('.moj-rich-text-editor__toolbar-button'))\n    )\n\n    this.$buttons.forEach(($button, index) => {\n      $button.setAttribute('tabindex', !index ? '0' : '-1')\n      $button.addEventListener('click', this.onButtonClick.bind(this))\n    })\n  }\n\n  /**\n   * @param {MouseEvent} event - Click event\n   */\n  onButtonClick(event) {\n    if (!(event.currentTarget instanceof HTMLElement)) {\n      return\n    }\n\n    document.execCommand(\n      event.currentTarget.getAttribute('data-command'),\n      false,\n      undefined\n    )\n  }\n\n  getContent() {\n    return this.$content.innerHTML\n  }\n\n  onEditorInput() {\n    this.updateTextarea()\n  }\n\n  updateTextarea() {\n    document.execCommand('defaultParagraphSeparator', false, 'p')\n    this.$textarea.value = this.getContent()\n  }\n\n  /**\n   * @param {MouseEvent} event - Click event\n   */\n  onLabelClick(event) {\n    event.preventDefault()\n    this.$content.focus()\n  }\n\n  static isSupported() {\n    return 'contentEditable' in document.documentElement\n  }\n\n  /**\n   * Name for the component used when initialising using data-module attributes.\n   */\n  static moduleName = 'moj-rich-text-editor'\n\n  /**\n   * Rich text editor config\n   *\n   * @type {RichTextEditorConfig}\n   */\n  static defaults = Object.freeze({\n    toolbar: {\n      bold: false,\n      italic: false,\n      underline: false,\n      bullets: true,\n      numbers: true\n    }\n  })\n\n  /**\n   * Rich text editor config schema\n   *\n   * @satisfies {Schema<RichTextEditorConfig>}\n   */\n  static schema = Object.freeze(\n    /** @type {const} */ ({\n      properties: {\n        toolbar: { type: 'object' }\n      }\n    })\n  )\n}\n\n/**\n * Rich text editor config\n *\n * @typedef {object} RichTextEditorConfig\n * @property {RichTextEditorToolbar} [toolbar] - Toolbar options\n */\n\n/**\n * Rich text editor toolbar options\n *\n * @typedef {object} RichTextEditorToolbar\n * @property {boolean} [bold] - Show the bold button\n * @property {boolean} [italic] - Show the italic button\n * @property {boolean} [underline] - Show the underline button\n * @property {boolean} [bullets] - Show the bullets button\n * @property {boolean} [numbers] - Show the numbers button\n */\n\n/**\n * @import { Schema } from 'govuk-frontend/dist/govuk/common/configuration.mjs'\n */\n","import { ConfigurableComponent } from 'govuk-frontend'\n\n/**\n * @augments {ConfigurableComponent<SearchToggleConfig>}\n */\nexport class SearchToggle extends ConfigurableComponent {\n  /**\n   * @param {Element | null} $root - HTML element to use for search toggle\n   * @param {SearchToggleConfig} [config] - Search toggle config\n   */\n  constructor($root, config = {}) {\n    super($root, config)\n\n    const $searchContainer =\n      this.config.searchContainer.element ??\n      this.$root.querySelector(this.config.searchContainer.selector)\n\n    const $toggleButtonContainer =\n      this.config.toggleButtonContainer.element ??\n      this.$root.querySelector(this.config.toggleButtonContainer.selector)\n\n    if (\n      !$searchContainer ||\n      !$toggleButtonContainer ||\n      !($searchContainer instanceof HTMLElement) ||\n      !($toggleButtonContainer instanceof HTMLElement)\n    ) {\n      return this\n    }\n\n    this.$searchContainer = $searchContainer\n    this.$toggleButtonContainer = $toggleButtonContainer\n\n    const svg =\n      '<svg viewBox=\"0 0 20 20\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" class=\"moj-search-toggle__button__icon\"><path d=\"M7.433,12.5790048 C6.06762625,12.5808611 4.75763941,12.0392925 3.79217348,11.0738265 C2.82670755,10.1083606 2.28513891,8.79837375 2.28699522,7.433 C2.28513891,6.06762625 2.82670755,4.75763941 3.79217348,3.79217348 C4.75763941,2.82670755 6.06762625,2.28513891 7.433,2.28699522 C8.79837375,2.28513891 10.1083606,2.82670755 11.0738265,3.79217348 C12.0392925,4.75763941 12.5808611,6.06762625 12.5790048,7.433 C12.5808611,8.79837375 12.0392925,10.1083606 11.0738265,11.0738265 C10.1083606,12.0392925 8.79837375,12.5808611 7.433,12.5790048 L7.433,12.5790048 Z M14.293,12.579 L13.391,12.579 L13.071,12.269 C14.2300759,10.9245158 14.8671539,9.20813198 14.866,7.433 C14.866,3.32786745 11.5381325,-1.65045755e-15 7.433,-1.65045755e-15 C3.32786745,-1.65045755e-15 -1.65045755e-15,3.32786745 -1.65045755e-15,7.433 C-1.65045755e-15,11.5381325 3.32786745,14.866 7.433,14.866 C9.208604,14.8671159 10.9253982,14.2296624 12.27,13.07 L12.579,13.39 L12.579,14.294 L18.296,20 L20,18.296 L14.294,12.579 L14.293,12.579 Z\"></path></svg>'\n\n    this.$toggleButton = document.createElement('button')\n    this.$toggleButton.setAttribute('class', 'moj-search-toggle__button')\n    this.$toggleButton.setAttribute('type', 'button')\n    this.$toggleButton.setAttribute('aria-haspopup', 'true')\n    this.$toggleButton.setAttribute('aria-expanded', 'false')\n    this.$toggleButton.innerHTML = `${this.config.toggleButton.text} ${svg}`\n\n    this.$toggleButton.addEventListener(\n      'click',\n      this.onToggleButtonClick.bind(this)\n    )\n\n    this.$toggleButtonContainer.append(this.$toggleButton)\n\n    document.addEventListener('click', this.onDocumentClick.bind(this))\n    document.addEventListener('focusin', this.onDocumentClick.bind(this))\n  }\n\n  showMenu() {\n    this.$toggleButton.setAttribute('aria-expanded', 'true')\n    this.$searchContainer.classList.remove('moj-js-hidden')\n    this.$searchContainer.querySelector('input').focus()\n  }\n\n  hideMenu() {\n    this.$searchContainer.classList.add('moj-js-hidden')\n    this.$toggleButton.setAttribute('aria-expanded', 'false')\n  }\n\n  onToggleButtonClick() {\n    if (this.$toggleButton.getAttribute('aria-expanded') === 'false') {\n      this.showMenu()\n    } else {\n      this.hideMenu()\n    }\n  }\n\n  /**\n   * @param {MouseEvent | FocusEvent} event\n   */\n  onDocumentClick(event) {\n    if (\n      event.target instanceof Node &&\n      !this.$toggleButtonContainer.contains(event.target) &&\n      !this.$searchContainer.contains(event.target)\n    ) {\n      this.hideMenu()\n    }\n  }\n\n  /**\n   * Name for the component used when initialising using data-module attributes.\n   */\n  static moduleName = 'moj-search-toggle'\n\n  /**\n   * Search toggle config\n   *\n   * @type {SearchToggleConfig}\n   */\n  static defaults = Object.freeze({\n    searchContainer: {\n      selector: '.moj-search'\n    },\n    toggleButton: {\n      text: 'Search'\n    },\n    toggleButtonContainer: {\n      selector: '.moj-search-toggle__toggle'\n    }\n  })\n\n  /**\n   * Search toggle config schema\n   *\n   * @satisfies {Schema<SearchToggleConfig>}\n   */\n  static schema = Object.freeze(\n    /** @type {const} */ ({\n      properties: {\n        searchContainer: { type: 'object' },\n        toggleButton: { type: 'object' },\n        toggleButtonContainer: { type: 'object' }\n      }\n    })\n  )\n}\n\n/**\n * @typedef {object} SearchToggleConfig\n * @property {object} [searchContainer] - Search config\n * @property {string} [searchContainer.selector] - Selector for search container\n * @property {Element | null} [searchContainer.element] - HTML element for search container\n * @property {object} [toggleButton] - Toggle button config\n * @property {string} [toggleButton.text] - Text for toggle button\n * @property {object} [toggleButtonContainer] - Toggle button container config\n * @property {string} [toggleButtonContainer.selector] - Selector for toggle button container\n * @property {Element | null} [toggleButtonContainer.element] - HTML element for toggle button container\n */\n\n/**\n * @import { Schema } from 'govuk-frontend/dist/govuk/common/configuration.mjs'\n */\n","import { ConfigurableComponent } from 'govuk-frontend'\n\n/**\n * @augments {ConfigurableComponent<SortableTableConfig>}\n */\nexport class SortableTable extends ConfigurableComponent {\n  /**\n   * @param {Element | null} $root - HTML element to use for sortable table\n   * @param {SortableTableConfig} [config] - Sortable table config\n   */\n  constructor($root, config = {}) {\n    super($root, config)\n\n    const $head = $root?.querySelector('thead')\n    const $body = $root?.querySelector('tbody')\n\n    if (!$head || !$body) {\n      return this\n    }\n\n    this.$head = $head\n    this.$body = $body\n    this.$caption = this.$root.querySelector('caption')\n\n    this.$upArrow = `<svg width=\"22\" height=\"22\" focusable=\"false\" aria-hidden=\"true\" role=\"img\" viewBox=\"0 0 22 22\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M6.5625 15.5L11 6.63125L15.4375 15.5H6.5625Z\" fill=\"currentColor\"/>\n</svg>`\n    this.$downArrow = `<svg width=\"22\" height=\"22\" focusable=\"false\" aria-hidden=\"true\" role=\"img\" viewBox=\"0 0 22 22\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M15.4375 7L11 15.8687L6.5625 7L15.4375 7Z\" fill=\"currentColor\"/>\n</svg>`\n    this.$upDownArrow = `<svg width=\"22\" height=\"22\" focusable=\"false\" aria-hidden=\"true\" role=\"img\" viewBox=\"0 0 22 22\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M8.1875 9.5L10.9609 3.95703L13.7344 9.5H8.1875Z\" fill=\"currentColor\"/>\n<path d=\"M13.7344 12.0781L10.9609 17.6211L8.1875 12.0781H13.7344Z\" fill=\"currentColor\"/>\n</svg>`\n\n    this.$headings = this.$head\n      ? Array.from(this.$head.querySelectorAll('th'))\n      : []\n\n    this.createHeadingButtons()\n    this.updateCaption()\n    this.updateDirectionIndicators()\n    this.createStatusBox()\n    this.initialiseSortedColumn()\n\n    this.$head.addEventListener('click', this.onSortButtonClick.bind(this))\n  }\n\n  createHeadingButtons() {\n    for (const $heading of this.$headings) {\n      if ($heading.hasAttribute('aria-sort')) {\n        this.createHeadingButton($heading)\n      }\n    }\n  }\n\n  /**\n   * @param {HTMLTableCellElement} $heading\n   */\n  createHeadingButton($heading) {\n    const index = this.$headings.indexOf($heading)\n    const $button = document.createElement('button')\n\n    $button.setAttribute('type', 'button')\n    $button.setAttribute('data-index', `${index}`)\n    $button.textContent = $heading.textContent\n\n    $heading.textContent = ''\n    $heading.appendChild($button)\n  }\n\n  createStatusBox() {\n    this.$status = document.createElement('div')\n\n    this.$status.setAttribute('aria-atomic', 'true')\n    this.$status.setAttribute('aria-live', 'polite')\n    this.$status.setAttribute('class', 'govuk-visually-hidden')\n    this.$status.setAttribute('role', 'status')\n\n    this.$root.insertAdjacentElement('afterend', this.$status)\n  }\n\n  initialiseSortedColumn() {\n    const $rows = this.getTableRowsArray()\n\n    const $heading = this.$root.querySelector(\n      'th[aria-sort=\"ascending\"], th[aria-sort=\"descending\"]'\n    )\n    const $sortButton = $heading?.querySelector('button')\n    const sortDirection = $heading?.getAttribute('aria-sort')\n\n    const columnNumber = Number.parseInt(\n      $sortButton?.getAttribute('data-index') ?? '0',\n      10\n    )\n\n    if (\n      !$heading ||\n      !$sortButton ||\n      !(sortDirection === 'ascending' || sortDirection === 'descending')\n    ) {\n      return\n    }\n\n    const $sortedRows = this.sort($rows, columnNumber, sortDirection)\n    this.addRows($sortedRows)\n  }\n\n  /**\n   * @param {MouseEvent} event - Click event\n   */\n  onSortButtonClick(event) {\n    const $target = /** @type {HTMLElement} */ (event.target)\n    const $button = $target.closest('button')\n\n    if (\n      !$button ||\n      !($button instanceof HTMLButtonElement) ||\n      !$button.parentElement\n    ) {\n      return\n    }\n\n    const $heading = $button.parentElement\n    const sortDirection = $heading.getAttribute('aria-sort')\n\n    const columnNumber = Number.parseInt(\n      $button?.getAttribute('data-index') ?? '0',\n      10\n    )\n\n    const newSortDirection =\n      sortDirection === 'none' || sortDirection === 'descending'\n        ? 'ascending'\n        : 'descending'\n\n    const $rows = this.getTableRowsArray()\n    const $sortedRows = this.sort($rows, columnNumber, newSortDirection)\n\n    this.addRows($sortedRows)\n    this.removeButtonStates()\n    this.updateButtonState($button, newSortDirection)\n    this.updateDirectionIndicators()\n  }\n\n  updateCaption() {\n    if (!this.$caption) {\n      return\n    }\n\n    let assistiveText = this.$caption.querySelector('.govuk-visually-hidden')\n    if (assistiveText) {\n      return\n    }\n\n    assistiveText = document.createElement('span')\n    assistiveText.classList.add('govuk-visually-hidden')\n    assistiveText.textContent = '(column headers with buttons are sortable).'\n\n    this.$caption.appendChild(assistiveText)\n  }\n\n  /**\n   * @param {HTMLButtonElement} $button\n   * @param {string} direction\n   */\n  updateButtonState($button, direction) {\n    if (!(direction === 'ascending' || direction === 'descending')) {\n      return\n    }\n\n    $button.parentElement.setAttribute('aria-sort', direction)\n    let message = this.config.statusMessage\n    message = message.replace(/%heading%/, $button.textContent)\n    message = message.replace(/%direction%/, this.config[`${direction}Text`])\n    this.$status.textContent = message\n  }\n\n  updateDirectionIndicators() {\n    for (const $heading of this.$headings) {\n      const $button = /** @type {HTMLButtonElement} */ (\n        $heading.querySelector('button')\n      )\n      if ($heading.hasAttribute('aria-sort') && $button) {\n        const direction = $heading.getAttribute('aria-sort')\n        $button.querySelector('svg')?.remove()\n\n        switch (direction) {\n          case 'ascending':\n            $button.insertAdjacentHTML('beforeend', this.$upArrow)\n            break\n          case 'descending':\n            $button.insertAdjacentHTML('beforeend', this.$downArrow)\n            break\n          default:\n            $button.insertAdjacentHTML('beforeend', this.$upDownArrow)\n        }\n      }\n    }\n  }\n\n  removeButtonStates() {\n    for (const $heading of this.$headings) {\n      $heading.setAttribute('aria-sort', 'none')\n    }\n  }\n\n  /**\n   * @param {HTMLTableRowElement[]} $rows\n   */\n  addRows($rows) {\n    for (const $row of $rows) {\n      this.$body.append($row)\n    }\n  }\n\n  getTableRowsArray() {\n    return Array.from(this.$body.querySelectorAll('tr'))\n  }\n\n  /**\n   * @param {HTMLTableRowElement[]} $rows\n   * @param {number} columnNumber\n   * @param {string} sortDirection\n   */\n  sort($rows, columnNumber, sortDirection) {\n    return $rows.sort(($rowA, $rowB) => {\n      const $tdA = $rowA.querySelectorAll('td, th')[columnNumber]\n      const $tdB = $rowB.querySelectorAll('td, th')[columnNumber]\n\n      if (\n        !$tdA ||\n        !$tdB ||\n        !($tdA instanceof HTMLElement) ||\n        !($tdB instanceof HTMLElement)\n      ) {\n        return 0\n      }\n\n      const valueA =\n        sortDirection === 'ascending'\n          ? this.getCellValue($tdA)\n          : this.getCellValue($tdB)\n\n      const valueB =\n        sortDirection === 'ascending'\n          ? this.getCellValue($tdB)\n          : this.getCellValue($tdA)\n\n      return !(typeof valueA === 'number' && typeof valueB === 'number')\n        ? valueA.toString().localeCompare(valueB.toString())\n        : valueA - valueB\n    })\n  }\n\n  /**\n   * @param {HTMLElement} $cell\n   */\n  getCellValue($cell) {\n    const val = $cell.getAttribute('data-sort-value') || $cell.innerHTML\n    const valAsNumber = Number(val)\n\n    return Number.isFinite(valAsNumber)\n      ? valAsNumber // Exclude invalid numbers, infinity etc\n      : val\n  }\n\n  /**\n   * Name for the component used when initialising using data-module attributes.\n   */\n  static moduleName = 'moj-sortable-table'\n\n  /**\n   * Sortable table config\n   *\n   * @type {SortableTableConfig}\n   */\n  static defaults = Object.freeze({\n    statusMessage: 'Sort by %heading% (%direction%)',\n    ascendingText: 'ascending',\n    descendingText: 'descending'\n  })\n\n  /**\n   * Sortable table config schema\n   *\n   * @satisfies {Schema<SortableTableConfig>}\n   */\n  static schema = Object.freeze(\n    /** @type {const} */ ({\n      properties: {\n        statusMessage: { type: 'string' },\n        ascendingText: { type: 'string' },\n        descendingText: { type: 'string' }\n      }\n    })\n  )\n}\n\n/**\n * Sortable table config\n *\n * @typedef {object} SortableTableConfig\n * @property {string} [statusMessage] - Status message\n * @property {string} [ascendingText] - Ascending text\n * @property {string} [descendingText] - Descending text\n */\n\n/**\n * @import { Schema } from 'govuk-frontend/dist/govuk/common/configuration.mjs'\n */\n","import { createAll } from 'govuk-frontend'\n\nimport { version } from './common/moj-frontend-version.mjs'\nimport { AddAnother } from './components/add-another/add-another.mjs'\nimport { Alert } from './components/alert/alert.mjs'\nimport { ButtonMenu } from './components/button-menu/button-menu.mjs'\nimport { DatePicker } from './components/date-picker/date-picker.mjs'\nimport { FilterToggleButton } from './components/filter-toggle-button/filter-toggle-button.mjs'\nimport { FormValidator } from './components/form-validator/form-validator.mjs'\nimport { MultiFileUpload } from './components/multi-file-upload/multi-file-upload.mjs'\nimport { MultiSelect } from './components/multi-select/multi-select.mjs'\nimport { PasswordReveal } from './components/password-reveal/password-reveal.mjs'\nimport { RichTextEditor } from './components/rich-text-editor/rich-text-editor.mjs'\nimport { SearchToggle } from './components/search-toggle/search-toggle.mjs'\nimport { SortableTable } from './components/sortable-table/sortable-table.mjs'\n\n/**\n * @param {Config} [config]\n */\nfunction initAll(config) {\n  for (const Component of [\n    AddAnother,\n    Alert,\n    ButtonMenu,\n    DatePicker,\n    MultiSelect,\n    PasswordReveal,\n    RichTextEditor,\n    SearchToggle,\n    SortableTable\n  ]) {\n    createAll(Component, undefined, config)\n  }\n}\n\nexport {\n  initAll,\n  version,\n\n  // Components\n  AddAnother,\n  Alert,\n  ButtonMenu,\n  DatePicker,\n  FilterToggleButton,\n  FormValidator,\n  MultiFileUpload,\n  MultiSelect,\n  PasswordReveal,\n  RichTextEditor,\n  SearchToggle,\n  SortableTable\n}\n\n/**\n * @typedef {Parameters<typeof GOVUKFrontend.initAll>[0]} Config\n */\n\n/**\n * @import * as GOVUKFrontend from 'govuk-frontend'\n */\n"],"names":["isInitialised","$root","moduleName","HTMLElement","hasAttribute","isSupported","$scope","document","body","classList","contains","isArray","option","Array","isObject","formatErrorMessage","Component","message","GOVUKFrontendError","Error","constructor","args","name","SupportError","supportMessage","HTMLScriptElement","prototype","ConfigError","ElementError","messageOrOptions","component","identifier","element","expectedType","InitError","componentOrMessage","_$root","childConstructor","elementType","checkSupport","checkInitialised","setAttribute","configOverride","Symbol","for","ConfigurableComponent","param","config","_config","defaults","datasetConfig","normaliseDataset","dataset","mergeConfigs","normaliseString","value","property","trimmedValue","trim","output","outputType","type","includes","length","isFinite","Number","schema","out","entries","Object","properties","entry","namespace","field","toString","extractConfigByNamespace","configObjects","formattedConfigObject","configObject","key","keys","override","newObject","current","keyParts","split","index","createAll","createAllOptions","onError","_createAllOptions$sco","scope","$elements","querySelectorAll","console","log","from","map","$element","error","filter","Boolean","version","AddAnother","addEventListener","onRemoveButtonClick","bind","onAddButtonClick","$buttons","forEach","$button","HTMLButtonElement","event","target","$items","getItems","$item","getNewItem","updateAttributes","resetItem","$firstItem","hasRemoveButton","createRemoveButton","after","$input","querySelector","HTMLInputElement","focus","item","cloneNode","isValidInputElement","getAttribute","id","originalId","replace","$label","parentElement","closest","HTMLLabelElement","htmlFor","createElement","add","textContent","append","HTMLSelectElement","selectedIndex","HTMLTextAreaElement","checked","remove","focusHeading","$heading","setFocus","options","_options$onBeforeFocu","isFocusable","onFocus","onBlur","once","_options$onBlur","call","removeAttribute","onBeforeFocus","removeAttributeValue","attr","re","m","RegExp","match","addAttributeValue","test","getPreviousSibling","selector","$sibling","previousElementSibling","matches","findNearestMatchingElement","$currentElement","Alert","disableAutoFocus","$dismissButton","dismissible","innerHTML","dismissText","Node","dimiss","$elementToRecieveFocus","focusOnDismissSelector","$nextSibling","nextElementSibling","freeze","ButtonMenu","children","className","startsWith","buttonClasses","initMenu","$menu","createMenu","insertAdjacentHTML","toggleTemplate","setupMenuItems","$menuToggle","toggleMenu","handleKeyDown","closeMenu","hidden","alignMenu","appendChild","firstChild","$menuItem","$listItem","insertBefore","tagName","setTimeout","buttonText","isOpen","preventDefault","keyboardEvent","detail","focusIndex","openMenu","focusItem","moveFocus","currentFocusIndex","$activeElement","activeElement","$menuItems","HTMLAnchorElement","indexOf","DatePicker","_this$config$input$el","input","dayLabels","monthLabels","currentDate","Date","setHours","calendarDays","excludedDates","excludedDays","buttonClass","selectedDayButtonClass","currentDayButtonClass","todayButtonClass","setOptions","initControls","$dialog","createDialog","createCalendarHeaders","$componentWrapper","$inputWrapper","insertAdjacentElement","$calendarButton","$dialogTitle","createCalendar","$prevMonthButton","$prevYearButton","$nextMonthButton","$nextYearButton","$cancelButton","$okButton","focusPreviousMonth","focusPreviousYear","focusNextMonth","focusNextYear","closeDialog","selectDate","$dialogButtons","$firstButtonInDialog","$lastButtonInDialog","firstButtonKeydown","lastButtonKeydown","toggleDialog","stopPropagation","backgroundClick","updateCalendar","titleId","dialogTemplate","$tbody","dayCount","i","$row","insertRow","j","$cell","$dateButton","calendarDay","DSCalendarDay","push","day","html","substring","$headerRow","leadingZeros","ret","setMinAndMaxDatesOnCalendar","setExcludedDates","setExcludedDays","setWeekStartDay","minDate","formattedDateFromString","maxDate","parseDateRangeString","reduce","dates","items","concat","date","datestring","startDate","endDate","d","getTime","setDate","getDate","weekDays","toLowerCase","weekStartDay","unshift","pop","weekStartDayParam","isExcludedDate","excludedDate","toDateString","getDay","dateString","fallback","formattedDate","dateFormatPattern","exec","month","year","formattedDateFromDate","getMonth","getFullYear","formattedDateHuman","shiftKey","firstOfMonth","dayOfWeek","thisDay","disabled","update","setCurrentDate","calendarDayDate","today","inputDate","enabledDays","window","getComputedStyle","display","innerText","changeEvent","Event","bubbles","cancelable","dispatchEvent","openDialog","offsetWidth","style","right","top","offsetHeight","goToDate","focusNextDay","focusPreviousDay","focusNextWeek","focusPreviousWeek","focusFirstDayOfWeek","firstDayOfWeekIndex","diff","focusLastDayOfWeek","lastDayOfWeekIndex","setMonth","setFullYear","row","column","picker","keyPress","click","label","accessibleLabel","calendarNavKey","FilterToggleButton","_this$config$toggleBu","_this$config$closeBut","$toggleButtonContainer","toggleButtonContainer","$closeButtonContainer","closeButtonContainer","createToggleButton","setupResponsiveChecks","startHidden","hideMenu","mq","matchMedia","bigModeMediaQuery","addListener","checkMode","$menuButton","toggleButton","classes","showText","onMenuButtonClick","enableBigMode","enableSmallMode","showMenu","removeCloseButton","addCloseButton","$closeButton","closeButton","text","onCloseClick","hideText","toggle","FormValidator","$summary","summary","errors","validators","originalTitle","title","onSubmit","escapeHtml","string","String","entityMap","resetTitle","updateTitle","showSummary","getSummaryHtml","fieldName","hideSummary","removeInlineErrors","validate","showInlineErrors","showInlineError","$errorSpan","$control","$fieldset","$fieldContainer","$legend","removeInlineError","addValidator","rules","elements","namedItem","validator","validatorReturnValue","method","params","MultiFileUpload","_this$config$feedback","$feedbackContainer","feedbackContainer","setupFileInput","setupDropzone","setupLabel","setupStatusBox","onFileDeleteClick","$dropzone","onDragOver","onDragLeave","onDrop","$fileInput","replaceWith","dropzoneButtonText","$hint","dropzoneHintText","onFileChange","onFileFocus","onFileBlur","$status","uploadStatusText","uploadFiles","dataTransfer","files","file","uploadFile","getSuccessHtml","success","messageHtml","getErrorHtml","getFileRow","getDeleteButton","filename","originalname","hooks","entryHook","$message","$actions","$progress","formData","FormData","xhr","XMLHttpRequest","onLoad","status","response","messageText","exitHook","responseText","statusText","errorHook","upload","lengthComputable","percentComplete","Math","round","loaded","total","open","uploadUrl","responseType","send","$rows","$rowDelete","find","deleteHook","undefined","deleteUrl","setRequestHeader","JSON","stringify","isDragAndDropSupported","isFormDataSupported","isFileApiSupported","div","ondrop","MultiSelect","_this$config$checkbox","$container","idPrefix","$checkboxes","checkboxes","setupToggle","$toggleButton","$toggle","onButtonClick","onCheckboxClick","$span","uncheckAll","checkAll","PasswordReveal","createButton","$group","RichTextEditor","$textarea","createToolbar","hideDefault","configureToolbar","left","up","down","$content","onEditorInput","onLabelClick","$toolbar","onToolbarKeydown","$focusableButton","keyCode","button","$nextButton","$previousButton","getToolbarHtml","toolbar","bold","italic","underline","bullets","numbers","getEnhancedHtml","currentTarget","execCommand","getContent","updateTextarea","documentElement","SearchToggle","_this$config$searchCo","$searchContainer","searchContainer","svg","onToggleButtonClick","onDocumentClick","SortableTable","$head","$body","$caption","$upArrow","$downArrow","$upDownArrow","$headings","createHeadingButtons","updateCaption","updateDirectionIndicators","createStatusBox","initialiseSortedColumn","onSortButtonClick","createHeadingButton","_$sortButton$getAttri","getTableRowsArray","$sortButton","sortDirection","columnNumber","parseInt","$sortedRows","sort","addRows","_$button$getAttribute","$target","newSortDirection","removeButtonStates","updateButtonState","assistiveText","direction","statusMessage","_$button$querySelecto","$rowA","$rowB","$tdA","$tdB","valueA","getCellValue","valueB","localeCompare","val","valAsNumber","ascendingText","descendingText","initAll"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4]}