{"version":3,"file":"multi-file-upload.bundle.mjs","sources":["../../../../node_modules/govuk-frontend/dist/govuk/common/index.mjs","../../../../node_modules/govuk-frontend/dist/govuk/errors/index.mjs","../../../../node_modules/govuk-frontend/dist/govuk/component.mjs","../../../../node_modules/govuk-frontend/dist/govuk/common/configuration.mjs","../../../../src/moj/components/multi-file-upload/multi-file-upload.mjs"],"sourcesContent":["function getFragmentFromUrl(url) {\n  if (!url.includes('#')) {\n    return undefined;\n  }\n  return url.split('#').pop();\n}\nfunction getBreakpoint(name) {\n  const property = `--govuk-frontend-breakpoint-${name}`;\n  const value = window.getComputedStyle(document.documentElement).getPropertyValue(property);\n  return {\n    property,\n    value: value || undefined\n  };\n}\nfunction setFocus($element, options = {}) {\n  var _options$onBeforeFocu;\n  const isFocusable = $element.getAttribute('tabindex');\n  if (!isFocusable) {\n    $element.setAttribute('tabindex', '-1');\n  }\n  function onFocus() {\n    $element.addEventListener('blur', onBlur, {\n      once: true\n    });\n  }\n  function onBlur() {\n    var _options$onBlur;\n    (_options$onBlur = options.onBlur) == null || _options$onBlur.call($element);\n    if (!isFocusable) {\n      $element.removeAttribute('tabindex');\n    }\n  }\n  $element.addEventListener('focus', onFocus, {\n    once: true\n  });\n  (_options$onBeforeFocu = options.onBeforeFocus) == null || _options$onBeforeFocu.call($element);\n  $element.focus();\n}\nfunction isInitialised($root, moduleName) {\n  return $root instanceof HTMLElement && $root.hasAttribute(`data-${moduleName}-init`);\n}\n\n/**\n * Checks if GOV.UK Frontend is supported on this page\n *\n * Some browsers will load and run our JavaScript but GOV.UK Frontend\n * won't be supported.\n *\n * @param {HTMLElement | null} [$scope] - (internal) `<body>` HTML element checked for browser support\n * @returns {boolean} Whether GOV.UK Frontend is supported on this page\n */\nfunction isSupported($scope = document.body) {\n  if (!$scope) {\n    return false;\n  }\n  return $scope.classList.contains('govuk-frontend-supported');\n}\nfunction isArray(option) {\n  return Array.isArray(option);\n}\nfunction isObject(option) {\n  return !!option && typeof option === 'object' && !isArray(option);\n}\nfunction formatErrorMessage(Component, message) {\n  return `${Component.moduleName}: ${message}`;\n}\n/**\n * @typedef ComponentWithModuleName\n * @property {string} moduleName - Name of the component\n */\n/**\n * @import { ObjectNested } from './configuration.mjs'\n */\n\nexport { formatErrorMessage, getBreakpoint, getFragmentFromUrl, isInitialised, isObject, isSupported, setFocus };\n//# sourceMappingURL=index.mjs.map\n","import { formatErrorMessage } from '../common/index.mjs';\n\nclass GOVUKFrontendError extends Error {\n  constructor(...args) {\n    super(...args);\n    this.name = 'GOVUKFrontendError';\n  }\n}\nclass SupportError extends GOVUKFrontendError {\n  /**\n   * Checks if GOV.UK Frontend is supported on this page\n   *\n   * @param {HTMLElement | null} [$scope] - HTML element `<body>` checked for browser support\n   */\n  constructor($scope = document.body) {\n    const supportMessage = 'noModule' in HTMLScriptElement.prototype ? 'GOV.UK Frontend initialised without `<body class=\"govuk-frontend-supported\">` from template `<script>` snippet' : 'GOV.UK Frontend is not supported in this browser';\n    super($scope ? supportMessage : 'GOV.UK Frontend initialised without `<script type=\"module\">`');\n    this.name = 'SupportError';\n  }\n}\nclass ConfigError extends GOVUKFrontendError {\n  constructor(...args) {\n    super(...args);\n    this.name = 'ConfigError';\n  }\n}\nclass ElementError extends GOVUKFrontendError {\n  constructor(messageOrOptions) {\n    let message = typeof messageOrOptions === 'string' ? messageOrOptions : '';\n    if (typeof messageOrOptions === 'object') {\n      const {\n        component,\n        identifier,\n        element,\n        expectedType\n      } = messageOrOptions;\n      message = identifier;\n      message += element ? ` is not of type ${expectedType != null ? expectedType : 'HTMLElement'}` : ' not found';\n      message = formatErrorMessage(component, message);\n    }\n    super(message);\n    this.name = 'ElementError';\n  }\n}\nclass InitError extends GOVUKFrontendError {\n  constructor(componentOrMessage) {\n    const message = typeof componentOrMessage === 'string' ? componentOrMessage : formatErrorMessage(componentOrMessage, `Root element (\\`$root\\`) already initialised`);\n    super(message);\n    this.name = 'InitError';\n  }\n}\n/**\n * @import { ComponentWithModuleName } from '../common/index.mjs'\n */\n\nexport { ConfigError, ElementError, GOVUKFrontendError, InitError, SupportError };\n//# sourceMappingURL=index.mjs.map\n","import { isInitialised, isSupported } from './common/index.mjs';\nimport { InitError, ElementError, SupportError } from './errors/index.mjs';\n\nclass Component {\n  /**\n   * Returns the root element of the component\n   *\n   * @protected\n   * @returns {RootElementType} - the root element of component\n   */\n  get $root() {\n    return this._$root;\n  }\n  constructor($root) {\n    this._$root = void 0;\n    const childConstructor = this.constructor;\n    if (typeof childConstructor.moduleName !== 'string') {\n      throw new InitError(`\\`moduleName\\` not defined in component`);\n    }\n    if (!($root instanceof childConstructor.elementType)) {\n      throw new ElementError({\n        element: $root,\n        component: childConstructor,\n        identifier: 'Root element (`$root`)',\n        expectedType: childConstructor.elementType.name\n      });\n    } else {\n      this._$root = $root;\n    }\n    childConstructor.checkSupport();\n    this.checkInitialised();\n    const moduleName = childConstructor.moduleName;\n    this.$root.setAttribute(`data-${moduleName}-init`, '');\n  }\n  checkInitialised() {\n    const constructor = this.constructor;\n    const moduleName = constructor.moduleName;\n    if (moduleName && isInitialised(this.$root, moduleName)) {\n      throw new InitError(constructor);\n    }\n  }\n  static checkSupport() {\n    if (!isSupported()) {\n      throw new SupportError();\n    }\n  }\n}\n\n/**\n * @typedef ChildClass\n * @property {string} moduleName - The module name that'll be looked for in the DOM when initialising the component\n */\n\n/**\n * @typedef {typeof Component & ChildClass} ChildClassConstructor\n */\nComponent.elementType = HTMLElement;\n\nexport { Component };\n//# sourceMappingURL=component.mjs.map\n","import { Component } from '../component.mjs';\nimport { ConfigError } from '../errors/index.mjs';\nimport { isObject, formatErrorMessage } from './index.mjs';\n\nconst configOverride = Symbol.for('configOverride');\nclass ConfigurableComponent extends Component {\n  [configOverride](param) {\n    return {};\n  }\n\n  /**\n   * Returns the root element of the component\n   *\n   * @protected\n   * @returns {ConfigurationType} - the root element of component\n   */\n  get config() {\n    return this._config;\n  }\n  constructor($root, config) {\n    super($root);\n    this._config = void 0;\n    const childConstructor = this.constructor;\n    if (!isObject(childConstructor.defaults)) {\n      throw new ConfigError(formatErrorMessage(childConstructor, 'Config passed as parameter into constructor but no defaults defined'));\n    }\n    const datasetConfig = normaliseDataset(childConstructor, this._$root.dataset);\n    this._config = mergeConfigs(childConstructor.defaults, config != null ? config : {}, this[configOverride](datasetConfig), datasetConfig);\n  }\n}\nfunction normaliseString(value, property) {\n  const trimmedValue = value ? value.trim() : '';\n  let output;\n  let outputType = property == null ? void 0 : property.type;\n  if (!outputType) {\n    if (['true', 'false'].includes(trimmedValue)) {\n      outputType = 'boolean';\n    }\n    if (trimmedValue.length > 0 && isFinite(Number(trimmedValue))) {\n      outputType = 'number';\n    }\n  }\n  switch (outputType) {\n    case 'boolean':\n      output = trimmedValue === 'true';\n      break;\n    case 'number':\n      output = Number(trimmedValue);\n      break;\n    default:\n      output = value;\n  }\n  return output;\n}\nfunction normaliseDataset(Component, dataset) {\n  if (!isObject(Component.schema)) {\n    throw new ConfigError(formatErrorMessage(Component, 'Config passed as parameter into constructor but no schema defined'));\n  }\n  const out = {};\n  const entries = Object.entries(Component.schema.properties);\n  for (const entry of entries) {\n    const [namespace, property] = entry;\n    const field = namespace.toString();\n    if (field in dataset) {\n      out[field] = normaliseString(dataset[field], property);\n    }\n    if ((property == null ? void 0 : property.type) === 'object') {\n      out[field] = extractConfigByNamespace(Component.schema, dataset, namespace);\n    }\n  }\n  return out;\n}\nfunction mergeConfigs(...configObjects) {\n  const formattedConfigObject = {};\n  for (const configObject of configObjects) {\n    for (const key of Object.keys(configObject)) {\n      const option = formattedConfigObject[key];\n      const override = configObject[key];\n      if (isObject(option) && isObject(override)) {\n        formattedConfigObject[key] = mergeConfigs(option, override);\n      } else {\n        formattedConfigObject[key] = override;\n      }\n    }\n  }\n  return formattedConfigObject;\n}\nfunction validateConfig(schema, config) {\n  const validationErrors = [];\n  for (const [name, conditions] of Object.entries(schema)) {\n    const errors = [];\n    if (Array.isArray(conditions)) {\n      for (const {\n        required,\n        errorMessage\n      } of conditions) {\n        if (!required.every(key => !!config[key])) {\n          errors.push(errorMessage);\n        }\n      }\n      if (name === 'anyOf' && !(conditions.length - errors.length >= 1)) {\n        validationErrors.push(...errors);\n      }\n    }\n  }\n  return validationErrors;\n}\nfunction extractConfigByNamespace(schema, dataset, namespace) {\n  const property = schema.properties[namespace];\n  if ((property == null ? void 0 : property.type) !== 'object') {\n    return;\n  }\n  const newObject = {\n    [namespace]: {}\n  };\n  for (const [key, value] of Object.entries(dataset)) {\n    let current = newObject;\n    const keyParts = key.split('.');\n    for (const [index, name] of keyParts.entries()) {\n      if (isObject(current)) {\n        if (index < keyParts.length - 1) {\n          if (!isObject(current[name])) {\n            current[name] = {};\n          }\n          current = current[name];\n        } else if (key !== namespace) {\n          current[name] = normaliseString(value);\n        }\n      }\n    }\n  }\n  return newObject[namespace];\n}\n/**\n * Schema for component config\n *\n * @template {Partial<Record<keyof ConfigurationType, unknown>>} ConfigurationType\n * @typedef {object} Schema\n * @property {Record<keyof ConfigurationType, SchemaProperty | undefined>} properties - Schema properties\n * @property {SchemaCondition<ConfigurationType>[]} [anyOf] - List of schema conditions\n */\n/**\n * Schema property for component config\n *\n * @typedef {object} SchemaProperty\n * @property {'string' | 'boolean' | 'number' | 'object'} type - Property type\n */\n/**\n * Schema condition for component config\n *\n * @template {Partial<Record<keyof ConfigurationType, unknown>>} ConfigurationType\n * @typedef {object} SchemaCondition\n * @property {(keyof ConfigurationType)[]} required - List of required config fields\n * @property {string} errorMessage - Error message when required config fields not provided\n */\n/**\n * @template {Partial<Record<keyof ConfigurationType, unknown>>} [ConfigurationType=ObjectNested]\n * @typedef ChildClass\n * @property {string} moduleName - The module name that'll be looked for in the DOM when initialising the component\n * @property {Schema<ConfigurationType>} [schema] - The schema of the component configuration\n * @property {ConfigurationType} [defaults] - The default values of the configuration of the component\n */\n/**\n * @template {Partial<Record<keyof ConfigurationType, unknown>>} [ConfigurationType=ObjectNested]\n * @typedef {typeof Component & ChildClass<ConfigurationType>} ChildClassConstructor<ConfigurationType>\n */\n\nexport { ConfigurableComponent, configOverride, extractConfigByNamespace, mergeConfigs, normaliseDataset, normaliseString, validateConfig };\n//# sourceMappingURL=configuration.mjs.map\n","/* eslint-disable @typescript-eslint/no-empty-function */\n\nimport { ConfigurableComponent } from 'govuk-frontend'\n\n/**\n * @augments {ConfigurableComponent<MultiFileUploadConfig>}\n */\nexport class MultiFileUpload extends ConfigurableComponent {\n  /**\n   * @param {Element | null} $root - HTML element to use for multi file upload\n   * @param {MultiFileUploadConfig} [config] - Multi file upload config\n   */\n  constructor($root, config = {}) {\n    super($root, config)\n\n    if (!MultiFileUpload.isSupported()) {\n      return this\n    }\n\n    const $feedbackContainer =\n      this.config.feedbackContainer.element ??\n      this.$root.querySelector(this.config.feedbackContainer.selector)\n\n    if (!$feedbackContainer || !($feedbackContainer instanceof HTMLElement)) {\n      return this\n    }\n\n    this.$feedbackContainer = $feedbackContainer\n\n    this.setupFileInput()\n    this.setupDropzone()\n    this.setupLabel()\n    this.setupStatusBox()\n\n    this.$root.addEventListener('click', this.onFileDeleteClick.bind(this))\n    this.$root.classList.add('moj-multi-file-upload--enhanced')\n  }\n\n  setupDropzone() {\n    this.$dropzone = document.createElement('div')\n    this.$dropzone.classList.add('moj-multi-file-upload__dropzone')\n\n    this.$dropzone.addEventListener('dragover', this.onDragOver.bind(this))\n    this.$dropzone.addEventListener('dragleave', this.onDragLeave.bind(this))\n    this.$dropzone.addEventListener('drop', this.onDrop.bind(this))\n\n    this.$fileInput.replaceWith(this.$dropzone)\n    this.$dropzone.appendChild(this.$fileInput)\n  }\n\n  setupLabel() {\n    const $label = document.createElement('label')\n    $label.setAttribute('for', this.$fileInput.id)\n    $label.classList.add('govuk-button', 'govuk-button--secondary')\n    $label.textContent = this.config.dropzoneButtonText\n\n    const $hint = document.createElement('p')\n    $hint.classList.add('govuk-body')\n    $hint.textContent = this.config.dropzoneHintText\n\n    this.$label = $label\n    this.$dropzone.append($hint)\n    this.$dropzone.append($label)\n  }\n\n  setupFileInput() {\n    this.$fileInput = /** @type {HTMLInputElement} */ (\n      this.$root.querySelector('.moj-multi-file-upload__input')\n    )\n    this.$fileInput.addEventListener('change', this.onFileChange.bind(this))\n    this.$fileInput.addEventListener('focus', this.onFileFocus.bind(this))\n    this.$fileInput.addEventListener('blur', this.onFileBlur.bind(this))\n  }\n\n  setupStatusBox() {\n    this.$status = document.createElement('div')\n    this.$status.classList.add('govuk-visually-hidden')\n    this.$status.setAttribute('aria-live', 'polite')\n    this.$status.setAttribute('role', 'status')\n    this.$dropzone.append(this.$status)\n  }\n\n  /**\n   * @param {DragEvent} event - Drag event\n   */\n  onDragOver(event) {\n    event.preventDefault()\n    this.$dropzone.classList.add('moj-multi-file-upload--dragover')\n  }\n\n  onDragLeave() {\n    this.$dropzone.classList.remove('moj-multi-file-upload--dragover')\n  }\n\n  /**\n   * @param {DragEvent} event - Drag event\n   */\n  onDrop(event) {\n    event.preventDefault()\n    this.$dropzone.classList.remove('moj-multi-file-upload--dragover')\n    this.$feedbackContainer.classList.remove('moj-hidden')\n    this.$status.textContent = this.config.uploadStatusText\n    this.uploadFiles(event.dataTransfer.files)\n  }\n\n  /**\n   * @param {FileList} files - File list\n   */\n  uploadFiles(files) {\n    for (const file of Array.from(files)) {\n      this.uploadFile(file)\n    }\n  }\n\n  onFileChange() {\n    this.$feedbackContainer.classList.remove('moj-hidden')\n    this.$status.textContent = this.config.uploadStatusText\n    this.uploadFiles(this.$fileInput.files)\n\n    const $fileInput = this.$fileInput.cloneNode(true)\n    if (!$fileInput || !($fileInput instanceof HTMLInputElement)) {\n      return\n    }\n\n    $fileInput.value = ''\n    this.$fileInput.replaceWith($fileInput)\n\n    this.setupFileInput()\n    this.$fileInput.focus()\n  }\n\n  onFileFocus() {\n    this.$label.classList.add('moj-multi-file-upload--focused')\n  }\n\n  onFileBlur() {\n    this.$label.classList.remove('moj-multi-file-upload--focused')\n  }\n\n  /**\n   * @param {UploadResponseSuccess['success']} success\n   */\n  getSuccessHtml(success) {\n    return `<span class=\"moj-multi-file-upload__success\"> <svg class=\"moj-banner__icon\" fill=\"currentColor\" role=\"presentation\" focusable=\"false\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 25 25\" height=\"25\" width=\"25\"><path d=\"M25,6.2L8.7,23.2L0,14.1l4-4.2l4.7,4.9L21,2L25,6.2z\"/></svg>${success.messageHtml}</span>`\n  }\n\n  /**\n   * @param {UploadResponseError['error']} error\n   */\n  getErrorHtml(error) {\n    return `<span class=\"moj-multi-file-upload__error\"> <svg class=\"moj-banner__icon\" fill=\"currentColor\" role=\"presentation\" focusable=\"false\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 25 25\" height=\"25\" width=\"25\"><path d=\"M13.6,15.4h-2.3v-4.5h2.3V15.4z M13.6,19.8h-2.3v-2.2h2.3V19.8z M0,23.2h25L12.5,2L0,23.2z\"/></svg>${error.message}</span>`\n  }\n\n  /**\n   * @param {File} file\n   */\n  getFileRow(file) {\n    const $row = document.createElement('div')\n\n    $row.classList.add('govuk-summary-list__row', 'moj-multi-file-upload__row')\n\n    $row.innerHTML = `\n    <div class=\"govuk-summary-list__value moj-multi-file-upload__message\">\n      <span class=\"moj-multi-file-upload__filename\">${file.name}</span>\n      <span class=\"moj-multi-file-upload__progress\">0%</span>\n    </div>\n    <div class=\"govuk-summary-list__actions moj-multi-file-upload__actions\"></div>\n  `\n\n    return $row\n  }\n\n  /**\n   * @param {UploadResponseFile} file\n   */\n  getDeleteButton(file) {\n    const $button = document.createElement('button')\n\n    $button.setAttribute('type', 'button')\n    $button.setAttribute('name', 'delete')\n    $button.setAttribute('value', file.filename)\n\n    $button.classList.add(\n      'moj-multi-file-upload__delete',\n      'govuk-button',\n      'govuk-button--secondary',\n      'govuk-!-margin-bottom-0'\n    )\n\n    $button.innerHTML = `Delete <span class=\"govuk-visually-hidden\">${file.originalname}</span>`\n\n    return $button\n  }\n\n  /**\n   * @param {File} file\n   */\n  uploadFile(file) {\n    this.config.hooks.entryHook(this, file)\n\n    const $item = this.getFileRow(file)\n    const $message = $item.querySelector('.moj-multi-file-upload__message')\n    const $actions = $item.querySelector('.moj-multi-file-upload__actions')\n    const $progress = $item.querySelector('.moj-multi-file-upload__progress')\n\n    const formData = new FormData()\n    formData.append('documents', file)\n\n    this.$feedbackContainer\n      .querySelector('.moj-multi-file-upload__list')\n      .append($item)\n\n    const xhr = new XMLHttpRequest()\n\n    const onLoad = () => {\n      if (\n        xhr.status < 200 ||\n        xhr.status >= 300 ||\n        !('success' in xhr.response)\n      ) {\n        return onError()\n      }\n\n      $message.innerHTML = this.getSuccessHtml(xhr.response.success)\n      this.$status.textContent = xhr.response.success.messageText\n\n      $actions.append(this.getDeleteButton(xhr.response.file))\n      this.config.hooks.exitHook(this, file, xhr, xhr.responseText)\n    }\n\n    const onError = () => {\n      const error = new Error(\n        xhr.response && 'error' in xhr.response\n          ? xhr.response.error.message\n          : xhr.statusText || 'Upload failed'\n      )\n\n      $message.innerHTML = this.getErrorHtml(error)\n      this.$status.textContent = error.message\n\n      this.config.hooks.errorHook(this, file, xhr, xhr.responseText, error)\n    }\n\n    xhr.addEventListener('load', onLoad)\n    xhr.addEventListener('error', onError)\n\n    xhr.upload.addEventListener('progress', (event) => {\n      if (!event.lengthComputable) {\n        return\n      }\n\n      const percentComplete = Math.round((event.loaded / event.total) * 100)\n      $progress.textContent = ` ${percentComplete}%`\n    })\n\n    xhr.open('POST', this.config.uploadUrl)\n    xhr.responseType = 'json'\n\n    xhr.send(formData)\n  }\n\n  /**\n   * @param {MouseEvent} event - Click event\n   */\n  onFileDeleteClick(event) {\n    const $button = event.target\n\n    if (\n      !$button ||\n      !($button instanceof HTMLButtonElement) ||\n      !$button.classList.contains('moj-multi-file-upload__delete')\n    ) {\n      return\n    }\n\n    event.preventDefault() // if user refreshes page and then deletes\n\n    const xhr = new XMLHttpRequest()\n\n    xhr.addEventListener('load', () => {\n      if (xhr.status < 200 || xhr.status >= 300) {\n        return\n      }\n\n      const $rows = Array.from(\n        this.$feedbackContainer.querySelectorAll('.moj-multi-file-upload__row')\n      )\n\n      if ($rows.length === 1) {\n        this.$feedbackContainer.classList.add('moj-hidden')\n      }\n\n      const $rowDelete = $rows.find(($row) => $row.contains($button))\n      if ($rowDelete) $rowDelete.remove()\n\n      this.config.hooks.deleteHook(this, undefined, xhr, xhr.responseText)\n    })\n\n    xhr.open('POST', this.config.deleteUrl)\n    xhr.setRequestHeader('Content-Type', 'application/json')\n    xhr.responseType = 'json'\n\n    xhr.send(\n      JSON.stringify({\n        [$button.name]: $button.value\n      })\n    )\n  }\n\n  static isSupported() {\n    return (\n      this.isDragAndDropSupported() &&\n      this.isFormDataSupported() &&\n      this.isFileApiSupported()\n    )\n  }\n\n  static isDragAndDropSupported() {\n    const div = document.createElement('div')\n    return typeof div.ondrop !== 'undefined'\n  }\n\n  static isFormDataSupported() {\n    return typeof FormData === 'function'\n  }\n\n  static isFileApiSupported() {\n    const input = document.createElement('input')\n    input.type = 'file'\n    return typeof input.files !== 'undefined'\n  }\n\n  /**\n   * Name for the component used when initialising using data-module attributes.\n   */\n  static moduleName = 'moj-multi-file-upload'\n\n  /**\n   * Multi file upload default config\n   *\n   * @type {MultiFileUploadConfig}\n   */\n  static defaults = Object.freeze({\n    uploadStatusText: 'Uploading files, please wait',\n    dropzoneHintText: 'Drag and drop files here or',\n    dropzoneButtonText: 'Choose files',\n    feedbackContainer: {\n      selector: '.moj-multi-file__uploaded-files'\n    },\n    hooks: {\n      entryHook: () => {},\n      exitHook: () => {},\n      errorHook: () => {},\n      deleteHook: () => {}\n    }\n  })\n\n  /**\n   * Multi file upload config schema\n   *\n   * @satisfies {Schema<MultiFileUploadConfig>}\n   */\n  static schema = Object.freeze(\n    /** @type {const} */ ({\n      properties: {\n        uploadUrl: { type: 'string' },\n        deleteUrl: { type: 'string' },\n        uploadStatusText: { type: 'string' },\n        dropzoneHintText: { type: 'string' },\n        dropzoneButtonText: { type: 'string' },\n        feedbackContainer: { type: 'object' },\n        hooks: { type: 'object' }\n      }\n    })\n  )\n}\n\n/**\n * Multi file upload config\n *\n * @typedef {object} MultiFileUploadConfig\n * @property {string} [uploadUrl] - File upload URL\n * @property {string} [deleteUrl] - File delete URL\n * @property {string} [uploadStatusText] - Upload status text\n * @property {string} [dropzoneHintText] - Dropzone hint text\n * @property {string} [dropzoneButtonText] - Dropzone button text\n * @property {object} [feedbackContainer] - Feedback container config\n * @property {string} [feedbackContainer.selector] - Selector for feedback container\n * @property {Element | null} [feedbackContainer.element] - HTML element for feedback container\n * @property {MultiFileUploadHooks} [hooks] - Upload hooks\n */\n\n/**\n * Multi file upload hooks\n *\n * @typedef {object} MultiFileUploadHooks\n * @property {OnUploadFileEntryHook} [entryHook] - File upload entry hook\n * @property {OnUploadFileExitHook} [exitHook] - File upload exit hook\n * @property {OnUploadFileErrorHook} [errorHook] - File upload error hook\n * @property {OnUploadFileDeleteHook} [deleteHook] - File delete hook\n */\n\n/**\n * Upload hook: File entry\n *\n * @callback OnUploadFileEntryHook\n * @param {InstanceType<typeof MultiFileUpload>} upload - Multi file upload\n * @param {File} file - File upload\n */\n\n/**\n * Upload hook: File exit\n *\n * @callback OnUploadFileExitHook\n * @param {InstanceType<typeof MultiFileUpload>} upload - Multi file upload\n * @param {File} file - File upload\n * @param {XMLHttpRequest} xhr - XMLHttpRequest\n * @param {string} textStatus - Text status\n */\n\n/**\n * Upload hook: File error\n *\n * @callback OnUploadFileErrorHook\n * @param {InstanceType<typeof MultiFileUpload>} upload - Multi file upload\n * @param {File} file - File upload\n * @param {XMLHttpRequest} xhr - XMLHttpRequest\n * @param {string} textStatus - Text status\n * @param {Error} errorThrown - Error thrown\n */\n\n/**\n * Upload hook: File delete\n *\n * @callback OnUploadFileDeleteHook\n * @param {InstanceType<typeof MultiFileUpload>} upload - Multi file upload\n * @param {File} [file] - File upload\n * @param {XMLHttpRequest} xhr - XMLHttpRequest\n * @param {string} textStatus - Text status\n */\n\n/**\n * @typedef {object} UploadResponseSuccess\n * @property {{ messageText: string, messageHtml: string }} success - Response success\n * @property {UploadResponseFile} file - Response file\n */\n\n/**\n * @typedef {object} UploadResponseError\n * @property {{ message: string }} error - Response error\n * @property {UploadResponseFile} file - Response file\n */\n\n/**\n * @typedef {object} UploadResponseFile\n * @property {string} filename - File name\n * @property {string} originalname - Original file name\n */\n\n/**\n * @import { Schema } from 'govuk-frontend/dist/govuk/common/configuration.mjs'\n */\n"],"names":["isInitialised","$root","moduleName","HTMLElement","hasAttribute","isSupported","$scope","document","body","classList","contains","isArray","option","Array","isObject","formatErrorMessage","Component","message","GOVUKFrontendError","Error","constructor","args","name","SupportError","supportMessage","HTMLScriptElement","prototype","ConfigError","ElementError","messageOrOptions","component","identifier","element","expectedType","InitError","componentOrMessage","_$root","childConstructor","elementType","checkSupport","checkInitialised","setAttribute","configOverride","Symbol","for","ConfigurableComponent","param","config","_config","defaults","datasetConfig","normaliseDataset","dataset","mergeConfigs","normaliseString","value","property","trimmedValue","trim","output","outputType","type","includes","length","isFinite","Number","schema","out","entries","Object","properties","entry","namespace","field","toString","extractConfigByNamespace","configObjects","formattedConfigObject","configObject","key","keys","override","newObject","current","keyParts","split","index","MultiFileUpload","_this$config$feedback","$feedbackContainer","feedbackContainer","querySelector","selector","setupFileInput","setupDropzone","setupLabel","setupStatusBox","addEventListener","onFileDeleteClick","bind","add","$dropzone","createElement","onDragOver","onDragLeave","onDrop","$fileInput","replaceWith","appendChild","$label","id","textContent","dropzoneButtonText","$hint","dropzoneHintText","append","onFileChange","onFileFocus","onFileBlur","$status","event","preventDefault","remove","uploadStatusText","uploadFiles","dataTransfer","files","file","from","uploadFile","cloneNode","HTMLInputElement","focus","getSuccessHtml","success","messageHtml","getErrorHtml","error","getFileRow","$row","innerHTML","getDeleteButton","$button","filename","originalname","hooks","entryHook","$item","$message","$actions","$progress","formData","FormData","xhr","XMLHttpRequest","onLoad","status","response","onError","messageText","exitHook","responseText","statusText","errorHook","upload","lengthComputable","percentComplete","Math","round","loaded","total","open","uploadUrl","responseType","send","target","HTMLButtonElement","$rows","querySelectorAll","$rowDelete","find","deleteHook","undefined","deleteUrl","setRequestHeader","JSON","stringify","isDragAndDropSupported","isFormDataSupported","isFileApiSupported","div","ondrop","input","freeze"],"mappings":"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","x_google_ignoreList":[0,1,2,3]}