{"version":3,"file":"filter-toggle-button.bundle.js","sources":["../../../../src/moj/components/filter-toggle-button/filter-toggle-button.mjs"],"sourcesContent":["import { ConfigurableComponent } from 'govuk-frontend'\n\n/**\n * @augments {ConfigurableComponent<FilterToggleButtonConfig>}\n */\nexport class FilterToggleButton extends ConfigurableComponent {\n  /**\n   * @param {Element | null} $root - HTML element to use for filter toggle button\n   * @param {FilterToggleButtonConfig} [config] - Filter toggle button config\n   */\n  constructor($root, config = {}) {\n    super($root, config)\n\n    const $toggleButtonContainer =\n      this.config.toggleButtonContainer.element ??\n      document.querySelector(this.config.toggleButtonContainer.selector)\n\n    const $closeButtonContainer =\n      this.config.closeButtonContainer.element ??\n      this.$root.querySelector(this.config.closeButtonContainer.selector)\n\n    if (\n      !(\n        $toggleButtonContainer instanceof HTMLElement &&\n        $closeButtonContainer instanceof HTMLElement\n      )\n    ) {\n      return this\n    }\n\n    this.$toggleButtonContainer = $toggleButtonContainer\n    this.$closeButtonContainer = $closeButtonContainer\n\n    this.createToggleButton()\n    this.setupResponsiveChecks()\n\n    this.$root.setAttribute('tabindex', '-1')\n\n    if (this.config.startHidden) {\n      this.hideMenu()\n    }\n  }\n\n  setupResponsiveChecks() {\n    this.mq = window.matchMedia(this.config.bigModeMediaQuery)\n    this.mq.addListener(this.checkMode.bind(this))\n    this.checkMode()\n  }\n\n  createToggleButton() {\n    this.$menuButton = document.createElement('button')\n    this.$menuButton.setAttribute('type', 'button')\n    this.$menuButton.setAttribute('aria-haspopup', 'true')\n    this.$menuButton.setAttribute('aria-expanded', 'false')\n\n    this.$menuButton.className = `govuk-button ${this.config.toggleButton.classes}`\n    this.$menuButton.textContent = this.config.toggleButton.showText\n\n    this.$menuButton.addEventListener(\n      'click',\n      this.onMenuButtonClick.bind(this)\n    )\n\n    this.$toggleButtonContainer.append(this.$menuButton)\n  }\n\n  checkMode() {\n    if (this.mq.matches) {\n      this.enableBigMode()\n    } else {\n      this.enableSmallMode()\n    }\n  }\n\n  enableBigMode() {\n    this.showMenu()\n    this.removeCloseButton()\n  }\n\n  enableSmallMode() {\n    this.hideMenu()\n    this.addCloseButton()\n  }\n\n  addCloseButton() {\n    this.$closeButton = document.createElement('button')\n    this.$closeButton.setAttribute('type', 'button')\n\n    this.$closeButton.className = this.config.closeButton.classes\n    this.$closeButton.textContent = this.config.closeButton.text\n\n    this.$closeButton.addEventListener('click', this.onCloseClick.bind(this))\n    this.$closeButtonContainer.append(this.$closeButton)\n  }\n\n  onCloseClick() {\n    this.hideMenu()\n    this.$menuButton.focus()\n  }\n\n  removeCloseButton() {\n    if (this.$closeButton) {\n      this.$closeButton.remove()\n      this.$closeButton = null\n    }\n  }\n\n  hideMenu() {\n    this.$menuButton.setAttribute('aria-expanded', 'false')\n    this.$root.classList.add('moj-js-hidden')\n    this.$menuButton.textContent = this.config.toggleButton.showText\n  }\n\n  showMenu() {\n    this.$menuButton.setAttribute('aria-expanded', 'true')\n    this.$root.classList.remove('moj-js-hidden')\n    this.$menuButton.textContent = this.config.toggleButton.hideText\n  }\n\n  onMenuButtonClick() {\n    this.toggle()\n  }\n\n  toggle() {\n    if (this.$menuButton.getAttribute('aria-expanded') === 'false') {\n      this.showMenu()\n      this.$root.focus()\n    } else {\n      this.hideMenu()\n    }\n  }\n\n  /**\n   * Name for the component used when initialising using data-module attributes.\n   */\n  static moduleName = 'moj-filter'\n\n  /**\n   * Filter toggle button config\n   *\n   * @type {FilterToggleButtonConfig}\n   */\n  static defaults = Object.freeze({\n    bigModeMediaQuery: '(min-width: 48.0625em)',\n    startHidden: true,\n    toggleButton: {\n      showText: 'Show filter',\n      hideText: 'Hide filter',\n      classes: 'govuk-button--secondary'\n    },\n    toggleButtonContainer: {\n      selector: '.moj-action-bar__filter'\n    },\n    closeButton: {\n      text: 'Close',\n      classes: 'moj-filter__close'\n    },\n    closeButtonContainer: {\n      selector: '.moj-filter__header-action'\n    }\n  })\n\n  /**\n   * Filter toggle button config schema\n   *\n   * @satisfies {Schema<FilterToggleButtonConfig>}\n   */\n  static schema = Object.freeze(\n    /** @type {const} */ ({\n      properties: {\n        bigModeMediaQuery: { type: 'string' },\n        startHidden: { type: 'boolean' },\n        toggleButton: { type: 'object' },\n        toggleButtonContainer: { type: 'object' },\n        closeButton: { type: 'object' },\n        closeButtonContainer: { type: 'object' }\n      }\n    })\n  )\n}\n\n/**\n * @typedef {object} FilterToggleButtonConfig\n * @property {string} [bigModeMediaQuery] - Media query for big mode\n * @property {boolean} [startHidden] - Whether to start hidden\n * @property {object} [toggleButton] - Toggle button config\n * @property {string} [toggleButton.showText] - Text for show button\n * @property {string} [toggleButton.hideText] - Text for hide button\n * @property {string} [toggleButton.classes] - Classes for toggle button\n * @property {object} [toggleButtonContainer] - Toggle button container config\n * @property {string} [toggleButtonContainer.selector] - Selector for toggle button container\n * @property {Element | null} [toggleButtonContainer.element] - HTML element for toggle button container\n * @property {object} [closeButton] - Close button config\n * @property {string} [closeButton.text] - Text for close button\n * @property {string} [closeButton.classes] - Classes for close button\n * @property {object} [closeButtonContainer] - Close button container config\n * @property {string} [closeButtonContainer.selector] - Selector for close button container\n * @property {Element | null} [closeButtonContainer.element] - HTML element for close button container\n */\n\n/**\n * @import { Schema } from 'govuk-frontend/dist/govuk/common/configuration.mjs'\n */\n"],"names":["FilterToggleButton","ConfigurableComponent","constructor","$root","config","_this$config$toggleBu","_this$config$closeBut","$toggleButtonContainer","toggleButtonContainer","element","document","querySelector","selector","$closeButtonContainer","closeButtonContainer","HTMLElement","createToggleButton","setupResponsiveChecks","setAttribute","startHidden","hideMenu","mq","window","matchMedia","bigModeMediaQuery","addListener","checkMode","bind","$menuButton","createElement","className","toggleButton","classes","textContent","showText","addEventListener","onMenuButtonClick","append","matches","enableBigMode","enableSmallMode","showMenu","removeCloseButton","addCloseButton","$closeButton","closeButton","text","onCloseClick","focus","remove","classList","add","hideText","toggle","getAttribute","moduleName","defaults","Object","freeze","schema","properties","type"],"mappings":"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"}