{"version":3,"file":"all.bundle.js","sources":["../../src/moj/common/moj-frontend-version.mjs","../../src/moj/components/add-another/add-another.mjs","../../src/moj/common/index.mjs","../../src/moj/helpers.mjs","../../src/moj/components/alert/alert.mjs","../../src/moj/components/button-menu/button-menu.mjs","../../src/moj/components/date-picker/date-picker.mjs","../../src/moj/components/filter-toggle-button/filter-toggle-button.mjs","../../src/moj/components/form-validator/form-validator.mjs","../../src/moj/components/multi-file-upload/multi-file-upload.mjs","../../src/moj/components/multi-select/multi-select.mjs","../../src/moj/components/password-reveal/password-reveal.mjs","../../src/moj/components/rich-text-editor/rich-text-editor.mjs","../../src/moj/components/search-toggle/search-toggle.mjs","../../src/moj/components/sortable-table/sortable-table.mjs","../../src/moj/all.mjs"],"sourcesContent":["/*\n * This variable is automatically overwritten during builds and releases.\n * It doesn't need to be updated manually.\n */\n\n/**\n * MoJ Frontend release version\n *\n * {@link https://github.com/ministryofjustice/moj-frontend/releases}\n */\nexport const version = 'development'\n","import { Component } from 'govuk-frontend'\n\nexport class AddAnother extends Component {\n  /**\n   * @param {Element | null} $root - HTML element to use for add another\n   */\n  constructor($root) {\n    super($root)\n\n    this.$root.addEventListener('click', this.onRemoveButtonClick.bind(this))\n    this.$root.addEventListener('click', this.onAddButtonClick.bind(this))\n\n    const $buttons = this.$root.querySelectorAll(\n      '.moj-add-another__add-button, moj-add-another__remove-button'\n    )\n\n    $buttons.forEach(($button) => {\n      if (!($button instanceof HTMLButtonElement)) {\n        return\n      }\n\n      $button.type = 'button'\n    })\n  }\n\n  /**\n   * @param {MouseEvent} event - Click event\n   */\n  onAddButtonClick(event) {\n    const $button = event.target\n\n    if (\n      !$button ||\n      !($button instanceof HTMLButtonElement) ||\n      !$button.classList.contains('moj-add-another__add-button')\n    ) {\n      return\n    }\n\n    const $items = this.getItems()\n    const $item = this.getNewItem()\n\n    if (!$item || !($item instanceof HTMLElement)) {\n      return\n    }\n\n    this.updateAttributes($item, $items.length)\n    this.resetItem($item)\n\n    const $firstItem = $items[0]\n    if (!this.hasRemoveButton($firstItem)) {\n      this.createRemoveButton($firstItem)\n    }\n\n    $items[$items.length - 1].after($item)\n\n    const $input = $item.querySelector('input, textarea, select')\n    if ($input && $input instanceof HTMLInputElement) {\n      $input.focus()\n    }\n  }\n\n  /**\n   * @param {HTMLElement} $item - Add another item\n   */\n  hasRemoveButton($item) {\n    return $item.querySelectorAll('.moj-add-another__remove-button').length\n  }\n\n  getItems() {\n    if (!this.$root) {\n      return []\n    }\n\n    const $items = Array.from(\n      this.$root.querySelectorAll('.moj-add-another__item')\n    )\n\n    return $items.filter((item) => item instanceof HTMLElement)\n  }\n\n  getNewItem() {\n    const $items = this.getItems()\n    const $item = $items[0].cloneNode(true)\n\n    if (!$item || !($item instanceof HTMLElement)) {\n      return\n    }\n\n    if (!this.hasRemoveButton($item)) {\n      this.createRemoveButton($item)\n    }\n\n    return $item\n  }\n\n  /**\n   * @param {HTMLElement} $item - Add another item\n   * @param {number} index - Add another item index\n   */\n  updateAttributes($item, index) {\n    $item.querySelectorAll('[data-name]').forEach(($input) => {\n      if (!this.isValidInputElement($input)) {\n        return\n      }\n\n      const name = $input.getAttribute('data-name') || ''\n      const id = $input.getAttribute('data-id') || ''\n      const originalId = $input.id\n\n      $input.name = name.replace(/%index%/, `${index}`)\n      $input.id = id.replace(/%index%/, `${index}`)\n\n      const $label =\n        $input.parentElement.querySelector('label') ||\n        $input.closest('label') ||\n        $item.querySelector(`[for=\"${originalId}\"]`)\n\n      if ($label && $label instanceof HTMLLabelElement) {\n        $label.htmlFor = $input.id\n      }\n    })\n  }\n\n  /**\n   * @param {HTMLElement} $item - Add another item\n   */\n  createRemoveButton($item) {\n    const $button = document.createElement('button')\n    $button.type = 'button'\n\n    $button.classList.add(\n      'govuk-button',\n      'govuk-button--secondary',\n      'moj-add-another__remove-button'\n    )\n\n    $button.textContent = 'Remove'\n\n    $item.append($button)\n  }\n\n  /**\n   * @param {HTMLElement} $item - Add another item\n   */\n  resetItem($item) {\n    $item.querySelectorAll('[data-name], [data-id]').forEach(($input) => {\n      if (!this.isValidInputElement($input)) {\n        return\n      }\n\n      if ($input instanceof HTMLSelectElement) {\n        $input.selectedIndex = -1\n        $input.value = ''\n      } else if ($input instanceof HTMLTextAreaElement) {\n        $input.value = ''\n      } else {\n        switch ($input.type) {\n          case 'checkbox':\n          case 'radio':\n            $input.checked = false\n            break\n          default:\n            $input.value = ''\n        }\n      }\n    })\n  }\n\n  /**\n   * @param {MouseEvent} event - Click event\n   */\n  onRemoveButtonClick(event) {\n    const $button = event.target\n\n    if (\n      !$button ||\n      !($button instanceof HTMLButtonElement) ||\n      !$button.classList.contains('moj-add-another__remove-button')\n    ) {\n      return\n    }\n\n    $button.closest('.moj-add-another__item').remove()\n\n    const $items = this.getItems()\n\n    if ($items.length === 1) {\n      $items[0].querySelector('.moj-add-another__remove-button').remove()\n    }\n\n    $items.forEach(($item, index) => {\n      this.updateAttributes($item, index)\n    })\n\n    this.focusHeading()\n  }\n\n  focusHeading() {\n    const $heading = this.$root.querySelector('.moj-add-another__heading')\n\n    if ($heading && $heading instanceof HTMLElement) {\n      $heading.focus()\n    }\n  }\n\n  /**\n   * @param {Element} $input - the input to validate\n   */\n  isValidInputElement($input) {\n    return (\n      $input instanceof HTMLInputElement ||\n      $input instanceof HTMLSelectElement ||\n      $input instanceof HTMLTextAreaElement\n    )\n  }\n\n  /**\n   * Name for the component used when initialising using data-module attributes.\n   */\n  static moduleName = 'moj-add-another'\n}\n","/**\n * GOV.UK Frontend helpers\n *\n * @todo Import from GOV.UK Frontend\n */\n\n/**\n * Move focus to element\n *\n * Sets tabindex to -1 to make the element programmatically focusable,\n * but removes it on blur as the element doesn't need to be focused again.\n *\n * @template {HTMLElement} FocusElement\n * @param {FocusElement} $element - HTML element\n * @param {object} [options] - Handler options\n * @param {function(this: FocusElement): void} [options.onBeforeFocus] - Callback before focus\n * @param {function(this: FocusElement): void} [options.onBlur] - Callback on blur\n */\nexport function setFocus($element, options = {}) {\n  const isFocusable = $element.getAttribute('tabindex')\n\n  if (!isFocusable) {\n    $element.setAttribute('tabindex', '-1')\n  }\n\n  /**\n   * Handle element focus\n   */\n  function onFocus() {\n    $element.addEventListener('blur', onBlur, { once: true })\n  }\n\n  /**\n   * Handle element blur\n   */\n  function onBlur() {\n    options.onBlur?.call($element)\n\n    if (!isFocusable) {\n      $element.removeAttribute('tabindex')\n    }\n  }\n\n  // Add listener to reset element on blur, after focus\n  $element.addEventListener('focus', onFocus, { once: true })\n\n  // Focus element\n  options.onBeforeFocus?.call($element)\n  $element.focus()\n}\n","/**\n * @param {Element} $element - Element to remove attribute value from\n * @param {string} attr - Attribute name\n * @param {string} value - Attribute value\n */\nexport function removeAttributeValue($element, attr, value) {\n  let re, m\n  if ($element.getAttribute(attr)) {\n    if ($element.getAttribute(attr) === value) {\n      $element.removeAttribute(attr)\n    } else {\n      re = new RegExp(`(^|\\\\s)${value}(\\\\s|$)`)\n      m = $element.getAttribute(attr).match(re)\n      if (m && m.length === 3) {\n        $element.setAttribute(\n          attr,\n          $element.getAttribute(attr).replace(re, m[1] && m[2] ? ' ' : '')\n        )\n      }\n    }\n  }\n}\n\n/**\n * @param {Element} $element - Element to add attribute value to\n * @param {string} attr - Attribute name\n * @param {string} value - Attribute value\n */\nexport function addAttributeValue($element, attr, value) {\n  let re\n  if (!$element.getAttribute(attr)) {\n    $element.setAttribute(attr, value)\n  } else {\n    re = new RegExp(`(^|\\\\s)${value}(\\\\s|$)`)\n    if (!re.test($element.getAttribute(attr))) {\n      $element.setAttribute(attr, `${$element.getAttribute(attr)} ${value}`)\n    }\n  }\n}\n\n/**\n * Find an elements next sibling\n *\n * Utility function to find an elements next sibling matching the provided\n * selector.\n *\n * @param {Element | null} $element - Element to find siblings for\n * @param {string} [selector] - selector for required sibling\n */\nexport function getNextSibling($element, selector) {\n  if (!$element || !($element instanceof HTMLElement)) {\n    return\n  }\n\n  // Get the next sibling element\n  let $sibling = $element.nextElementSibling\n\n  // If there's no selector, return the first sibling\n  if (!selector) return $sibling\n\n  // If the sibling matches our selector, use it\n  // If not, jump to the next sibling and continue the loop\n  while ($sibling) {\n    if ($sibling.matches(selector)) return $sibling\n    $sibling = $sibling.nextElementSibling\n  }\n}\n\n/**\n * Find an elements preceding sibling\n *\n * Utility function to find an elements previous sibling matching the provided\n * selector.\n *\n * @param {Element | null} $element - Element to find siblings for\n * @param {string} [selector] - selector for required sibling\n */\nexport function getPreviousSibling($element, selector) {\n  if (!$element || !($element instanceof HTMLElement)) {\n    return\n  }\n\n  // Get the previous sibling element\n  let $sibling = $element.previousElementSibling\n\n  // If there's no selector, return the first sibling\n  if (!selector) return $sibling\n\n  // If the sibling matches our selector, use it\n  // If not, jump to the next sibling and continue the loop\n  while ($sibling) {\n    if ($sibling.matches(selector)) return $sibling\n    $sibling = $sibling.previousElementSibling\n  }\n}\n\n/**\n * @param {Element | null} $element\n * @param {string} [selector]\n */\nexport function findNearestMatchingElement($element, selector) {\n  // If no element or selector is provided, return\n  if (!$element || !($element instanceof HTMLElement) || !selector) {\n    return\n  }\n\n  // Start with the current element\n  let $currentElement = $element\n\n  while ($currentElement) {\n    // First check the current element\n    if ($currentElement.matches(selector)) {\n      return $currentElement\n    }\n\n    // Check all previous siblings\n    let $sibling = $currentElement.previousElementSibling\n    while ($sibling) {\n      // Check if the sibling itself is a heading\n      if ($sibling.matches(selector)) {\n        return $sibling\n      }\n      $sibling = $sibling.previousElementSibling\n    }\n\n    // If no match found in siblings, move up to parent\n    $currentElement = $currentElement.parentElement\n  }\n}\n","import { ConfigurableComponent } from 'govuk-frontend'\n\nimport { setFocus } from '../../common/index.mjs'\nimport {\n  findNearestMatchingElement,\n  getPreviousSibling\n} from '../../helpers.mjs'\n\n/**\n * @augments {ConfigurableComponent<AlertConfig>}\n */\nexport class Alert extends ConfigurableComponent {\n  /**\n   * @param {Element | null} $root - HTML element to use for alert\n   * @param {AlertConfig} [config] - Alert config\n   */\n  constructor($root, config = {}) {\n    super($root, config)\n\n    /**\n     * Focus the alert\n     *\n     * If `role=\"alert\"` is set, focus the element to help some assistive\n     * technologies prioritise announcing it.\n     *\n     * You can turn off the auto-focus functionality by setting\n     * `data-disable-auto-focus=\"true\"` in the component HTML. You might wish to\n     * do this based on user research findings, or to avoid a clash with another\n     * element which should be focused when the page loads.\n     */\n    if (\n      this.$root.getAttribute('role') === 'alert' &&\n      !this.config.disableAutoFocus\n    ) {\n      setFocus(this.$root)\n    }\n\n    this.$dismissButton = this.$root.querySelector('.moj-alert__dismiss')\n\n    if (this.config.dismissible && this.$dismissButton) {\n      this.$dismissButton.innerHTML = this.config.dismissText\n      this.$dismissButton.removeAttribute('hidden')\n\n      this.$root.addEventListener('click', (event) => {\n        if (\n          event.target instanceof Node &&\n          this.$dismissButton.contains(event.target)\n        ) {\n          this.dimiss()\n        }\n      })\n    }\n  }\n\n  /**\n   * Handle dismissing the alert\n   */\n  dimiss() {\n    let $elementToRecieveFocus\n\n    // If a selector has been provided, attempt to find that element\n    if (this.config.focusOnDismissSelector) {\n      $elementToRecieveFocus = document.querySelector(\n        this.config.focusOnDismissSelector\n      )\n    }\n\n    // Is the next sibling another alert\n    if (!$elementToRecieveFocus) {\n      const $nextSibling = this.$root.nextElementSibling\n      if ($nextSibling && $nextSibling.matches('.moj-alert')) {\n        $elementToRecieveFocus = $nextSibling\n      }\n    }\n\n    // Else try to find any preceding sibling alert or heading\n    if (!$elementToRecieveFocus) {\n      $elementToRecieveFocus = getPreviousSibling(\n        this.$root,\n        '.moj-alert, h1, h2, h3, h4, h5, h6'\n      )\n    }\n\n    // Else find the closest ancestor heading, or fallback to main, or last resort\n    // use the body element\n    if (!$elementToRecieveFocus) {\n      $elementToRecieveFocus = findNearestMatchingElement(\n        this.$root,\n        'h1, h2, h3, h4, h5, h6, main, body'\n      )\n    }\n\n    // If we have an element, place focus on it\n    if ($elementToRecieveFocus instanceof HTMLElement) {\n      setFocus($elementToRecieveFocus)\n    }\n\n    // Remove the alert\n    this.$root.remove()\n  }\n\n  /**\n   * Name for the component used when initialising using data-module attributes.\n   */\n  static moduleName = 'moj-alert'\n\n  /**\n   * Alert default config\n   *\n   * @type {AlertConfig}\n   */\n  static defaults = Object.freeze({\n    dismissible: false,\n    dismissText: 'Dismiss',\n    disableAutoFocus: false\n  })\n\n  /**\n   * Alert config schema\n   *\n   * @satisfies {Schema<AlertConfig>}\n   */\n  static schema = Object.freeze(\n    /** @type {const} */ ({\n      properties: {\n        dismissible: { type: 'boolean' },\n        dismissText: { type: 'string' },\n        disableAutoFocus: { type: 'boolean' },\n        focusOnDismissSelector: { type: 'string' }\n      }\n    })\n  )\n}\n\n/**\n * @typedef {object} AlertConfig\n * @property {boolean} [dismissible=false] - Can the alert be dismissed by the user\n * @property {string} [dismissText=Dismiss] - the label text for the dismiss button\n * @property {boolean} [disableAutoFocus=false] - whether the alert will be autofocused\n * @property {string} [focusOnDismissSelector] - CSS Selector for element to be focused on dismiss\n */\n\n/**\n * @import { Schema } from 'govuk-frontend/dist/govuk/common/configuration.mjs'\n */\n","import { ConfigurableComponent } from 'govuk-frontend'\n\n/**\n * @augments {ConfigurableComponent<ButtonMenuConfig>}\n */\nexport class ButtonMenu extends ConfigurableComponent {\n  /**\n   * @param {Element | null} $root - HTML element to use for button menu\n   * @param {ButtonMenuConfig} [config] - Button menu config\n   */\n  constructor($root, config = {}) {\n    super($root, config)\n\n    // If only one button is provided, don't initiate a menu and toggle button\n    // if classes have been provided for the toggleButton, apply them to the single item\n    if (this.$root.children.length === 1) {\n      const $button = this.$root.children[0]\n\n      $button.classList.forEach((className) => {\n        if (className.startsWith('govuk-button-')) {\n          $button.classList.remove(className)\n        }\n\n        $button.classList.remove('moj-button-menu__item')\n        $button.classList.add('moj-button-menu__single-button')\n      })\n\n      if (this.config.buttonClasses) {\n        $button.classList.add(...this.config.buttonClasses.split(' '))\n      }\n    }\n    // Otherwise initialise a button menu\n    if (this.$root.children.length > 1) {\n      this.initMenu()\n    }\n  }\n\n  initMenu() {\n    this.$menu = this.createMenu()\n    this.$root.insertAdjacentHTML('afterbegin', this.toggleTemplate())\n    this.setupMenuItems()\n\n    this.$menuToggle = this.$root.querySelector(':scope > button')\n    this.$items = this.$menu.querySelectorAll('a, button')\n\n    this.$menuToggle.addEventListener('click', (event) => {\n      this.toggleMenu(event)\n    })\n\n    this.$root.addEventListener('keydown', (event) => {\n      this.handleKeyDown(event)\n    })\n\n    document.addEventListener('click', (event) => {\n      if (event.target instanceof Node && !this.$root.contains(event.target)) {\n        this.closeMenu(false)\n      }\n    })\n  }\n\n  createMenu() {\n    const $menu = document.createElement('ul')\n\n    $menu.setAttribute('role', 'list')\n    $menu.hidden = true\n    $menu.classList.add('moj-button-menu__wrapper')\n\n    if (this.config.alignMenu === 'right') {\n      $menu.classList.add('moj-button-menu__wrapper--right')\n    }\n\n    this.$root.appendChild($menu)\n\n    while (this.$root.firstChild !== $menu) {\n      $menu.appendChild(this.$root.firstChild)\n    }\n\n    return $menu\n  }\n\n  setupMenuItems() {\n    Array.from(this.$menu.children).forEach(($menuItem) => {\n      // wrap item in li tag\n      const $listItem = document.createElement('li')\n      this.$menu.insertBefore($listItem, $menuItem)\n      $listItem.appendChild($menuItem)\n\n      $menuItem.setAttribute('tabindex', '-1')\n\n      if ($menuItem.tagName === 'BUTTON') {\n        $menuItem.setAttribute('type', 'button')\n      }\n\n      $menuItem.classList.forEach((className) => {\n        if (className.startsWith('govuk-button')) {\n          $menuItem.classList.remove(className)\n        }\n      })\n\n      // add a slight delay after click before closing the menu, makes it *feel* better\n      $menuItem.addEventListener('click', () => {\n        setTimeout(() => {\n          this.closeMenu(false)\n        }, 50)\n      })\n    })\n  }\n\n  toggleTemplate() {\n    return `\n    <button type=\"button\" class=\"govuk-button moj-button-menu__toggle-button ${this.config.buttonClasses || ''}\" aria-haspopup=\"true\" aria-expanded=\"false\">\n      <span>\n       ${this.config.buttonText}\n       <svg width=\"11\" height=\"5\" viewBox=\"0 0 11 5\"  xmlns=\"http://www.w3.org/2000/svg\">\n         <path d=\"M5.5 0L11 5L0 5L5.5 0Z\" fill=\"currentColor\"/>\n       </svg>\n      </span>\n    </button>`\n  }\n\n  /**\n   * @returns {boolean}\n   */\n  isOpen() {\n    return this.$menuToggle.getAttribute('aria-expanded') === 'true'\n  }\n\n  /**\n   * @param {MouseEvent} event - Click event\n   */\n  toggleMenu(event) {\n    event.preventDefault()\n\n    // If menu is triggered with mouse don't move focus to first item\n    const keyboardEvent = event.detail === 0\n    const focusIndex = keyboardEvent ? 0 : -1\n\n    if (this.isOpen()) {\n      this.closeMenu()\n    } else {\n      this.openMenu(focusIndex)\n    }\n  }\n\n  /**\n   * Opens the menu and optionally sets the focus to the item with given index\n   *\n   * @param {number} focusIndex - The index of the item to focus\n   */\n  openMenu(focusIndex = 0) {\n    this.$menu.hidden = false\n    this.$menuToggle.setAttribute('aria-expanded', 'true')\n    if (focusIndex !== -1) {\n      this.focusItem(focusIndex)\n    }\n  }\n\n  /**\n   * Closes the menu and optionally returns focus back to menuToggle\n   *\n   * @param {boolean} moveFocus - whether to return focus to the toggle button\n   */\n  closeMenu(moveFocus = true) {\n    this.$menu.hidden = true\n    this.$menuToggle.setAttribute('aria-expanded', 'false')\n    if (moveFocus) {\n      this.$menuToggle.focus()\n    }\n  }\n\n  /**\n   * Focuses the menu item at the specified index\n   *\n   * @param {number} index - the index of the item to focus\n   */\n  focusItem(index) {\n    if (index >= this.$items.length) index = 0\n    if (index < 0) index = this.$items.length - 1\n\n    const $menuItem = this.$items.item(index)\n    if ($menuItem) {\n      $menuItem.focus()\n    }\n  }\n\n  currentFocusIndex() {\n    const $activeElement = document.activeElement\n    const $menuItems = Array.from(this.$items)\n\n    return (\n      ($activeElement instanceof HTMLAnchorElement ||\n        $activeElement instanceof HTMLButtonElement) &&\n      $menuItems.indexOf($activeElement)\n    )\n  }\n\n  /**\n   * @param {KeyboardEvent} event - Keydown event\n   */\n  handleKeyDown(event) {\n    if (event.target === this.$menuToggle) {\n      switch (event.key) {\n        case 'ArrowDown':\n          event.preventDefault()\n          this.openMenu()\n          break\n        case 'ArrowUp':\n          event.preventDefault()\n          this.openMenu(this.$items.length - 1)\n          break\n      }\n    }\n\n    if (\n      event.target instanceof Node &&\n      this.$menu.contains(event.target) &&\n      this.isOpen()\n    ) {\n      switch (event.key) {\n        case 'ArrowDown':\n          event.preventDefault()\n          if (this.currentFocusIndex() !== -1) {\n            this.focusItem(this.currentFocusIndex() + 1)\n          }\n          break\n        case 'ArrowUp':\n          event.preventDefault()\n          if (this.currentFocusIndex() !== -1) {\n            this.focusItem(this.currentFocusIndex() - 1)\n          }\n          break\n        case 'Home':\n          event.preventDefault()\n          this.focusItem(0)\n          break\n        case 'End':\n          event.preventDefault()\n          this.focusItem(this.$items.length - 1)\n          break\n      }\n    }\n\n    if (event.key === 'Escape' && this.isOpen()) {\n      this.closeMenu()\n    }\n    if (event.key === 'Tab' && this.isOpen()) {\n      this.closeMenu(false)\n    }\n  }\n\n  /**\n   * Name for the component used when initialising using data-module attributes.\n   */\n  static moduleName = 'moj-button-menu'\n\n  /**\n   * Button menu config\n   *\n   * @type {ButtonMenuConfig}\n   */\n  static defaults = Object.freeze({\n    buttonText: 'Actions',\n    alignMenu: 'left',\n    buttonClasses: ''\n  })\n\n  /**\n   * Button menu config schema\n   *\n   * @type {Schema<ButtonMenuConfig>}\n   */\n  static schema = Object.freeze(\n    /** @type {const} */ ({\n      properties: {\n        buttonText: { type: 'string' },\n        buttonClasses: { type: 'string' },\n        alignMenu: { type: 'string' }\n      }\n    })\n  )\n}\n\n/**\n * @typedef {object} ButtonMenuConfig\n * @property {string} [buttonText='Actions'] - Label for the toggle button\n * @property {\"left\" | \"right\"} [alignMenu='left'] - the alignment of the menu\n * @property {string} [buttonClasses='govuk-button--secondary'] - css classes applied to the toggle button\n */\n\n/**\n * @import { Schema } from 'govuk-frontend/dist/govuk/common/configuration.mjs'\n */\n","import { ConfigurableComponent } from 'govuk-frontend'\n\n/**\n * @augments {ConfigurableComponent<DatePickerConfig>}\n */\nexport class DatePicker extends ConfigurableComponent {\n  /**\n   * @param {Element | null} $root - HTML element to use for date picker\n   * @param {DatePickerConfig} [config] - Date picker config\n   */\n  constructor($root, config = {}) {\n    super($root, config)\n\n    const $input =\n      this.config.input.element ??\n      this.$root.querySelector(this.config.input.selector)\n\n    if (!$input || !($input instanceof HTMLInputElement)) {\n      return this\n    }\n\n    this.$input = $input\n\n    this.dayLabels = [\n      'Monday',\n      'Tuesday',\n      'Wednesday',\n      'Thursday',\n      'Friday',\n      'Saturday',\n      'Sunday'\n    ]\n\n    this.monthLabels = [\n      'January',\n      'February',\n      'March',\n      'April',\n      'May',\n      'June',\n      'July',\n      'August',\n      'September',\n      'October',\n      'November',\n      'December'\n    ]\n\n    this.currentDate = new Date()\n    this.currentDate.setHours(0, 0, 0, 0)\n    this.calendarDays = /** @type {DSCalendarDay[]} */ ([])\n    this.excludedDates = /** @type {Date[]} */ ([])\n    this.excludedDays = /** @type {number[]} */ ([])\n\n    this.buttonClass = 'moj-datepicker__button'\n    this.selectedDayButtonClass = 'moj-datepicker__button--selected'\n    this.currentDayButtonClass = 'moj-datepicker__button--current'\n    this.todayButtonClass = 'moj-datepicker__button--today'\n\n    this.setOptions()\n    this.initControls()\n  }\n\n  initControls() {\n    this.id = `datepicker-${this.$input.id}`\n\n    this.$dialog = this.createDialog()\n    this.createCalendarHeaders()\n\n    const $componentWrapper = document.createElement('div')\n    const $inputWrapper = document.createElement('div')\n    $componentWrapper.classList.add('moj-datepicker__wrapper')\n    $inputWrapper.classList.add('govuk-input__wrapper')\n\n    this.$input.parentElement.insertBefore($componentWrapper, this.$input)\n    $componentWrapper.appendChild($inputWrapper)\n    $inputWrapper.appendChild(this.$input)\n\n    $inputWrapper.insertAdjacentHTML('beforeend', this.toggleTemplate())\n    $componentWrapper.insertAdjacentElement('beforeend', this.$dialog)\n\n    this.$calendarButton = /** @type {HTMLButtonElement} */ (\n      this.$root.querySelector('.moj-js-datepicker-toggle')\n    )\n\n    this.$dialogTitle = /** @type {HTMLHeadingElement} */ (\n      this.$dialog.querySelector('.moj-js-datepicker-month-year')\n    )\n\n    this.createCalendar()\n\n    this.$prevMonthButton = /** @type {HTMLButtonElement} */ (\n      this.$dialog.querySelector('.moj-js-datepicker-prev-month')\n    )\n\n    this.$prevYearButton = /** @type {HTMLButtonElement} */ (\n      this.$dialog.querySelector('.moj-js-datepicker-prev-year')\n    )\n\n    this.$nextMonthButton = /** @type {HTMLButtonElement} */ (\n      this.$dialog.querySelector('.moj-js-datepicker-next-month')\n    )\n\n    this.$nextYearButton = /** @type {HTMLButtonElement} */ (\n      this.$dialog.querySelector('.moj-js-datepicker-next-year')\n    )\n\n    this.$cancelButton = /** @type {HTMLButtonElement} */ (\n      this.$dialog.querySelector('.moj-js-datepicker-cancel')\n    )\n\n    this.$okButton = /** @type {HTMLButtonElement} */ (\n      this.$dialog.querySelector('.moj-js-datepicker-ok')\n    )\n\n    // add event listeners\n    this.$prevMonthButton.addEventListener('click', (event) =>\n      this.focusPreviousMonth(event, false)\n    )\n    this.$prevYearButton.addEventListener('click', (event) =>\n      this.focusPreviousYear(event, false)\n    )\n    this.$nextMonthButton.addEventListener('click', (event) =>\n      this.focusNextMonth(event, false)\n    )\n    this.$nextYearButton.addEventListener('click', (event) =>\n      this.focusNextYear(event, false)\n    )\n    this.$cancelButton.addEventListener('click', (event) => {\n      event.preventDefault()\n      this.closeDialog()\n    })\n    this.$okButton.addEventListener('click', () => {\n      this.selectDate(this.currentDate)\n    })\n\n    const $dialogButtons = this.$dialog.querySelectorAll(\n      'button:not([disabled=\"true\"])'\n    )\n\n    this.$firstButtonInDialog = $dialogButtons[0]\n    this.$lastButtonInDialog = $dialogButtons[$dialogButtons.length - 1]\n    this.$firstButtonInDialog.addEventListener('keydown', (event) =>\n      this.firstButtonKeydown(event)\n    )\n    this.$lastButtonInDialog.addEventListener('keydown', (event) =>\n      this.lastButtonKeydown(event)\n    )\n\n    this.$calendarButton.addEventListener('click', (event) =>\n      this.toggleDialog(event)\n    )\n\n    this.$dialog.addEventListener('keydown', (event) => {\n      if (event.key === 'Escape') {\n        this.closeDialog()\n        event.preventDefault()\n        event.stopPropagation()\n      }\n    })\n\n    document.body.addEventListener('mouseup', (event) => {\n      this.backgroundClick(event)\n    })\n\n    // populates calendar with initial dates, avoids Wave errors about null buttons\n    this.updateCalendar()\n  }\n\n  createDialog() {\n    const titleId = `datepicker-title-${this.$input.id}`\n    const $dialog = document.createElement('div')\n\n    $dialog.id = this.id\n    $dialog.setAttribute('class', 'moj-datepicker__dialog')\n    $dialog.setAttribute('role', 'dialog')\n    $dialog.setAttribute('aria-modal', 'true')\n    $dialog.setAttribute('aria-labelledby', titleId)\n    $dialog.innerHTML = this.dialogTemplate(titleId)\n    $dialog.hidden = true\n\n    return $dialog\n  }\n\n  createCalendar() {\n    const $tbody = this.$dialog.querySelector('tbody')\n    let dayCount = 0\n    for (let i = 0; i < 6; i++) {\n      // create row\n      const $row = $tbody.insertRow(i)\n\n      for (let j = 0; j < 7; j++) {\n        // create cell (day)\n        const $cell = document.createElement('td')\n        $row.appendChild($cell)\n        const $dateButton = document.createElement('button')\n        $dateButton.setAttribute('type', 'button')\n        $cell.appendChild($dateButton)\n\n        const calendarDay = new DSCalendarDay($dateButton, dayCount, i, j, this)\n        this.calendarDays.push(calendarDay)\n        dayCount++\n      }\n    }\n  }\n\n  toggleTemplate() {\n    return `<button class=\"moj-datepicker__toggle moj-js-datepicker-toggle\" type=\"button\" aria-haspopup=\"dialog\" aria-controls=\"${this.id}\" aria-expanded=\"false\">\n            <span class=\"govuk-visually-hidden\">Choose date</span>\n            <svg width=\"32\" height=\"24\" focusable=\"false\" class=\"moj-datepicker-icon\" aria-hidden=\"true\" role=\"img\" viewBox=\"0 0 22 22\">\n              <path\n                fill=\"currentColor\"\n                fill-rule=\"evenodd\"\n                clip-rule=\"evenodd\"\n                d=\"M16.1333 2.93333H5.86668V4.4C5.86668 5.21002 5.21003 5.86667 4.40002 5.86667C3.59 5.86667 2.93335 5.21002 2.93335 4.4V2.93333H2C0.895431 2.93333 0 3.82877 0 4.93334V19.2667C0 20.3712 0.89543 21.2667 2 21.2667H20C21.1046 21.2667 22 20.3712 22 19.2667V4.93333C22 3.82876 21.1046 2.93333 20 2.93333H19.0667V4.4C19.0667 5.21002 18.41 5.86667 17.6 5.86667C16.79 5.86667 16.1333 5.21002 16.1333 4.4V2.93333ZM20.5333 8.06667H1.46665V18.8C1.46665 19.3523 1.91436 19.8 2.46665 19.8H19.5333C20.0856 19.8 20.5333 19.3523 20.5333 18.8V8.06667Z\"\n              ></path>\n              <rect x=\"3.66669\" width=\"1.46667\" height=\"5.13333\" rx=\"0.733333\" fill=\"currentColor\"></rect>\n              <rect x=\"16.8667\" width=\"1.46667\" height=\"5.13333\" rx=\"0.733333\" fill=\"currentColor\"></rect>\n            </svg>\n          </button>`\n  }\n\n  /**\n   * HTML template for calendar dialog\n   *\n   * @param {string} [titleId] - Id attribute for dialog title\n   * @returns {string}\n   */\n  dialogTemplate(titleId) {\n    return `<div class=\"moj-datepicker__dialog-header\">\n            <div class=\"moj-datepicker__dialog-navbuttons\">\n              <button type=\"button\" class=\"moj-datepicker__button moj-js-datepicker-prev-year\">\n                <span class=\"govuk-visually-hidden\">Previous year</span>\n                <svg width=\"44\" height=\"40\" viewBox=\"0 0 44 40\" fill=\"none\" fill=\"none\" focusable=\"false\" aria-hidden=\"true\" role=\"img\">\n                  <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M23.1643 20L28.9572 14.2071L27.5429 12.7929L20.3358 20L27.5429 27.2071L28.9572 25.7929L23.1643 20Z\" fill=\"currentColor\"/>\n                  <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M17.1643 20L22.9572 14.2071L21.5429 12.7929L14.3358 20L21.5429 27.2071L22.9572 25.7929L17.1643 20Z\" fill=\"currentColor\"/>\n                </svg>\n              </button>\n\n              <button type=\"button\" class=\"moj-datepicker__button moj-js-datepicker-prev-month\">\n                <span class=\"govuk-visually-hidden\">Previous month</span>\n                <svg width=\"44\" height=\"40\" viewBox=\"0 0 44 40\" fill=\"none\" focusable=\"false\" aria-hidden=\"true\" role=\"img\">\n                  <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M20.5729 20L25.7865 14.2071L24.5137 12.7929L18.0273 20L24.5137 27.2071L25.7865 25.7929L20.5729 20Z\" fill=\"currentColor\"/>\n                </svg>\n              </button>\n            </div>\n\n            <h2 id=\"${titleId}\" class=\"moj-datepicker__dialog-title moj-js-datepicker-month-year\" aria-live=\"polite\">June 2020</h2>\n\n            <div class=\"moj-datepicker__dialog-navbuttons\">\n              <button type=\"button\" class=\"moj-datepicker__button moj-js-datepicker-next-month\">\n                <span class=\"govuk-visually-hidden\">Next month</span>\n                <svg width=\"44\" height=\"40\" viewBox=\"0 0 44 40\" fill=\"none\"  focusable=\"false\" aria-hidden=\"true\" role=\"img\">\n                  <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M23.4271 20L18.2135 14.2071L19.4863 12.7929L25.9727 20L19.4863 27.2071L18.2135 25.7929L23.4271 20Z\" fill=\"currentColor\"/>\n                </svg>\n              </button>\n\n              <button type=\"button\" class=\"moj-datepicker__button moj-js-datepicker-next-year\">\n                <span class=\"govuk-visually-hidden\">Next year</span>\n                <svg width=\"44\" height=\"40\" viewBox=\"0 0 44 40\" fill=\"none\" fill=\"none\" focusable=\"false\" aria-hidden=\"true\" role=\"img\">\n                  <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M20.8357 20L15.0428 14.2071L16.4571 12.7929L23.6642 20L16.4571 27.2071L15.0428 25.7929L20.8357 20Z\" fill=\"currentColor\"/>\n                  <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M26.8357 20L21.0428 14.2071L22.4571 12.7929L29.6642 20L22.4571 27.2071L21.0428 25.7929L26.8357 20Z\" fill=\"currentColor\"/>\n                </svg>\n              </button>\n            </div>\n          </div>\n\n          <table class=\"moj-datepicker__calendar moj-js-datepicker-grid\" role=\"grid\" aria-labelledby=\"${titleId}\">\n            <thead>\n              <tr></tr>\n            </thead>\n\n            <tbody></tbody>\n          </table>\n\n          <div class=\"govuk-button-group\">\n            <button type=\"button\" class=\"govuk-button moj-js-datepicker-ok\">Select</button>\n            <button type=\"button\" class=\"govuk-button govuk-button--secondary moj-js-datepicker-cancel\">Close</button>\n          </div>`\n  }\n\n  createCalendarHeaders() {\n    this.dayLabels.forEach((day) => {\n      const html = `<th scope=\"col\"><span aria-hidden=\"true\">${day.substring(0, 3)}</span><span class=\"govuk-visually-hidden\">${day}</span></th>`\n      const $headerRow = this.$dialog.querySelector('thead > tr')\n      $headerRow.insertAdjacentHTML('beforeend', html)\n    })\n  }\n\n  /**\n   * Pads given number with leading zeros\n   *\n   * @param {number} value - The value to be padded\n   * @param {number} length - The length in characters of the output\n   * @returns {string}\n   */\n  leadingZeros(value, length = 2) {\n    let ret = value.toString()\n\n    while (ret.length < length) {\n      ret = `0${ret}`\n    }\n\n    return ret\n  }\n\n  setOptions() {\n    this.setMinAndMaxDatesOnCalendar()\n    this.setExcludedDates()\n    this.setExcludedDays()\n    this.setWeekStartDay()\n  }\n\n  setMinAndMaxDatesOnCalendar() {\n    if (this.config.minDate) {\n      this.minDate = this.formattedDateFromString(this.config.minDate, null)\n      if (this.minDate && this.currentDate < this.minDate) {\n        this.currentDate = this.minDate\n      }\n    }\n\n    if (this.config.maxDate) {\n      this.maxDate = this.formattedDateFromString(this.config.maxDate, null)\n      if (this.maxDate && this.currentDate > this.maxDate) {\n        this.currentDate = this.maxDate\n      }\n    }\n  }\n\n  setExcludedDates() {\n    if (this.config.excludedDates) {\n      this.excludedDates = this.config.excludedDates\n        .replace(/\\s+/, ' ')\n        .split(' ')\n        .map((item) => {\n          return item.includes('-')\n            ? this.parseDateRangeString(item)\n            : [this.formattedDateFromString(item)]\n        })\n        .reduce((dates, items) => dates.concat(items))\n        .filter((date) => date)\n    }\n  }\n\n  /**\n   * Parses a daterange string into an array of dates\n   *\n   * @param {string} datestring - A daterange string in the format \"dd/mm/yyyy-dd/mm/yyyy\"\n   */\n  parseDateRangeString(datestring) {\n    const dates = []\n    const [startDate, endDate] = datestring\n      .split('-')\n      .map((d) => this.formattedDateFromString(d, null))\n\n    if (startDate && endDate) {\n      const date = new Date(startDate.getTime())\n      /* eslint-disable no-unmodified-loop-condition */\n      while (date <= endDate) {\n        dates.push(new Date(date))\n        date.setDate(date.getDate() + 1)\n      }\n      /* eslint-enable no-unmodified-loop-condition */\n    }\n    return dates\n  }\n\n  setExcludedDays() {\n    if (this.config.excludedDays) {\n      // lowercase and arrange dayLabels to put indexOf sunday == 0 for comparison\n      // with getDay() function\n      const weekDays = this.dayLabels.map((item) => item.toLowerCase())\n      if (this.config.weekStartDay === 'monday') {\n        weekDays.unshift(weekDays.pop())\n      }\n\n      this.excludedDays = this.config.excludedDays\n        .replace(/\\s+/, ' ')\n        .toLowerCase()\n        .split(' ')\n        .map((item) => weekDays.indexOf(item))\n        .filter((item) => item !== -1)\n    }\n  }\n\n  setWeekStartDay() {\n    const weekStartDayParam = this.config.weekStartDay\n    if (weekStartDayParam && weekStartDayParam.toLowerCase() === 'sunday') {\n      this.config.weekStartDay = 'sunday'\n      // Rotate dayLabels array to put Sunday as the first item\n      this.dayLabels.unshift(this.dayLabels.pop())\n    } else {\n      this.config.weekStartDay = 'monday'\n    }\n  }\n\n  /**\n   * Determine if a date is selectable\n   *\n   * @param {Date} date - the date to check\n   * @returns {boolean}\n   */\n  isExcludedDate(date) {\n    // This comparison does not work correctly - it will exclude the mindate itself\n    // see: https://github.com/ministryofjustice/moj-frontend/issues/923\n    if (this.minDate && this.minDate > date) {\n      return true\n    }\n\n    // This comparison works as expected - the maxdate will not be excluded\n    if (this.maxDate && this.maxDate < date) {\n      return true\n    }\n\n    for (const excludedDate of this.excludedDates) {\n      if (date.toDateString() === excludedDate.toDateString()) {\n        return true\n      }\n    }\n\n    if (this.excludedDays.includes(date.getDay())) {\n      return true\n    }\n\n    return false\n  }\n\n  /**\n   * Get a Date object from a string\n   *\n   * @param {string} dateString - string in the format d/m/yyyy dd/mm/yyyy\n   * @param {Date} fallback - date object to return if formatting fails\n   * @returns {Date}\n   */\n  formattedDateFromString(dateString, fallback = new Date()) {\n    let formattedDate = null\n    // Accepts d/m/yyyy and dd/mm/yyyy\n    const dateFormatPattern = /(\\d{1,2})([-/,. ])(\\d{1,2})\\2(\\d{4})/\n\n    if (!dateFormatPattern.test(dateString)) return fallback\n\n    const match = dateFormatPattern.exec(dateString)\n    const day = match[1]\n    const month = match[3]\n    const year = match[4]\n\n    formattedDate = new Date(`${year}-${month}-${day}`)\n    if (\n      formattedDate instanceof Date &&\n      Number.isFinite(formattedDate.getTime())\n    ) {\n      return formattedDate\n    }\n    return fallback\n  }\n\n  /**\n   * Get a formatted date string from a Date object\n   *\n   * @param {Date} date - date to format to a string\n   * @returns {string}\n   */\n  formattedDateFromDate(date) {\n    if (this.config.leadingZeros) {\n      return `${this.leadingZeros(date.getDate())}/${this.leadingZeros(date.getMonth() + 1)}/${date.getFullYear()}`\n    }\n\n    return `${date.getDate()}/${date.getMonth() + 1}/${date.getFullYear()}`\n  }\n\n  /**\n   * Get a human readable date in the format Monday 2 March 2024\n   *\n   * @param {Date} date - Date to format\n   * @returns {string}\n   */\n  formattedDateHuman(date) {\n    return `${this.dayLabels[(date.getDay() + 6) % 7]} ${date.getDate()} ${this.monthLabels[date.getMonth()]} ${date.getFullYear()}`\n  }\n\n  /**\n   * @param {MouseEvent} event - Click event\n   */\n  backgroundClick(event) {\n    if (\n      this.isOpen() &&\n      event.target instanceof Node &&\n      !this.$dialog.contains(event.target) &&\n      !this.$input.contains(event.target) &&\n      !this.$calendarButton.contains(event.target)\n    ) {\n      event.preventDefault()\n      this.closeDialog()\n    }\n  }\n\n  /**\n   * @param {KeyboardEvent} event - Keydown event\n   */\n  firstButtonKeydown(event) {\n    if (event.key === 'Tab' && event.shiftKey) {\n      this.$lastButtonInDialog.focus()\n      event.preventDefault()\n    }\n  }\n\n  /**\n   * @param {KeyboardEvent} event - Keydown event\n   */\n  lastButtonKeydown(event) {\n    if (event.key === 'Tab' && !event.shiftKey) {\n      this.$firstButtonInDialog.focus()\n      event.preventDefault()\n    }\n  }\n\n  // render calendar\n  updateCalendar() {\n    this.$dialogTitle.innerHTML = `${this.monthLabels[this.currentDate.getMonth()]} ${this.currentDate.getFullYear()}`\n\n    const day = this.currentDate\n    const firstOfMonth = new Date(day.getFullYear(), day.getMonth(), 1)\n    let dayOfWeek\n\n    if (this.config.weekStartDay === 'monday') {\n      dayOfWeek = firstOfMonth.getDay() === 0 ? 6 : firstOfMonth.getDay() - 1 // Change logic to make Monday first day of week, i.e. 0\n    } else {\n      dayOfWeek = firstOfMonth.getDay()\n    }\n\n    firstOfMonth.setDate(firstOfMonth.getDate() - dayOfWeek)\n\n    const thisDay = new Date(firstOfMonth)\n\n    // loop through our days\n    for (const calendarDay of this.calendarDays) {\n      const hidden = thisDay.getMonth() !== day.getMonth()\n      const disabled = this.isExcludedDate(thisDay)\n\n      calendarDay.update(thisDay, hidden, disabled)\n\n      thisDay.setDate(thisDay.getDate() + 1)\n    }\n  }\n\n  /**\n   * @param {boolean} [focus] - Focus the day button\n   */\n  setCurrentDate(focus = true) {\n    const { currentDate } = this\n    this.calendarDays.forEach((calendarDay) => {\n      calendarDay.$button.classList.add('moj-datepicker__button')\n      calendarDay.$button.classList.add('moj-datepicker__calendar-day')\n      calendarDay.$button.setAttribute('tabindex', '-1')\n      calendarDay.$button.classList.remove(this.selectedDayButtonClass)\n      const calendarDayDate = calendarDay.date\n      calendarDayDate.setHours(0, 0, 0, 0)\n\n      const today = new Date()\n      today.setHours(0, 0, 0, 0)\n\n      if (\n        calendarDayDate.getTime() ===\n        currentDate.getTime() /* && !calendarDay.button.disabled */\n      ) {\n        if (focus) {\n          calendarDay.$button.setAttribute('tabindex', '0')\n          calendarDay.$button.focus()\n          calendarDay.$button.classList.add(this.selectedDayButtonClass)\n        }\n      }\n\n      if (\n        this.inputDate &&\n        calendarDayDate.getTime() === this.inputDate.getTime()\n      ) {\n        calendarDay.$button.classList.add(this.currentDayButtonClass)\n        calendarDay.$button.setAttribute('aria-current', 'date')\n      } else {\n        calendarDay.$button.classList.remove(this.currentDayButtonClass)\n        calendarDay.$button.removeAttribute('aria-current')\n      }\n\n      if (calendarDayDate.getTime() === today.getTime()) {\n        calendarDay.$button.classList.add(this.todayButtonClass)\n      } else {\n        calendarDay.$button.classList.remove(this.todayButtonClass)\n      }\n    })\n\n    // if no date is tab-able, make the first non-disabled date tab-able\n    if (!focus) {\n      const enabledDays = this.calendarDays.filter((calendarDay) => {\n        return (\n          window.getComputedStyle(calendarDay.$button).display === 'block' &&\n          !calendarDay.$button.disabled\n        )\n      })\n\n      enabledDays[0].$button.setAttribute('tabindex', '0')\n\n      this.currentDate = enabledDays[0].date\n    }\n  }\n\n  /**\n   * @param {Date} date - Date to select\n   */\n  selectDate(date) {\n    if (this.isExcludedDate(date)) {\n      return\n    }\n\n    this.$calendarButton.querySelector('span').innerText =\n      `Choose date. Selected date is ${this.formattedDateHuman(date)}`\n    this.$input.value = this.formattedDateFromDate(date)\n\n    const changeEvent = new Event('change', { bubbles: true, cancelable: true })\n    this.$input.dispatchEvent(changeEvent)\n\n    this.closeDialog()\n  }\n\n  isOpen() {\n    return this.$dialog.classList.contains('moj-datepicker__dialog--open')\n  }\n\n  /**\n   * @param {MouseEvent} event - Click event\n   */\n  toggleDialog(event) {\n    event.preventDefault()\n    if (this.isOpen()) {\n      this.closeDialog()\n    } else {\n      this.setMinAndMaxDatesOnCalendar()\n      this.openDialog()\n    }\n  }\n\n  openDialog() {\n    this.$dialog.hidden = false\n    this.$dialog.classList.add('moj-datepicker__dialog--open')\n    this.$calendarButton.setAttribute('aria-expanded', 'true')\n\n    // position the dialog\n    // if input is wider than dialog pin it to the right\n    if (this.$input.offsetWidth > this.$dialog.offsetWidth) {\n      this.$dialog.style.right = `0px`\n    }\n    this.$dialog.style.top = `${this.$input.offsetHeight + 3}px`\n\n    // get the date from the input element\n    this.inputDate = this.formattedDateFromString(this.$input.value)\n    this.currentDate = this.inputDate\n    this.currentDate.setHours(0, 0, 0, 0)\n\n    this.updateCalendar()\n    this.setCurrentDate()\n  }\n\n  closeDialog() {\n    this.$dialog.hidden = true\n    this.$dialog.classList.remove('moj-datepicker__dialog--open')\n    this.$calendarButton.setAttribute('aria-expanded', 'false')\n    this.$calendarButton.focus()\n  }\n\n  /**\n   * @param {Date} date - Date to go to\n   * @param {boolean} [focus] - Focus the day button\n   */\n  goToDate(date, focus) {\n    const current = this.currentDate\n    this.currentDate = date\n\n    if (\n      current.getMonth() !== this.currentDate.getMonth() ||\n      current.getFullYear() !== this.currentDate.getFullYear()\n    ) {\n      this.updateCalendar()\n    }\n\n    this.setCurrentDate(focus)\n  }\n\n  // day navigation\n  focusNextDay() {\n    const date = new Date(this.currentDate)\n    date.setDate(date.getDate() + 1)\n    this.goToDate(date)\n  }\n\n  focusPreviousDay() {\n    const date = new Date(this.currentDate)\n    date.setDate(date.getDate() - 1)\n    this.goToDate(date)\n  }\n\n  // week navigation\n  focusNextWeek() {\n    const date = new Date(this.currentDate)\n    date.setDate(date.getDate() + 7)\n    this.goToDate(date)\n  }\n\n  focusPreviousWeek() {\n    const date = new Date(this.currentDate)\n    date.setDate(date.getDate() - 7)\n    this.goToDate(date)\n  }\n\n  focusFirstDayOfWeek() {\n    const date = new Date(this.currentDate)\n    const firstDayOfWeekIndex = this.config.weekStartDay === 'sunday' ? 0 : 1\n    const dayOfWeek = date.getDay()\n    const diff =\n      dayOfWeek >= firstDayOfWeekIndex\n        ? dayOfWeek - firstDayOfWeekIndex\n        : 6 - dayOfWeek\n\n    date.setDate(date.getDate() - diff)\n    date.setHours(0, 0, 0, 0)\n\n    this.goToDate(date)\n  }\n\n  focusLastDayOfWeek() {\n    const date = new Date(this.currentDate)\n    const lastDayOfWeekIndex = this.config.weekStartDay === 'sunday' ? 6 : 0\n    const dayOfWeek = date.getDay()\n    const diff =\n      dayOfWeek <= lastDayOfWeekIndex\n        ? lastDayOfWeekIndex - dayOfWeek\n        : 7 - dayOfWeek\n\n    date.setDate(date.getDate() + diff)\n    date.setHours(0, 0, 0, 0)\n\n    this.goToDate(date)\n  }\n\n  /**\n   * Month navigation\n   *\n   * @param {KeyboardEvent | MouseEvent} event - Key press or click event\n   * @param {boolean} [focus] - Focus the day button\n   */\n  focusNextMonth(event, focus = true) {\n    event.preventDefault()\n    const date = new Date(this.currentDate)\n    date.setMonth(date.getMonth() + 1, 1)\n    this.goToDate(date, focus)\n  }\n\n  /**\n   * @param {KeyboardEvent | MouseEvent} event - Key press or click event\n   * @param {boolean} [focus] - Focus the day button\n   */\n  focusPreviousMonth(event, focus = true) {\n    event.preventDefault()\n    const date = new Date(this.currentDate)\n    date.setMonth(date.getMonth() - 1, 1)\n    this.goToDate(date, focus)\n  }\n\n  /**\n   * Year navigation\n   *\n   * @param {KeyboardEvent | MouseEvent} event - Key press or click event\n   * @param {boolean} [focus] - Focus the day button\n   */\n  focusNextYear(event, focus = true) {\n    event.preventDefault()\n    const date = new Date(this.currentDate)\n    date.setFullYear(date.getFullYear() + 1, date.getMonth(), 1)\n    this.goToDate(date, focus)\n  }\n\n  /**\n   * @param {KeyboardEvent | MouseEvent} event - Key press or click event\n   * @param {boolean} [focus] - Focus the day button\n   */\n  focusPreviousYear(event, focus = true) {\n    event.preventDefault()\n    const date = new Date(this.currentDate)\n    date.setFullYear(date.getFullYear() - 1, date.getMonth(), 1)\n    this.goToDate(date, focus)\n  }\n\n  /**\n   * Name for the component used when initialising using data-module attributes.\n   */\n  static moduleName = 'moj-date-picker'\n\n  /**\n   * Date picker default config\n   *\n   * @type {DatePickerConfig}\n   */\n  static defaults = Object.freeze({\n    leadingZeros: false,\n    weekStartDay: 'monday',\n    input: {\n      selector: '.moj-js-datepicker-input'\n    }\n  })\n\n  /**\n   * Date picker config schema\n   *\n   * @satisfies {Schema<DatePickerConfig>}\n   */\n  static schema = Object.freeze(\n    /** @type {const} */ ({\n      properties: {\n        excludedDates: { type: 'string' },\n        excludedDays: { type: 'string' },\n        leadingZeros: { type: 'boolean' },\n        maxDate: { type: 'string' },\n        minDate: { type: 'string' },\n        weekStartDay: { type: 'string' },\n        input: { type: 'object' }\n      }\n    })\n  )\n}\n\nclass DSCalendarDay {\n  /**\n   *\n   * @param {HTMLButtonElement} $button\n   * @param {number} index\n   * @param {number} row\n   * @param {number} column\n   * @param {DatePicker} picker\n   */\n  constructor($button, index, row, column, picker) {\n    this.index = index\n    this.row = row\n    this.column = column\n    this.$button = $button\n    this.picker = picker\n    this.date = new Date()\n    this.$button.addEventListener('keydown', this.keyPress.bind(this))\n    this.$button.addEventListener('click', this.click.bind(this))\n  }\n\n  /**\n   * @param {Date} day - the Date for the calendar day\n   * @param {boolean} hidden - visibility of the day\n   * @param {boolean} disabled - is the day selectable or excluded\n   */\n  update(day, hidden, disabled) {\n    const label = day.getDate()\n    let accessibleLabel = this.picker.formattedDateHuman(day)\n\n    if (disabled) {\n      this.$button.setAttribute('aria-disabled', 'true')\n      accessibleLabel = `Excluded date, ${accessibleLabel}`\n    } else {\n      this.$button.removeAttribute('aria-disabled')\n    }\n\n    if (hidden) {\n      this.$button.style.display = 'none'\n    } else {\n      this.$button.style.display = 'block'\n    }\n    this.$button.setAttribute(\n      'data-testid',\n      this.picker.formattedDateFromDate(day)\n    )\n\n    this.$button.innerHTML = `<span class=\"govuk-visually-hidden\">${accessibleLabel}</span><span aria-hidden=\"true\">${label}</span>`\n    this.date = new Date(day)\n  }\n\n  /**\n   * @param {MouseEvent} event - Click event\n   */\n  click(event) {\n    this.picker.goToDate(this.date)\n    this.picker.selectDate(this.date)\n\n    event.stopPropagation()\n    event.preventDefault()\n  }\n\n  /**\n   * @param {KeyboardEvent} event - Keydown event\n   */\n  keyPress(event) {\n    let calendarNavKey = true\n\n    switch (event.key) {\n      case 'ArrowLeft':\n        this.picker.focusPreviousDay()\n        break\n      case 'ArrowRight':\n        this.picker.focusNextDay()\n        break\n      case 'ArrowUp':\n        this.picker.focusPreviousWeek()\n        break\n      case 'ArrowDown':\n        this.picker.focusNextWeek()\n        break\n      case 'Home':\n        this.picker.focusFirstDayOfWeek()\n        break\n      case 'End':\n        this.picker.focusLastDayOfWeek()\n        break\n      case 'PageUp': {\n        if (event.shiftKey) {\n          this.picker.focusPreviousYear(event)\n        } else {\n          this.picker.focusPreviousMonth(event)\n        }\n        break\n      }\n      case 'PageDown': {\n        if (event.shiftKey) {\n          this.picker.focusNextYear(event)\n        } else {\n          this.picker.focusNextMonth(event)\n        }\n        break\n      }\n      default:\n        calendarNavKey = false\n        break\n    }\n\n    if (calendarNavKey) {\n      event.preventDefault()\n      event.stopPropagation()\n    }\n  }\n}\n\n/**\n * Date picker config\n *\n * @typedef {object} DatePickerConfig\n * @property {string} [excludedDates] - Dates that cannot be selected\n * @property {string} [excludedDays] - Days that cannot be selected\n * @property {boolean} [leadingZeros] - Whether to add leading zeroes when populating the field\n * @property {string} [minDate] - The earliest available date\n * @property {string} [maxDate] - The latest available date\n * @property {string} [weekStartDay] - First day of the week in calendar view\n * @property {object} [input] - Input config\n * @property {string} [input.selector] - Selector for the input element\n * @property {Element | null} [input.element] - HTML element for the input\n */\n\n/**\n * @import { Schema } from 'govuk-frontend/dist/govuk/common/configuration.mjs'\n */\n","import { ConfigurableComponent } from 'govuk-frontend'\n\n/**\n * @augments {ConfigurableComponent<FilterToggleButtonConfig>}\n */\nexport class FilterToggleButton extends ConfigurableComponent {\n  /**\n   * @param {Element | null} $root - HTML element to use for filter toggle button\n   * @param {FilterToggleButtonConfig} [config] - Filter toggle button config\n   */\n  constructor($root, config = {}) {\n    super($root, config)\n\n    const $toggleButtonContainer =\n      this.config.toggleButtonContainer.element ??\n      document.querySelector(this.config.toggleButtonContainer.selector)\n\n    const $closeButtonContainer =\n      this.config.closeButtonContainer.element ??\n      this.$root.querySelector(this.config.closeButtonContainer.selector)\n\n    if (\n      !(\n        $toggleButtonContainer instanceof HTMLElement &&\n        $closeButtonContainer instanceof HTMLElement\n      )\n    ) {\n      return this\n    }\n\n    this.$toggleButtonContainer = $toggleButtonContainer\n    this.$closeButtonContainer = $closeButtonContainer\n\n    this.createToggleButton()\n    this.setupResponsiveChecks()\n\n    this.$root.setAttribute('tabindex', '-1')\n\n    if (this.config.startHidden) {\n      this.hideMenu()\n    }\n  }\n\n  setupResponsiveChecks() {\n    this.mq = window.matchMedia(this.config.bigModeMediaQuery)\n    this.mq.addListener(this.checkMode.bind(this))\n    this.checkMode()\n  }\n\n  createToggleButton() {\n    this.$menuButton = document.createElement('button')\n    this.$menuButton.setAttribute('type', 'button')\n    this.$menuButton.setAttribute('aria-haspopup', 'true')\n    this.$menuButton.setAttribute('aria-expanded', 'false')\n\n    this.$menuButton.className = `govuk-button ${this.config.toggleButton.classes}`\n    this.$menuButton.textContent = this.config.toggleButton.showText\n\n    this.$menuButton.addEventListener(\n      'click',\n      this.onMenuButtonClick.bind(this)\n    )\n\n    this.$toggleButtonContainer.append(this.$menuButton)\n  }\n\n  checkMode() {\n    if (this.mq.matches) {\n      this.enableBigMode()\n    } else {\n      this.enableSmallMode()\n    }\n  }\n\n  enableBigMode() {\n    this.showMenu()\n    this.removeCloseButton()\n  }\n\n  enableSmallMode() {\n    this.hideMenu()\n    this.addCloseButton()\n  }\n\n  addCloseButton() {\n    this.$closeButton = document.createElement('button')\n    this.$closeButton.setAttribute('type', 'button')\n\n    this.$closeButton.className = this.config.closeButton.classes\n    this.$closeButton.textContent = this.config.closeButton.text\n\n    this.$closeButton.addEventListener('click', this.onCloseClick.bind(this))\n    this.$closeButtonContainer.append(this.$closeButton)\n  }\n\n  onCloseClick() {\n    this.hideMenu()\n    this.$menuButton.focus()\n  }\n\n  removeCloseButton() {\n    if (this.$closeButton) {\n      this.$closeButton.remove()\n      this.$closeButton = null\n    }\n  }\n\n  hideMenu() {\n    this.$menuButton.setAttribute('aria-expanded', 'false')\n    this.$root.classList.add('moj-js-hidden')\n    this.$menuButton.textContent = this.config.toggleButton.showText\n  }\n\n  showMenu() {\n    this.$menuButton.setAttribute('aria-expanded', 'true')\n    this.$root.classList.remove('moj-js-hidden')\n    this.$menuButton.textContent = this.config.toggleButton.hideText\n  }\n\n  onMenuButtonClick() {\n    this.toggle()\n  }\n\n  toggle() {\n    if (this.$menuButton.getAttribute('aria-expanded') === 'false') {\n      this.showMenu()\n      this.$root.focus()\n    } else {\n      this.hideMenu()\n    }\n  }\n\n  /**\n   * Name for the component used when initialising using data-module attributes.\n   */\n  static moduleName = 'moj-filter'\n\n  /**\n   * Filter toggle button config\n   *\n   * @type {FilterToggleButtonConfig}\n   */\n  static defaults = Object.freeze({\n    bigModeMediaQuery: '(min-width: 48.0625em)',\n    startHidden: true,\n    toggleButton: {\n      showText: 'Show filter',\n      hideText: 'Hide filter',\n      classes: 'govuk-button--secondary'\n    },\n    toggleButtonContainer: {\n      selector: '.moj-action-bar__filter'\n    },\n    closeButton: {\n      text: 'Close',\n      classes: 'moj-filter__close'\n    },\n    closeButtonContainer: {\n      selector: '.moj-filter__header-action'\n    }\n  })\n\n  /**\n   * Filter toggle button config schema\n   *\n   * @satisfies {Schema<FilterToggleButtonConfig>}\n   */\n  static schema = Object.freeze(\n    /** @type {const} */ ({\n      properties: {\n        bigModeMediaQuery: { type: 'string' },\n        startHidden: { type: 'boolean' },\n        toggleButton: { type: 'object' },\n        toggleButtonContainer: { type: 'object' },\n        closeButton: { type: 'object' },\n        closeButtonContainer: { type: 'object' }\n      }\n    })\n  )\n}\n\n/**\n * @typedef {object} FilterToggleButtonConfig\n * @property {string} [bigModeMediaQuery] - Media query for big mode\n * @property {boolean} [startHidden] - Whether to start hidden\n * @property {object} [toggleButton] - Toggle button config\n * @property {string} [toggleButton.showText] - Text for show button\n * @property {string} [toggleButton.hideText] - Text for hide button\n * @property {string} [toggleButton.classes] - Classes for toggle button\n * @property {object} [toggleButtonContainer] - Toggle button container config\n * @property {string} [toggleButtonContainer.selector] - Selector for toggle button container\n * @property {Element | null} [toggleButtonContainer.element] - HTML element for toggle button container\n * @property {object} [closeButton] - Close button config\n * @property {string} [closeButton.text] - Text for close button\n * @property {string} [closeButton.classes] - Classes for close button\n * @property {object} [closeButtonContainer] - Close button container config\n * @property {string} [closeButtonContainer.selector] - Selector for close button container\n * @property {Element | null} [closeButtonContainer.element] - HTML element for close button container\n */\n\n/**\n * @import { Schema } from 'govuk-frontend/dist/govuk/common/configuration.mjs'\n */\n","import { ConfigurableComponent } from 'govuk-frontend'\n\nimport { addAttributeValue, removeAttributeValue } from '../../helpers.mjs'\n\n/**\n * @augments {ConfigurableComponent<FormValidatorConfig, HTMLFormElement>}\n */\nexport class FormValidator extends ConfigurableComponent {\n  /**\n   * @param {Element | null} $root - HTML element to use for form validator\n   * @param {FormValidatorConfig} [config] - Form validator config\n   */\n  constructor($root, config = {}) {\n    super($root, config)\n\n    const $summary =\n      this.config.summary.element ||\n      document.querySelector(this.config.summary.selector)\n\n    if (!$summary || !($summary instanceof HTMLElement)) {\n      return this\n    }\n\n    this.$summary = $summary\n\n    this.errors = /** @type {ValidationError[]} */ ([])\n    this.validators = /** @type {Validator[]} */ ([])\n    this.originalTitle = document.title\n\n    this.$root.addEventListener('submit', this.onSubmit.bind(this))\n  }\n\n  escapeHtml(string = '') {\n    return String(string).replace(\n      /[&<>\"'`=/]/g,\n      (name) => FormValidator.entityMap[name]\n    )\n  }\n\n  resetTitle() {\n    document.title = this.originalTitle\n  }\n\n  updateTitle() {\n    document.title = `${this.errors.length} errors - ${document.title}`\n  }\n\n  showSummary() {\n    this.$summary.innerHTML = this.getSummaryHtml()\n    this.$summary.classList.remove('moj-hidden')\n    this.$summary.setAttribute('aria-labelledby', 'errorSummary-heading')\n    this.$summary.focus()\n  }\n\n  getSummaryHtml() {\n    let html =\n      '<h2 id=\"error-summary-title\" class=\"govuk-error-summary__title\">There is a problem</h2>'\n    html += '<div class=\"govuk-error-summary__body\">'\n    html += '<ul class=\"govuk-list govuk-error-summary__list\">'\n    for (const error of this.errors) {\n      html += '<li>'\n      html += `<a href=\"#${this.escapeHtml(error.fieldName)}\">`\n      html += this.escapeHtml(error.message)\n      html += '</a>'\n      html += '</li>'\n    }\n    html += '</ul>'\n    html += '</div>'\n    return html\n  }\n\n  hideSummary() {\n    this.$summary.classList.add('moj-hidden')\n    this.$summary.removeAttribute('aria-labelledby')\n  }\n\n  /**\n   * @param {SubmitEvent} event - Form submit event\n   */\n  onSubmit(event) {\n    this.removeInlineErrors()\n    this.hideSummary()\n    this.resetTitle()\n    if (!this.validate()) {\n      event.preventDefault()\n      this.updateTitle()\n      this.showSummary()\n      this.showInlineErrors()\n    }\n  }\n\n  showInlineErrors() {\n    for (const error of this.errors) {\n      this.showInlineError(error)\n    }\n  }\n\n  /**\n   * @param {ValidationError} error\n   */\n  showInlineError(error) {\n    const $errorSpan = document.createElement('span')\n    $errorSpan.id = `${error.fieldName}-error`\n    $errorSpan.classList.add('govuk-error-message')\n    $errorSpan.innerHTML = this.escapeHtml(error.message)\n\n    const $control = document.querySelector(`#${error.fieldName}`)\n    const $fieldset = $control.closest('.govuk-fieldset')\n    const $fieldContainer = ($fieldset || $control).closest('.govuk-form-group')\n\n    const $label = $fieldContainer.querySelector('label')\n    const $legend = $fieldContainer.querySelector('legend')\n\n    $fieldContainer.classList.add('govuk-form-group--error')\n\n    if ($fieldset && $legend) {\n      $legend.after($errorSpan)\n      $fieldContainer.setAttribute('aria-invalid', 'true')\n      addAttributeValue($fieldset, 'aria-describedby', $errorSpan.id)\n    } else if ($label && $control) {\n      $label.after($errorSpan)\n      $control.setAttribute('aria-invalid', 'true')\n      addAttributeValue($control, 'aria-describedby', $errorSpan.id)\n    }\n  }\n\n  removeInlineErrors() {\n    for (const error of this.errors) {\n      this.removeInlineError(error)\n    }\n  }\n\n  /**\n   * @param {ValidationError} error\n   */\n  removeInlineError(error) {\n    const $errorSpan = document.querySelector(`#${error.fieldName}-error`)\n\n    const $control = document.querySelector(`#${error.fieldName}`)\n    const $fieldset = $control.closest('.govuk-fieldset')\n    const $fieldContainer = ($fieldset || $control).closest('.govuk-form-group')\n\n    const $label = $fieldContainer.querySelector('label')\n    const $legend = $fieldContainer.querySelector('legend')\n\n    $errorSpan.remove()\n    $fieldContainer.classList.remove('govuk-form-group--error')\n\n    if ($fieldset && $legend) {\n      $fieldContainer.removeAttribute('aria-invalid')\n      removeAttributeValue($fieldset, 'aria-describedby', $errorSpan.id)\n    } else if ($label && $control) {\n      $control.removeAttribute('aria-invalid')\n      removeAttributeValue($control, 'aria-describedby', $errorSpan.id)\n    }\n  }\n\n  /**\n   * @param {string} fieldName - Field name\n   * @param {ValidationRule[]} rules - Validation rules\n   */\n  addValidator(fieldName, rules) {\n    this.validators.push({\n      fieldName,\n      rules,\n      field: this.$root.elements.namedItem(fieldName)\n    })\n  }\n\n  validate() {\n    this.errors = []\n\n    /** @type {Validator | null} */\n    let validator = null\n\n    /** @type {boolean | string} */\n    let validatorReturnValue = true\n\n    let i\n    let j\n\n    for (i = 0; i < this.validators.length; i++) {\n      validator = this.validators[i]\n      for (j = 0; j < validator.rules.length; j++) {\n        validatorReturnValue = validator.rules[j].method(\n          validator.field,\n          validator.rules[j].params\n        )\n\n        if (\n          typeof validatorReturnValue === 'boolean' &&\n          !validatorReturnValue\n        ) {\n          this.errors.push({\n            fieldName: validator.fieldName,\n            message: validator.rules[j].message\n          })\n          break\n        } else if (typeof validatorReturnValue === 'string') {\n          this.errors.push({\n            fieldName: validatorReturnValue,\n            message: validator.rules[j].message\n          })\n          break\n        }\n      }\n    }\n    return this.errors.length === 0\n  }\n\n  /**\n   * @type {Record<string, string>}\n   */\n  static entityMap = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#39;',\n    '/': '&#x2F;',\n    '`': '&#x60;',\n    '=': '&#x3D;'\n  }\n\n  /**\n   * Name for the component used when initialising using data-module attributes.\n   */\n  static moduleName = 'moj-form-validator'\n\n  /**\n   * Multi file upload default config\n   *\n   * @type {FormValidatorConfig}\n   */\n  static defaults = Object.freeze({\n    summary: {\n      selector: '.govuk-error-summary'\n    }\n  })\n\n  /**\n   * Multi file upload config schema\n   *\n   * @satisfies {Schema<FormValidatorConfig>}\n   */\n  static schema = Object.freeze(\n    /** @type {const} */ ({\n      properties: {\n        summary: { type: 'object' }\n      }\n    })\n  )\n}\n\n/**\n * @typedef {object} FormValidatorConfig\n * @property {object} [summary] - Error summary config\n * @property {string} [summary.selector] - Selector for error summary\n * @property {Element | null} [summary.element] - HTML element for error summary\n */\n\n/**\n * @typedef {object} ValidationRule\n * @property {(field: Validator['field'], params: Record<string, Validator['field']>) => boolean | string} method - Validation method\n * @property {string} message - Error message\n * @property {Record<string, Validator['field']>} [params] - Parameters for validation\n */\n\n/**\n * @typedef {object} ValidationError\n * @property {string} fieldName - Name of the field\n * @property {string} message - Validation error message\n */\n\n/**\n * @typedef {object} Validator\n * @property {string} fieldName - Name of the field\n * @property {ValidationRule[]} rules - Validation rules\n * @property {Element | RadioNodeList} field - Form field\n */\n\n/**\n * @import { Schema } from 'govuk-frontend/dist/govuk/common/configuration.mjs'\n */\n","/* eslint-disable @typescript-eslint/no-empty-function */\n\nimport { ConfigurableComponent } from 'govuk-frontend'\n\n/**\n * @augments {ConfigurableComponent<MultiFileUploadConfig>}\n */\nexport class MultiFileUpload extends ConfigurableComponent {\n  /**\n   * @param {Element | null} $root - HTML element to use for multi file upload\n   * @param {MultiFileUploadConfig} [config] - Multi file upload config\n   */\n  constructor($root, config = {}) {\n    super($root, config)\n\n    if (!MultiFileUpload.isSupported()) {\n      return this\n    }\n\n    const $feedbackContainer =\n      this.config.feedbackContainer.element ??\n      this.$root.querySelector(this.config.feedbackContainer.selector)\n\n    if (!$feedbackContainer || !($feedbackContainer instanceof HTMLElement)) {\n      return this\n    }\n\n    this.$feedbackContainer = $feedbackContainer\n\n    this.setupFileInput()\n    this.setupDropzone()\n    this.setupLabel()\n    this.setupStatusBox()\n\n    this.$root.addEventListener('click', this.onFileDeleteClick.bind(this))\n    this.$root.classList.add('moj-multi-file-upload--enhanced')\n  }\n\n  setupDropzone() {\n    this.$dropzone = document.createElement('div')\n    this.$dropzone.classList.add('moj-multi-file-upload__dropzone')\n\n    this.$dropzone.addEventListener('dragover', this.onDragOver.bind(this))\n    this.$dropzone.addEventListener('dragleave', this.onDragLeave.bind(this))\n    this.$dropzone.addEventListener('drop', this.onDrop.bind(this))\n\n    this.$fileInput.replaceWith(this.$dropzone)\n    this.$dropzone.appendChild(this.$fileInput)\n  }\n\n  setupLabel() {\n    const $label = document.createElement('label')\n    $label.setAttribute('for', this.$fileInput.id)\n    $label.classList.add('govuk-button', 'govuk-button--secondary')\n    $label.textContent = this.config.dropzoneButtonText\n\n    const $hint = document.createElement('p')\n    $hint.classList.add('govuk-body')\n    $hint.textContent = this.config.dropzoneHintText\n\n    this.$label = $label\n    this.$dropzone.append($hint)\n    this.$dropzone.append($label)\n  }\n\n  setupFileInput() {\n    this.$fileInput = /** @type {HTMLInputElement} */ (\n      this.$root.querySelector('.moj-multi-file-upload__input')\n    )\n    this.$fileInput.addEventListener('change', this.onFileChange.bind(this))\n    this.$fileInput.addEventListener('focus', this.onFileFocus.bind(this))\n    this.$fileInput.addEventListener('blur', this.onFileBlur.bind(this))\n  }\n\n  setupStatusBox() {\n    this.$status = document.createElement('div')\n    this.$status.classList.add('govuk-visually-hidden')\n    this.$status.setAttribute('aria-live', 'polite')\n    this.$status.setAttribute('role', 'status')\n    this.$dropzone.append(this.$status)\n  }\n\n  /**\n   * @param {DragEvent} event - Drag event\n   */\n  onDragOver(event) {\n    event.preventDefault()\n    this.$dropzone.classList.add('moj-multi-file-upload--dragover')\n  }\n\n  onDragLeave() {\n    this.$dropzone.classList.remove('moj-multi-file-upload--dragover')\n  }\n\n  /**\n   * @param {DragEvent} event - Drag event\n   */\n  onDrop(event) {\n    event.preventDefault()\n    this.$dropzone.classList.remove('moj-multi-file-upload--dragover')\n    this.$feedbackContainer.classList.remove('moj-hidden')\n    this.$status.textContent = this.config.uploadStatusText\n    this.uploadFiles(event.dataTransfer.files)\n  }\n\n  /**\n   * @param {FileList} files - File list\n   */\n  uploadFiles(files) {\n    for (const file of Array.from(files)) {\n      this.uploadFile(file)\n    }\n  }\n\n  onFileChange() {\n    this.$feedbackContainer.classList.remove('moj-hidden')\n    this.$status.textContent = this.config.uploadStatusText\n    this.uploadFiles(this.$fileInput.files)\n\n    const $fileInput = this.$fileInput.cloneNode(true)\n    if (!$fileInput || !($fileInput instanceof HTMLInputElement)) {\n      return\n    }\n\n    $fileInput.value = ''\n    this.$fileInput.replaceWith($fileInput)\n\n    this.setupFileInput()\n    this.$fileInput.focus()\n  }\n\n  onFileFocus() {\n    this.$label.classList.add('moj-multi-file-upload--focused')\n  }\n\n  onFileBlur() {\n    this.$label.classList.remove('moj-multi-file-upload--focused')\n  }\n\n  /**\n   * @param {UploadResponseSuccess['success']} success\n   */\n  getSuccessHtml(success) {\n    return `<span class=\"moj-multi-file-upload__success\"> <svg class=\"moj-banner__icon\" fill=\"currentColor\" role=\"presentation\" focusable=\"false\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 25 25\" height=\"25\" width=\"25\"><path d=\"M25,6.2L8.7,23.2L0,14.1l4-4.2l4.7,4.9L21,2L25,6.2z\"/></svg>${success.messageHtml}</span>`\n  }\n\n  /**\n   * @param {UploadResponseError['error']} error\n   */\n  getErrorHtml(error) {\n    return `<span class=\"moj-multi-file-upload__error\"> <svg class=\"moj-banner__icon\" fill=\"currentColor\" role=\"presentation\" focusable=\"false\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 25 25\" height=\"25\" width=\"25\"><path d=\"M13.6,15.4h-2.3v-4.5h2.3V15.4z M13.6,19.8h-2.3v-2.2h2.3V19.8z M0,23.2h25L12.5,2L0,23.2z\"/></svg>${error.message}</span>`\n  }\n\n  /**\n   * @param {File} file\n   */\n  getFileRow(file) {\n    const $row = document.createElement('div')\n\n    $row.classList.add('govuk-summary-list__row', 'moj-multi-file-upload__row')\n\n    $row.innerHTML = `\n    <div class=\"govuk-summary-list__value moj-multi-file-upload__message\">\n      <span class=\"moj-multi-file-upload__filename\">${file.name}</span>\n      <span class=\"moj-multi-file-upload__progress\">0%</span>\n    </div>\n    <div class=\"govuk-summary-list__actions moj-multi-file-upload__actions\"></div>\n  `\n\n    return $row\n  }\n\n  /**\n   * @param {UploadResponseFile} file\n   */\n  getDeleteButton(file) {\n    const $button = document.createElement('button')\n\n    $button.setAttribute('type', 'button')\n    $button.setAttribute('name', 'delete')\n    $button.setAttribute('value', file.filename)\n\n    $button.classList.add(\n      'moj-multi-file-upload__delete',\n      'govuk-button',\n      'govuk-button--secondary',\n      'govuk-!-margin-bottom-0'\n    )\n\n    $button.innerHTML = `Delete <span class=\"govuk-visually-hidden\">${file.originalname}</span>`\n\n    return $button\n  }\n\n  /**\n   * @param {File} file\n   */\n  uploadFile(file) {\n    this.config.hooks.entryHook(this, file)\n\n    const $item = this.getFileRow(file)\n    const $message = $item.querySelector('.moj-multi-file-upload__message')\n    const $actions = $item.querySelector('.moj-multi-file-upload__actions')\n    const $progress = $item.querySelector('.moj-multi-file-upload__progress')\n\n    const formData = new FormData()\n    formData.append('documents', file)\n\n    this.$feedbackContainer\n      .querySelector('.moj-multi-file-upload__list')\n      .append($item)\n\n    const xhr = new XMLHttpRequest()\n\n    const onLoad = () => {\n      if (\n        xhr.status < 200 ||\n        xhr.status >= 300 ||\n        !('success' in xhr.response)\n      ) {\n        return onError()\n      }\n\n      $message.innerHTML = this.getSuccessHtml(xhr.response.success)\n      this.$status.textContent = xhr.response.success.messageText\n\n      $actions.append(this.getDeleteButton(xhr.response.file))\n      this.config.hooks.exitHook(this, file, xhr, xhr.responseText)\n    }\n\n    const onError = () => {\n      const error = new Error(\n        xhr.response && 'error' in xhr.response\n          ? xhr.response.error.message\n          : xhr.statusText || 'Upload failed'\n      )\n\n      $message.innerHTML = this.getErrorHtml(error)\n      this.$status.textContent = error.message\n\n      this.config.hooks.errorHook(this, file, xhr, xhr.responseText, error)\n    }\n\n    xhr.addEventListener('load', onLoad)\n    xhr.addEventListener('error', onError)\n\n    xhr.upload.addEventListener('progress', (event) => {\n      if (!event.lengthComputable) {\n        return\n      }\n\n      const percentComplete = Math.round((event.loaded / event.total) * 100)\n      $progress.textContent = ` ${percentComplete}%`\n    })\n\n    xhr.open('POST', this.config.uploadUrl)\n    xhr.responseType = 'json'\n\n    xhr.send(formData)\n  }\n\n  /**\n   * @param {MouseEvent} event - Click event\n   */\n  onFileDeleteClick(event) {\n    const $button = event.target\n\n    if (\n      !$button ||\n      !($button instanceof HTMLButtonElement) ||\n      !$button.classList.contains('moj-multi-file-upload__delete')\n    ) {\n      return\n    }\n\n    event.preventDefault() // if user refreshes page and then deletes\n\n    const xhr = new XMLHttpRequest()\n\n    xhr.addEventListener('load', () => {\n      if (xhr.status < 200 || xhr.status >= 300) {\n        return\n      }\n\n      const $rows = Array.from(\n        this.$feedbackContainer.querySelectorAll('.moj-multi-file-upload__row')\n      )\n\n      if ($rows.length === 1) {\n        this.$feedbackContainer.classList.add('moj-hidden')\n      }\n\n      const $rowDelete = $rows.find(($row) => $row.contains($button))\n      if ($rowDelete) $rowDelete.remove()\n\n      this.config.hooks.deleteHook(this, undefined, xhr, xhr.responseText)\n    })\n\n    xhr.open('POST', this.config.deleteUrl)\n    xhr.setRequestHeader('Content-Type', 'application/json')\n    xhr.responseType = 'json'\n\n    xhr.send(\n      JSON.stringify({\n        [$button.name]: $button.value\n      })\n    )\n  }\n\n  static isSupported() {\n    return (\n      this.isDragAndDropSupported() &&\n      this.isFormDataSupported() &&\n      this.isFileApiSupported()\n    )\n  }\n\n  static isDragAndDropSupported() {\n    const div = document.createElement('div')\n    return typeof div.ondrop !== 'undefined'\n  }\n\n  static isFormDataSupported() {\n    return typeof FormData === 'function'\n  }\n\n  static isFileApiSupported() {\n    const input = document.createElement('input')\n    input.type = 'file'\n    return typeof input.files !== 'undefined'\n  }\n\n  /**\n   * Name for the component used when initialising using data-module attributes.\n   */\n  static moduleName = 'moj-multi-file-upload'\n\n  /**\n   * Multi file upload default config\n   *\n   * @type {MultiFileUploadConfig}\n   */\n  static defaults = Object.freeze({\n    uploadStatusText: 'Uploading files, please wait',\n    dropzoneHintText: 'Drag and drop files here or',\n    dropzoneButtonText: 'Choose files',\n    feedbackContainer: {\n      selector: '.moj-multi-file__uploaded-files'\n    },\n    hooks: {\n      entryHook: () => {},\n      exitHook: () => {},\n      errorHook: () => {},\n      deleteHook: () => {}\n    }\n  })\n\n  /**\n   * Multi file upload config schema\n   *\n   * @satisfies {Schema<MultiFileUploadConfig>}\n   */\n  static schema = Object.freeze(\n    /** @type {const} */ ({\n      properties: {\n        uploadUrl: { type: 'string' },\n        deleteUrl: { type: 'string' },\n        uploadStatusText: { type: 'string' },\n        dropzoneHintText: { type: 'string' },\n        dropzoneButtonText: { type: 'string' },\n        feedbackContainer: { type: 'object' },\n        hooks: { type: 'object' }\n      }\n    })\n  )\n}\n\n/**\n * Multi file upload config\n *\n * @typedef {object} MultiFileUploadConfig\n * @property {string} [uploadUrl] - File upload URL\n * @property {string} [deleteUrl] - File delete URL\n * @property {string} [uploadStatusText] - Upload status text\n * @property {string} [dropzoneHintText] - Dropzone hint text\n * @property {string} [dropzoneButtonText] - Dropzone button text\n * @property {object} [feedbackContainer] - Feedback container config\n * @property {string} [feedbackContainer.selector] - Selector for feedback container\n * @property {Element | null} [feedbackContainer.element] - HTML element for feedback container\n * @property {MultiFileUploadHooks} [hooks] - Upload hooks\n */\n\n/**\n * Multi file upload hooks\n *\n * @typedef {object} MultiFileUploadHooks\n * @property {OnUploadFileEntryHook} [entryHook] - File upload entry hook\n * @property {OnUploadFileExitHook} [exitHook] - File upload exit hook\n * @property {OnUploadFileErrorHook} [errorHook] - File upload error hook\n * @property {OnUploadFileDeleteHook} [deleteHook] - File delete hook\n */\n\n/**\n * Upload hook: File entry\n *\n * @callback OnUploadFileEntryHook\n * @param {InstanceType<typeof MultiFileUpload>} upload - Multi file upload\n * @param {File} file - File upload\n */\n\n/**\n * Upload hook: File exit\n *\n * @callback OnUploadFileExitHook\n * @param {InstanceType<typeof MultiFileUpload>} upload - Multi file upload\n * @param {File} file - File upload\n * @param {XMLHttpRequest} xhr - XMLHttpRequest\n * @param {string} textStatus - Text status\n */\n\n/**\n * Upload hook: File error\n *\n * @callback OnUploadFileErrorHook\n * @param {InstanceType<typeof MultiFileUpload>} upload - Multi file upload\n * @param {File} file - File upload\n * @param {XMLHttpRequest} xhr - XMLHttpRequest\n * @param {string} textStatus - Text status\n * @param {Error} errorThrown - Error thrown\n */\n\n/**\n * Upload hook: File delete\n *\n * @callback OnUploadFileDeleteHook\n * @param {InstanceType<typeof MultiFileUpload>} upload - Multi file upload\n * @param {File} [file] - File upload\n * @param {XMLHttpRequest} xhr - XMLHttpRequest\n * @param {string} textStatus - Text status\n */\n\n/**\n * @typedef {object} UploadResponseSuccess\n * @property {{ messageText: string, messageHtml: string }} success - Response success\n * @property {UploadResponseFile} file - Response file\n */\n\n/**\n * @typedef {object} UploadResponseError\n * @property {{ message: string }} error - Response error\n * @property {UploadResponseFile} file - Response file\n */\n\n/**\n * @typedef {object} UploadResponseFile\n * @property {string} filename - File name\n * @property {string} originalname - Original file name\n */\n\n/**\n * @import { Schema } from 'govuk-frontend/dist/govuk/common/configuration.mjs'\n */\n","import { ConfigurableComponent } from 'govuk-frontend'\n\n/**\n * @augments {ConfigurableComponent<MultiSelectConfig>}\n */\nexport class MultiSelect extends ConfigurableComponent {\n  /**\n   * @param {Element | null} $root - HTML element to use for multi select\n   * @param {MultiSelectConfig} [config] - Multi select config\n   */\n  constructor($root, config = {}) {\n    super($root, config)\n\n    const $container = this.$root.querySelector(\n      `#${this.config.idPrefix}select-all`\n    )\n\n    const $checkboxes = /** @type {NodeListOf<HTMLInputElement>} */ (\n      this.config.checkboxes.items ??\n        this.$root.querySelectorAll(this.config.checkboxes.selector)\n    )\n\n    if (\n      !$container ||\n      !($container instanceof HTMLElement) ||\n      !$checkboxes.length\n    ) {\n      return this\n    }\n\n    this.setupToggle(this.config.idPrefix)\n\n    this.$toggleButton = this.$toggle.querySelector('input')\n    this.$toggleButton.addEventListener('click', this.onButtonClick.bind(this))\n\n    this.$container = $container\n    this.$container.append(this.$toggle)\n\n    this.$checkboxes = Array.from($checkboxes)\n    this.$checkboxes.forEach(($input) =>\n      $input.addEventListener('click', this.onCheckboxClick.bind(this))\n    )\n\n    this.checked = config.checked || false\n  }\n\n  setupToggle(idPrefix = '') {\n    const id = `${idPrefix}checkboxes-all`\n\n    const $toggle = document.createElement('div')\n    const $label = document.createElement('label')\n    const $input = document.createElement('input')\n    const $span = document.createElement('span')\n\n    $toggle.classList.add(\n      'govuk-checkboxes__item',\n      'govuk-checkboxes--small',\n      'moj-multi-select__checkbox'\n    )\n\n    $input.id = id\n    $input.type = 'checkbox'\n    $input.classList.add('govuk-checkboxes__input')\n\n    $label.setAttribute('for', id)\n    $label.classList.add(\n      'govuk-label',\n      'govuk-checkboxes__label',\n      'moj-multi-select__toggle-label'\n    )\n\n    $span.classList.add('govuk-visually-hidden')\n    $span.textContent = 'Select all'\n\n    $label.append($span)\n    $toggle.append($input, $label)\n\n    this.$toggle = $toggle\n  }\n\n  onButtonClick() {\n    if (this.checked) {\n      this.uncheckAll()\n      this.$toggleButton.checked = false\n    } else {\n      this.checkAll()\n      this.$toggleButton.checked = true\n    }\n  }\n\n  checkAll() {\n    this.$checkboxes.forEach(($input) => {\n      $input.checked = true\n    })\n\n    this.checked = true\n  }\n\n  uncheckAll() {\n    this.$checkboxes.forEach(($input) => {\n      $input.checked = false\n    })\n\n    this.checked = false\n  }\n\n  /**\n   * @param {MouseEvent} event - Click event\n   */\n  onCheckboxClick(event) {\n    if (!(event.target instanceof HTMLInputElement)) {\n      return\n    }\n\n    if (!event.target.checked) {\n      this.$toggleButton.checked = false\n      this.checked = false\n    } else {\n      if (\n        this.$checkboxes.filter(($input) => $input.checked).length ===\n        this.$checkboxes.length\n      ) {\n        this.$toggleButton.checked = true\n        this.checked = true\n      }\n    }\n  }\n\n  /**\n   * Name for the component used when initialising using data-module attributes.\n   */\n  static moduleName = 'moj-multi-select'\n\n  /**\n   * Multi select config\n   *\n   * @type {MultiSelectConfig}\n   */\n  static defaults = Object.freeze({\n    idPrefix: '',\n    checkboxes: {\n      selector: 'tbody input.govuk-checkboxes__input'\n    }\n  })\n\n  /**\n   * Multi select config schema\n   *\n   * @satisfies {Schema<MultiSelectConfig>}\n   */\n  static schema = Object.freeze(\n    /** @type {const} */ ({\n      properties: {\n        idPrefix: { type: 'string' },\n        checked: { type: 'boolean' },\n        checkboxes: { type: 'object' }\n      }\n    })\n  )\n}\n\n/**\n * Multi select config\n *\n * @typedef {object} MultiSelectConfig\n * @property {string} [idPrefix] - Prefix for the Select all\" checkbox `id` attribute\n * @property {boolean} [checked] - Whether the \"Select all\" checkbox is checked\n * @property {object} [checkboxes] - Checkboxes config\n * @property {string} [checkboxes.selector] - Checkboxes query selector\n * @property {NodeListOf<HTMLInputElement>} [checkboxes.items] - Checkboxes query selector results\n */\n\n/**\n * @import { Schema } from 'govuk-frontend/dist/govuk/common/configuration.mjs'\n */\n","import { Component } from 'govuk-frontend'\n\nexport class PasswordReveal extends Component {\n  /**\n   * @param {Element | null} $root - HTML element to use for password reveal\n   */\n  constructor($root) {\n    super($root)\n\n    const $input = this.$root.querySelector('.govuk-input')\n    if (!$input || !($input instanceof HTMLInputElement)) {\n      return this\n    }\n\n    this.$input = $input\n    this.$input.setAttribute('spellcheck', 'false')\n\n    this.createButton()\n  }\n\n  createButton() {\n    this.$group = document.createElement('div')\n    this.$button = document.createElement('button')\n\n    this.$button.setAttribute('type', 'button')\n\n    this.$root.classList.add('moj-password-reveal')\n    this.$group.classList.add('moj-password-reveal__wrapper')\n    this.$button.classList.add(\n      'govuk-button',\n      'govuk-button--secondary',\n      'moj-password-reveal__button'\n    )\n\n    this.$button.innerHTML =\n      'Show <span class=\"govuk-visually-hidden\">password</span>'\n\n    this.$button.addEventListener('click', this.onButtonClick.bind(this))\n\n    this.$group.append(this.$input, this.$button)\n    this.$root.append(this.$group)\n  }\n\n  onButtonClick() {\n    if (this.$input.type === 'password') {\n      this.$input.type = 'text'\n      this.$button.innerHTML =\n        'Hide <span class=\"govuk-visually-hidden\">password</span>'\n    } else {\n      this.$input.type = 'password'\n      this.$button.innerHTML =\n        'Show <span class=\"govuk-visually-hidden\">password</span>'\n    }\n  }\n\n  /**\n   * Name for the component used when initialising using data-module attributes.\n   */\n  static moduleName = 'moj-password-reveal'\n}\n","import { ConfigurableComponent } from 'govuk-frontend'\n\n/**\n * @augments {ConfigurableComponent<RichTextEditorConfig>}\n */\nexport class RichTextEditor extends ConfigurableComponent {\n  /**\n   * @param {Element | null} $root - HTML element to use for rich text editor\n   * @param {RichTextEditorConfig} config\n   */\n  constructor($root, config = {}) {\n    super($root, config)\n\n    if (!RichTextEditor.isSupported()) {\n      return this\n    }\n\n    const $textarea = this.$root.querySelector('.govuk-textarea')\n    if (!$textarea || !($textarea instanceof HTMLTextAreaElement)) {\n      return this\n    }\n\n    this.$textarea = $textarea\n\n    this.createToolbar()\n    this.hideDefault()\n    this.configureToolbar()\n\n    this.keys = {\n      left: 37,\n      right: 39,\n      up: 38,\n      down: 40\n    }\n\n    this.$content.addEventListener('input', this.onEditorInput.bind(this))\n\n    this.$root\n      .querySelector('label')\n      .addEventListener('click', this.onLabelClick.bind(this))\n\n    this.$toolbar.addEventListener('keydown', this.onToolbarKeydown.bind(this))\n  }\n\n  /**\n   * @param {KeyboardEvent} event - Click event\n   */\n  onToolbarKeydown(event) {\n    let $focusableButton\n    switch (event.keyCode) {\n      case this.keys.right:\n      case this.keys.down: {\n        $focusableButton = this.$buttons.find(\n          (button) => button.getAttribute('tabindex') === '0'\n        )\n\n        if ($focusableButton) {\n          const $nextButton = $focusableButton.nextElementSibling\n\n          if ($nextButton && $nextButton instanceof HTMLButtonElement) {\n            $nextButton.focus()\n            $focusableButton.setAttribute('tabindex', '-1')\n            $nextButton.setAttribute('tabindex', '0')\n          }\n        }\n\n        break\n      }\n\n      case this.keys.left:\n      case this.keys.up: {\n        $focusableButton = this.$buttons.find(\n          (button) => button.getAttribute('tabindex') === '0'\n        )\n\n        if ($focusableButton) {\n          const $previousButton = $focusableButton.previousElementSibling\n\n          if ($previousButton && $previousButton instanceof HTMLButtonElement) {\n            $previousButton.focus()\n            $focusableButton.setAttribute('tabindex', '-1')\n            $previousButton.setAttribute('tabindex', '0')\n          }\n        }\n\n        break\n      }\n    }\n  }\n\n  getToolbarHtml() {\n    let html = ''\n\n    html += '<div class=\"moj-rich-text-editor__toolbar\" role=\"toolbar\">'\n\n    if (this.config.toolbar.bold) {\n      html +=\n        '<button class=\"moj-rich-text-editor__toolbar-button moj-rich-text-editor__toolbar-button--bold\" type=\"button\" data-command=\"bold\"><span class=\"govuk-visually-hidden\">Bold</span></button>'\n    }\n\n    if (this.config.toolbar.italic) {\n      html +=\n        '<button class=\"moj-rich-text-editor__toolbar-button moj-rich-text-editor__toolbar-button--italic\" type=\"button\" data-command=\"italic\"><span class=\"govuk-visually-hidden\">Italic</span></button>'\n    }\n\n    if (this.config.toolbar.underline) {\n      html +=\n        '<button class=\"moj-rich-text-editor__toolbar-button moj-rich-text-editor__toolbar-button--underline\" type=\"button\" data-command=\"underline\"><span class=\"govuk-visually-hidden\">Underline</span></button>'\n    }\n\n    if (this.config.toolbar.bullets) {\n      html +=\n        '<button class=\"moj-rich-text-editor__toolbar-button moj-rich-text-editor__toolbar-button--unordered-list\" type=\"button\" data-command=\"insertUnorderedList\"><span class=\"govuk-visually-hidden\">Unordered list</span></button>'\n    }\n\n    if (this.config.toolbar.numbers) {\n      html +=\n        '<button class=\"moj-rich-text-editor__toolbar-button moj-rich-text-editor__toolbar-button--ordered-list\" type=\"button\" data-command=\"insertOrderedList\"><span class=\"govuk-visually-hidden\">Ordered list</span></button>'\n    }\n\n    html += '</div>'\n    return html\n  }\n\n  getEnhancedHtml() {\n    return `${this.getToolbarHtml()}<div class=\"govuk-textarea moj-rich-text-editor__content\" contenteditable=\"true\" spellcheck=\"false\"></div>`\n  }\n\n  hideDefault() {\n    this.$textarea.classList.add('govuk-visually-hidden')\n    this.$textarea.setAttribute('aria-hidden', 'true')\n    this.$textarea.setAttribute('tabindex', '-1')\n  }\n\n  createToolbar() {\n    this.$toolbar = document.createElement('div')\n    this.$toolbar.className = 'moj-rich-text-editor'\n    this.$toolbar.innerHTML = this.getEnhancedHtml()\n    this.$root.append(this.$toolbar)\n\n    this.$content = /** @type {HTMLElement} */ (\n      this.$root.querySelector('.moj-rich-text-editor__content')\n    )\n\n    this.$content.innerHTML = this.$textarea.value\n  }\n\n  configureToolbar() {\n    this.$buttons = Array.from(\n      /** @type {NodeListOf<HTMLButtonElement>} */\n      (this.$root.querySelectorAll('.moj-rich-text-editor__toolbar-button'))\n    )\n\n    this.$buttons.forEach(($button, index) => {\n      $button.setAttribute('tabindex', !index ? '0' : '-1')\n      $button.addEventListener('click', this.onButtonClick.bind(this))\n    })\n  }\n\n  /**\n   * @param {MouseEvent} event - Click event\n   */\n  onButtonClick(event) {\n    if (!(event.currentTarget instanceof HTMLElement)) {\n      return\n    }\n\n    document.execCommand(\n      event.currentTarget.getAttribute('data-command'),\n      false,\n      undefined\n    )\n  }\n\n  getContent() {\n    return this.$content.innerHTML\n  }\n\n  onEditorInput() {\n    this.updateTextarea()\n  }\n\n  updateTextarea() {\n    document.execCommand('defaultParagraphSeparator', false, 'p')\n    this.$textarea.value = this.getContent()\n  }\n\n  /**\n   * @param {MouseEvent} event - Click event\n   */\n  onLabelClick(event) {\n    event.preventDefault()\n    this.$content.focus()\n  }\n\n  static isSupported() {\n    return 'contentEditable' in document.documentElement\n  }\n\n  /**\n   * Name for the component used when initialising using data-module attributes.\n   */\n  static moduleName = 'moj-rich-text-editor'\n\n  /**\n   * Rich text editor config\n   *\n   * @type {RichTextEditorConfig}\n   */\n  static defaults = Object.freeze({\n    toolbar: {\n      bold: false,\n      italic: false,\n      underline: false,\n      bullets: true,\n      numbers: true\n    }\n  })\n\n  /**\n   * Rich text editor config schema\n   *\n   * @satisfies {Schema<RichTextEditorConfig>}\n   */\n  static schema = Object.freeze(\n    /** @type {const} */ ({\n      properties: {\n        toolbar: { type: 'object' }\n      }\n    })\n  )\n}\n\n/**\n * Rich text editor config\n *\n * @typedef {object} RichTextEditorConfig\n * @property {RichTextEditorToolbar} [toolbar] - Toolbar options\n */\n\n/**\n * Rich text editor toolbar options\n *\n * @typedef {object} RichTextEditorToolbar\n * @property {boolean} [bold] - Show the bold button\n * @property {boolean} [italic] - Show the italic button\n * @property {boolean} [underline] - Show the underline button\n * @property {boolean} [bullets] - Show the bullets button\n * @property {boolean} [numbers] - Show the numbers button\n */\n\n/**\n * @import { Schema } from 'govuk-frontend/dist/govuk/common/configuration.mjs'\n */\n","import { ConfigurableComponent } from 'govuk-frontend'\n\n/**\n * @augments {ConfigurableComponent<SearchToggleConfig>}\n */\nexport class SearchToggle extends ConfigurableComponent {\n  /**\n   * @param {Element | null} $root - HTML element to use for search toggle\n   * @param {SearchToggleConfig} [config] - Search toggle config\n   */\n  constructor($root, config = {}) {\n    super($root, config)\n\n    const $searchContainer =\n      this.config.searchContainer.element ??\n      this.$root.querySelector(this.config.searchContainer.selector)\n\n    const $toggleButtonContainer =\n      this.config.toggleButtonContainer.element ??\n      this.$root.querySelector(this.config.toggleButtonContainer.selector)\n\n    if (\n      !$searchContainer ||\n      !$toggleButtonContainer ||\n      !($searchContainer instanceof HTMLElement) ||\n      !($toggleButtonContainer instanceof HTMLElement)\n    ) {\n      return this\n    }\n\n    this.$searchContainer = $searchContainer\n    this.$toggleButtonContainer = $toggleButtonContainer\n\n    const svg =\n      '<svg viewBox=\"0 0 20 20\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" class=\"moj-search-toggle__button__icon\"><path d=\"M7.433,12.5790048 C6.06762625,12.5808611 4.75763941,12.0392925 3.79217348,11.0738265 C2.82670755,10.1083606 2.28513891,8.79837375 2.28699522,7.433 C2.28513891,6.06762625 2.82670755,4.75763941 3.79217348,3.79217348 C4.75763941,2.82670755 6.06762625,2.28513891 7.433,2.28699522 C8.79837375,2.28513891 10.1083606,2.82670755 11.0738265,3.79217348 C12.0392925,4.75763941 12.5808611,6.06762625 12.5790048,7.433 C12.5808611,8.79837375 12.0392925,10.1083606 11.0738265,11.0738265 C10.1083606,12.0392925 8.79837375,12.5808611 7.433,12.5790048 L7.433,12.5790048 Z M14.293,12.579 L13.391,12.579 L13.071,12.269 C14.2300759,10.9245158 14.8671539,9.20813198 14.866,7.433 C14.866,3.32786745 11.5381325,-1.65045755e-15 7.433,-1.65045755e-15 C3.32786745,-1.65045755e-15 -1.65045755e-15,3.32786745 -1.65045755e-15,7.433 C-1.65045755e-15,11.5381325 3.32786745,14.866 7.433,14.866 C9.208604,14.8671159 10.9253982,14.2296624 12.27,13.07 L12.579,13.39 L12.579,14.294 L18.296,20 L20,18.296 L14.294,12.579 L14.293,12.579 Z\"></path></svg>'\n\n    this.$toggleButton = document.createElement('button')\n    this.$toggleButton.setAttribute('class', 'moj-search-toggle__button')\n    this.$toggleButton.setAttribute('type', 'button')\n    this.$toggleButton.setAttribute('aria-haspopup', 'true')\n    this.$toggleButton.setAttribute('aria-expanded', 'false')\n    this.$toggleButton.innerHTML = `${this.config.toggleButton.text} ${svg}`\n\n    this.$toggleButton.addEventListener(\n      'click',\n      this.onToggleButtonClick.bind(this)\n    )\n\n    this.$toggleButtonContainer.append(this.$toggleButton)\n\n    document.addEventListener('click', this.onDocumentClick.bind(this))\n    document.addEventListener('focusin', this.onDocumentClick.bind(this))\n  }\n\n  showMenu() {\n    this.$toggleButton.setAttribute('aria-expanded', 'true')\n    this.$searchContainer.classList.remove('moj-js-hidden')\n    this.$searchContainer.querySelector('input').focus()\n  }\n\n  hideMenu() {\n    this.$searchContainer.classList.add('moj-js-hidden')\n    this.$toggleButton.setAttribute('aria-expanded', 'false')\n  }\n\n  onToggleButtonClick() {\n    if (this.$toggleButton.getAttribute('aria-expanded') === 'false') {\n      this.showMenu()\n    } else {\n      this.hideMenu()\n    }\n  }\n\n  /**\n   * @param {MouseEvent | FocusEvent} event\n   */\n  onDocumentClick(event) {\n    if (\n      event.target instanceof Node &&\n      !this.$toggleButtonContainer.contains(event.target) &&\n      !this.$searchContainer.contains(event.target)\n    ) {\n      this.hideMenu()\n    }\n  }\n\n  /**\n   * Name for the component used when initialising using data-module attributes.\n   */\n  static moduleName = 'moj-search-toggle'\n\n  /**\n   * Search toggle config\n   *\n   * @type {SearchToggleConfig}\n   */\n  static defaults = Object.freeze({\n    searchContainer: {\n      selector: '.moj-search'\n    },\n    toggleButton: {\n      text: 'Search'\n    },\n    toggleButtonContainer: {\n      selector: '.moj-search-toggle__toggle'\n    }\n  })\n\n  /**\n   * Search toggle config schema\n   *\n   * @satisfies {Schema<SearchToggleConfig>}\n   */\n  static schema = Object.freeze(\n    /** @type {const} */ ({\n      properties: {\n        searchContainer: { type: 'object' },\n        toggleButton: { type: 'object' },\n        toggleButtonContainer: { type: 'object' }\n      }\n    })\n  )\n}\n\n/**\n * @typedef {object} SearchToggleConfig\n * @property {object} [searchContainer] - Search config\n * @property {string} [searchContainer.selector] - Selector for search container\n * @property {Element | null} [searchContainer.element] - HTML element for search container\n * @property {object} [toggleButton] - Toggle button config\n * @property {string} [toggleButton.text] - Text for toggle button\n * @property {object} [toggleButtonContainer] - Toggle button container config\n * @property {string} [toggleButtonContainer.selector] - Selector for toggle button container\n * @property {Element | null} [toggleButtonContainer.element] - HTML element for toggle button container\n */\n\n/**\n * @import { Schema } from 'govuk-frontend/dist/govuk/common/configuration.mjs'\n */\n","import { ConfigurableComponent } from 'govuk-frontend'\n\n/**\n * @augments {ConfigurableComponent<SortableTableConfig>}\n */\nexport class SortableTable extends ConfigurableComponent {\n  /**\n   * @param {Element | null} $root - HTML element to use for sortable table\n   * @param {SortableTableConfig} [config] - Sortable table config\n   */\n  constructor($root, config = {}) {\n    super($root, config)\n\n    const $head = $root?.querySelector('thead')\n    const $body = $root?.querySelector('tbody')\n\n    if (!$head || !$body) {\n      return this\n    }\n\n    this.$head = $head\n    this.$body = $body\n    this.$caption = this.$root.querySelector('caption')\n\n    this.$upArrow = `<svg width=\"22\" height=\"22\" focusable=\"false\" aria-hidden=\"true\" role=\"img\" viewBox=\"0 0 22 22\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M6.5625 15.5L11 6.63125L15.4375 15.5H6.5625Z\" fill=\"currentColor\"/>\n</svg>`\n    this.$downArrow = `<svg width=\"22\" height=\"22\" focusable=\"false\" aria-hidden=\"true\" role=\"img\" viewBox=\"0 0 22 22\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M15.4375 7L11 15.8687L6.5625 7L15.4375 7Z\" fill=\"currentColor\"/>\n</svg>`\n    this.$upDownArrow = `<svg width=\"22\" height=\"22\" focusable=\"false\" aria-hidden=\"true\" role=\"img\" viewBox=\"0 0 22 22\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M8.1875 9.5L10.9609 3.95703L13.7344 9.5H8.1875Z\" fill=\"currentColor\"/>\n<path d=\"M13.7344 12.0781L10.9609 17.6211L8.1875 12.0781H13.7344Z\" fill=\"currentColor\"/>\n</svg>`\n\n    this.$headings = this.$head\n      ? Array.from(this.$head.querySelectorAll('th'))\n      : []\n\n    this.createHeadingButtons()\n    this.updateCaption()\n    this.updateDirectionIndicators()\n    this.createStatusBox()\n    this.initialiseSortedColumn()\n\n    this.$head.addEventListener('click', this.onSortButtonClick.bind(this))\n  }\n\n  createHeadingButtons() {\n    for (const $heading of this.$headings) {\n      if ($heading.hasAttribute('aria-sort')) {\n        this.createHeadingButton($heading)\n      }\n    }\n  }\n\n  /**\n   * @param {HTMLTableCellElement} $heading\n   */\n  createHeadingButton($heading) {\n    const index = this.$headings.indexOf($heading)\n    const $button = document.createElement('button')\n\n    $button.setAttribute('type', 'button')\n    $button.setAttribute('data-index', `${index}`)\n    $button.textContent = $heading.textContent\n\n    $heading.textContent = ''\n    $heading.appendChild($button)\n  }\n\n  createStatusBox() {\n    this.$status = document.createElement('div')\n\n    this.$status.setAttribute('aria-atomic', 'true')\n    this.$status.setAttribute('aria-live', 'polite')\n    this.$status.setAttribute('class', 'govuk-visually-hidden')\n    this.$status.setAttribute('role', 'status')\n\n    this.$root.insertAdjacentElement('afterend', this.$status)\n  }\n\n  initialiseSortedColumn() {\n    const $rows = this.getTableRowsArray()\n\n    const $heading = this.$root.querySelector(\n      'th[aria-sort=\"ascending\"], th[aria-sort=\"descending\"]'\n    )\n    const $sortButton = $heading?.querySelector('button')\n    const sortDirection = $heading?.getAttribute('aria-sort')\n\n    const columnNumber = Number.parseInt(\n      $sortButton?.getAttribute('data-index') ?? '0',\n      10\n    )\n\n    if (\n      !$heading ||\n      !$sortButton ||\n      !(sortDirection === 'ascending' || sortDirection === 'descending')\n    ) {\n      return\n    }\n\n    const $sortedRows = this.sort($rows, columnNumber, sortDirection)\n    this.addRows($sortedRows)\n  }\n\n  /**\n   * @param {MouseEvent} event - Click event\n   */\n  onSortButtonClick(event) {\n    const $target = /** @type {HTMLElement} */ (event.target)\n    const $button = $target.closest('button')\n\n    if (\n      !$button ||\n      !($button instanceof HTMLButtonElement) ||\n      !$button.parentElement\n    ) {\n      return\n    }\n\n    const $heading = $button.parentElement\n    const sortDirection = $heading.getAttribute('aria-sort')\n\n    const columnNumber = Number.parseInt(\n      $button?.getAttribute('data-index') ?? '0',\n      10\n    )\n\n    const newSortDirection =\n      sortDirection === 'none' || sortDirection === 'descending'\n        ? 'ascending'\n        : 'descending'\n\n    const $rows = this.getTableRowsArray()\n    const $sortedRows = this.sort($rows, columnNumber, newSortDirection)\n\n    this.addRows($sortedRows)\n    this.removeButtonStates()\n    this.updateButtonState($button, newSortDirection)\n    this.updateDirectionIndicators()\n  }\n\n  updateCaption() {\n    if (!this.$caption) {\n      return\n    }\n\n    let assistiveText = this.$caption.querySelector('.govuk-visually-hidden')\n    if (assistiveText) {\n      return\n    }\n\n    assistiveText = document.createElement('span')\n    assistiveText.classList.add('govuk-visually-hidden')\n    assistiveText.textContent = ' (column headers with buttons are sortable).'\n\n    this.$caption.appendChild(assistiveText)\n  }\n\n  /**\n   * @param {HTMLButtonElement} $button\n   * @param {string} direction\n   */\n  updateButtonState($button, direction) {\n    if (!(direction === 'ascending' || direction === 'descending')) {\n      return\n    }\n\n    $button.parentElement.setAttribute('aria-sort', direction)\n    let message = this.config.statusMessage\n    message = message.replace(/%heading%/, $button.textContent)\n    message = message.replace(/%direction%/, this.config[`${direction}Text`])\n    this.$status.textContent = message\n  }\n\n  updateDirectionIndicators() {\n    for (const $heading of this.$headings) {\n      const $button = /** @type {HTMLButtonElement} */ (\n        $heading.querySelector('button')\n      )\n      if ($heading.hasAttribute('aria-sort') && $button) {\n        const direction = $heading.getAttribute('aria-sort')\n        $button.querySelector('svg')?.remove()\n\n        switch (direction) {\n          case 'ascending':\n            $button.insertAdjacentHTML('beforeend', this.$upArrow)\n            break\n          case 'descending':\n            $button.insertAdjacentHTML('beforeend', this.$downArrow)\n            break\n          default:\n            $button.insertAdjacentHTML('beforeend', this.$upDownArrow)\n        }\n      }\n    }\n  }\n\n  removeButtonStates() {\n    for (const $heading of this.$headings) {\n      $heading.setAttribute('aria-sort', 'none')\n    }\n  }\n\n  /**\n   * @param {HTMLTableRowElement[]} $rows\n   */\n  addRows($rows) {\n    for (const $row of $rows) {\n      this.$body.append($row)\n    }\n  }\n\n  getTableRowsArray() {\n    return Array.from(this.$body.querySelectorAll('tr'))\n  }\n\n  /**\n   * @param {HTMLTableRowElement[]} $rows\n   * @param {number} columnNumber\n   * @param {string} sortDirection\n   */\n  sort($rows, columnNumber, sortDirection) {\n    return $rows.sort(($rowA, $rowB) => {\n      const $tdA = $rowA.querySelectorAll('td, th')[columnNumber]\n      const $tdB = $rowB.querySelectorAll('td, th')[columnNumber]\n\n      if (\n        !$tdA ||\n        !$tdB ||\n        !($tdA instanceof HTMLElement) ||\n        !($tdB instanceof HTMLElement)\n      ) {\n        return 0\n      }\n\n      const valueA =\n        sortDirection === 'ascending'\n          ? this.getCellValue($tdA)\n          : this.getCellValue($tdB)\n\n      const valueB =\n        sortDirection === 'ascending'\n          ? this.getCellValue($tdB)\n          : this.getCellValue($tdA)\n\n      return !(typeof valueA === 'number' && typeof valueB === 'number')\n        ? valueA.toString().localeCompare(valueB.toString())\n        : valueA - valueB\n    })\n  }\n\n  /**\n   * @param {HTMLElement} $cell\n   */\n  getCellValue($cell) {\n    const val = $cell.getAttribute('data-sort-value') || $cell.innerHTML\n    const valAsNumber = Number(val)\n\n    return Number.isFinite(valAsNumber)\n      ? valAsNumber // Exclude invalid numbers, infinity etc\n      : val\n  }\n\n  /**\n   * Name for the component used when initialising using data-module attributes.\n   */\n  static moduleName = 'moj-sortable-table'\n\n  /**\n   * Sortable table config\n   *\n   * @type {SortableTableConfig}\n   */\n  static defaults = Object.freeze({\n    statusMessage: 'Sort by %heading% (%direction%)',\n    ascendingText: 'ascending',\n    descendingText: 'descending'\n  })\n\n  /**\n   * Sortable table config schema\n   *\n   * @satisfies {Schema<SortableTableConfig>}\n   */\n  static schema = Object.freeze(\n    /** @type {const} */ ({\n      properties: {\n        statusMessage: { type: 'string' },\n        ascendingText: { type: 'string' },\n        descendingText: { type: 'string' }\n      }\n    })\n  )\n}\n\n/**\n * Sortable table config\n *\n * @typedef {object} SortableTableConfig\n * @property {string} [statusMessage] - Status message\n * @property {string} [ascendingText] - Ascending text\n * @property {string} [descendingText] - Descending text\n */\n\n/**\n * @import { Schema } from 'govuk-frontend/dist/govuk/common/configuration.mjs'\n */\n","import { createAll } from 'govuk-frontend'\n\nimport { version } from './common/moj-frontend-version.mjs'\nimport { AddAnother } from './components/add-another/add-another.mjs'\nimport { Alert } from './components/alert/alert.mjs'\nimport { ButtonMenu } from './components/button-menu/button-menu.mjs'\nimport { DatePicker } from './components/date-picker/date-picker.mjs'\nimport { FilterToggleButton } from './components/filter-toggle-button/filter-toggle-button.mjs'\nimport { FormValidator } from './components/form-validator/form-validator.mjs'\nimport { MultiFileUpload } from './components/multi-file-upload/multi-file-upload.mjs'\nimport { MultiSelect } from './components/multi-select/multi-select.mjs'\nimport { PasswordReveal } from './components/password-reveal/password-reveal.mjs'\nimport { RichTextEditor } from './components/rich-text-editor/rich-text-editor.mjs'\nimport { SearchToggle } from './components/search-toggle/search-toggle.mjs'\nimport { SortableTable } from './components/sortable-table/sortable-table.mjs'\n\n/**\n * @param {Config} [config]\n */\nfunction initAll(config) {\n  for (const Component of [\n    AddAnother,\n    Alert,\n    ButtonMenu,\n    DatePicker,\n    MultiSelect,\n    PasswordReveal,\n    RichTextEditor,\n    SearchToggle,\n    SortableTable\n  ]) {\n    createAll(Component, undefined, config)\n  }\n}\n\nexport {\n  initAll,\n  version,\n\n  // Components\n  AddAnother,\n  Alert,\n  ButtonMenu,\n  DatePicker,\n  FilterToggleButton,\n  FormValidator,\n  MultiFileUpload,\n  MultiSelect,\n  PasswordReveal,\n  RichTextEditor,\n  SearchToggle,\n  SortableTable\n}\n\n/**\n * @typedef {Parameters<typeof GOVUKFrontend.initAll>[0]} Config\n */\n\n/**\n * @import * as GOVUKFrontend from 'govuk-frontend'\n */\n"],"names":["version","AddAnother","Component","constructor","$root","addEventListener","onRemoveButtonClick","bind","onAddButtonClick","$buttons","querySelectorAll","forEach","$button","HTMLButtonElement","type","event","target","classList","contains","$items","getItems","$item","getNewItem","HTMLElement","updateAttributes","length","resetItem","$firstItem","hasRemoveButton","createRemoveButton","after","$input","querySelector","HTMLInputElement","focus","Array","from","filter","item","cloneNode","index","isValidInputElement","name","getAttribute","id","originalId","replace","$label","parentElement","closest","HTMLLabelElement","htmlFor","document","createElement","add","textContent","append","HTMLSelectElement","selectedIndex","value","HTMLTextAreaElement","checked","remove","focusHeading","$heading","moduleName","setFocus","$element","options","_options$onBeforeFocu","isFocusable","setAttribute","onFocus","onBlur","once","_options$onBlur","call","removeAttribute","onBeforeFocus","removeAttributeValue","attr","re","m","RegExp","match","addAttributeValue","test","getPreviousSibling","selector","$sibling","previousElementSibling","matches","findNearestMatchingElement","$currentElement","Alert","ConfigurableComponent","config","disableAutoFocus","$dismissButton","dismissible","innerHTML","dismissText","Node","dimiss","$elementToRecieveFocus","focusOnDismissSelector","$nextSibling","nextElementSibling","defaults","Object","freeze","schema","properties","ButtonMenu","children","className","startsWith","buttonClasses","split","initMenu","$menu","createMenu","insertAdjacentHTML","toggleTemplate","setupMenuItems","$menuToggle","toggleMenu","handleKeyDown","closeMenu","hidden","alignMenu","appendChild","firstChild","$menuItem","$listItem","insertBefore","tagName","setTimeout","buttonText","isOpen","preventDefault","keyboardEvent","detail","focusIndex","openMenu","focusItem","moveFocus","currentFocusIndex","$activeElement","activeElement","$menuItems","HTMLAnchorElement","indexOf","key","DatePicker","_this$config$input$el","input","element","dayLabels","monthLabels","currentDate","Date","setHours","calendarDays","excludedDates","excludedDays","buttonClass","selectedDayButtonClass","currentDayButtonClass","todayButtonClass","setOptions","initControls","$dialog","createDialog","createCalendarHeaders","$componentWrapper","$inputWrapper","insertAdjacentElement","$calendarButton","$dialogTitle","createCalendar","$prevMonthButton","$prevYearButton","$nextMonthButton","$nextYearButton","$cancelButton","$okButton","focusPreviousMonth","focusPreviousYear","focusNextMonth","focusNextYear","closeDialog","selectDate","$dialogButtons","$firstButtonInDialog","$lastButtonInDialog","firstButtonKeydown","lastButtonKeydown","toggleDialog","stopPropagation","body","backgroundClick","updateCalendar","titleId","dialogTemplate","$tbody","dayCount","i","$row","insertRow","j","$cell","$dateButton","calendarDay","DSCalendarDay","push","day","html","substring","$headerRow","leadingZeros","ret","toString","setMinAndMaxDatesOnCalendar","setExcludedDates","setExcludedDays","setWeekStartDay","minDate","formattedDateFromString","maxDate","map","includes","parseDateRangeString","reduce","dates","items","concat","date","datestring","startDate","endDate","d","getTime","setDate","getDate","weekDays","toLowerCase","weekStartDay","unshift","pop","weekStartDayParam","isExcludedDate","excludedDate","toDateString","getDay","dateString","fallback","formattedDate","dateFormatPattern","exec","month","year","Number","isFinite","formattedDateFromDate","getMonth","getFullYear","formattedDateHuman","shiftKey","firstOfMonth","dayOfWeek","thisDay","disabled","update","setCurrentDate","calendarDayDate","today","inputDate","enabledDays","window","getComputedStyle","display","innerText","changeEvent","Event","bubbles","cancelable","dispatchEvent","openDialog","offsetWidth","style","right","top","offsetHeight","goToDate","current","focusNextDay","focusPreviousDay","focusNextWeek","focusPreviousWeek","focusFirstDayOfWeek","firstDayOfWeekIndex","diff","focusLastDayOfWeek","lastDayOfWeekIndex","setMonth","setFullYear","row","column","picker","keyPress","click","label","accessibleLabel","calendarNavKey","FilterToggleButton","_this$config$toggleBu","_this$config$closeBut","$toggleButtonContainer","toggleButtonContainer","$closeButtonContainer","closeButtonContainer","createToggleButton","setupResponsiveChecks","startHidden","hideMenu","mq","matchMedia","bigModeMediaQuery","addListener","checkMode","$menuButton","toggleButton","classes","showText","onMenuButtonClick","enableBigMode","enableSmallMode","showMenu","removeCloseButton","addCloseButton","$closeButton","closeButton","text","onCloseClick","hideText","toggle","FormValidator","$summary","summary","errors","validators","originalTitle","title","onSubmit","escapeHtml","string","String","entityMap","resetTitle","updateTitle","showSummary","getSummaryHtml","error","fieldName","message","hideSummary","removeInlineErrors","validate","showInlineErrors","showInlineError","$errorSpan","$control","$fieldset","$fieldContainer","$legend","removeInlineError","addValidator","rules","field","elements","namedItem","validator","validatorReturnValue","method","params","MultiFileUpload","_this$config$feedback","isSupported","$feedbackContainer","feedbackContainer","setupFileInput","setupDropzone","setupLabel","setupStatusBox","onFileDeleteClick","$dropzone","onDragOver","onDragLeave","onDrop","$fileInput","replaceWith","dropzoneButtonText","$hint","dropzoneHintText","onFileChange","onFileFocus","onFileBlur","$status","uploadStatusText","uploadFiles","dataTransfer","files","file","uploadFile","getSuccessHtml","success","messageHtml","getErrorHtml","getFileRow","getDeleteButton","filename","originalname","hooks","entryHook","$message","$actions","$progress","formData","FormData","xhr","XMLHttpRequest","onLoad","status","response","onError","messageText","exitHook","responseText","Error","statusText","errorHook","upload","lengthComputable","percentComplete","Math","round","loaded","total","open","uploadUrl","responseType","send","$rows","$rowDelete","find","deleteHook","undefined","deleteUrl","setRequestHeader","JSON","stringify","isDragAndDropSupported","isFormDataSupported","isFileApiSupported","div","ondrop","MultiSelect","_this$config$checkbox","$container","idPrefix","$checkboxes","checkboxes","setupToggle","$toggleButton","$toggle","onButtonClick","onCheckboxClick","$span","uncheckAll","checkAll","PasswordReveal","createButton","$group","RichTextEditor","$textarea","createToolbar","hideDefault","configureToolbar","keys","left","up","down","$content","onEditorInput","onLabelClick","$toolbar","onToolbarKeydown","$focusableButton","keyCode","button","$nextButton","$previousButton","getToolbarHtml","toolbar","bold","italic","underline","bullets","numbers","getEnhancedHtml","currentTarget","execCommand","getContent","updateTextarea","documentElement","SearchToggle","_this$config$searchCo","$searchContainer","searchContainer","svg","onToggleButtonClick","onDocumentClick","SortableTable","$head","$body","$caption","$upArrow","$downArrow","$upDownArrow","$headings","createHeadingButtons","updateCaption","updateDirectionIndicators","createStatusBox","initialiseSortedColumn","onSortButtonClick","hasAttribute","createHeadingButton","_$sortButton$getAttri","getTableRowsArray","$sortButton","sortDirection","columnNumber","parseInt","$sortedRows","sort","addRows","_$button$getAttribute","$target","newSortDirection","removeButtonStates","updateButtonState","assistiveText","direction","statusMessage","_$button$querySelecto","$rowA","$rowB","$tdA","$tdB","valueA","getCellValue","valueB","localeCompare","val","valAsNumber","ascendingText","descendingText","initAll","createAll"],"mappings":"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"}